{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { registerForIntl, provideIntlService } from '@progress/kendo-react-intl';\nimport { DomEventsBuilder as ChartDomEventsBuilder, InstanceObserver } from '@progress/kendo-charts';\nimport { canUseDOM } from '@progress/kendo-react-common';\nimport { hasParent } from './utils/main';\nimport { DomEventsBuilder } from './events/dom-events-builder';\nimport { create as createEvent } from './events/chart-event-builder';\nimport { toDomEvent } from './events/dom-event';\nimport { loadTheme } from './theming/theme-service';\nimport createStore from './store/store';\nimport { optionsReducer, themeReducer, observersReducer } from './store/reducer';\nimport { toggle } from './utils/main';\nimport './defaults';\nimport { SeriesTooltip } from './tooltip/Series';\nimport { CrosshairTooltipContainer } from './tooltip/CrosshairContainer';\nimport { ChartContext } from './ChartContext';\nimport { validatePackage } from '@progress/kendo-licensing';\nimport { packageMetadata } from './package-metadata';\n/**\n * @hidden\n */\n\nvar BaseChart =\n/** @class */\nfunction (_super) {\n  __extends(BaseChart, _super);\n\n  function BaseChart(props) {\n    var _this = _super.call(this, props) || this;\n    /**\n     * @hidden\n     */\n\n\n    _this.chartInstance = null;\n    _this._element = null;\n    _this.optionsStore = {};\n    _this.optionsUnsubscriber = Function.prototype;\n    _this.themeStore = {};\n    _this.themeUnsubscriber = Function.prototype;\n    _this.observersStore = {};\n    _this.suppressTransitions = false;\n    /* Chart handlers */\n\n    /**\n     * @hidden\n     */\n\n    _this.onRender = function (e) {\n      if (_this.chartInstance !== null) {\n        _this.surface = e.sender.surface;\n\n        _this.trigger('render', e);\n      }\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.onLegendItemClick = function (e) {\n      if (_this.chartInstance !== null) {\n        /**\n         * In \"controlled\" state the user should toggle the series data visibility\n         */\n        if (_this.props.onLegendItemClick) {\n          _this.trigger('legendItemClick', e);\n        } else {\n          var series = _this.optionsStore.getState().series;\n\n          if (!series) {\n            return;\n          }\n\n          var payload = {};\n          var seriesIndex = e.seriesIndex,\n              pointIndex = e.pointIndex;\n          var seriesByIndex = series[seriesIndex];\n\n          if (pointIndex === undefined) {\n            payload = Object.assign({}, seriesByIndex, {\n              visible: toggle(seriesByIndex.visible)\n            });\n          } else {\n            var pv = seriesByIndex.pointVisibility = seriesByIndex.pointVisibility || [];\n            pv[pointIndex] = toggle(pv[pointIndex]);\n            payload = Object.assign({}, seriesByIndex);\n          }\n\n          _this.optionsStore.dispatch({\n            chartCollectionIdxKey: \"series_\" + seriesIndex,\n            payload: payload\n          });\n\n          _this.suppressTransitions = true;\n        }\n      }\n    };\n    /* Dom event handlers */\n\n    /**\n     * @hidden\n     */\n\n\n    _this.onWindowResize = function () {\n      if (_this.chartInstance !== null) {\n        _this.chartInstance.resize();\n      }\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.onChartMouseLeave = function (e) {\n      var domEvent = toDomEvent(_this, e);\n\n      var isDefaultPrevented = _this.triggerDomEvent('onMouseLeave', domEvent);\n\n      if (isDefaultPrevented) {\n        e.preventDefault();\n      } else if (_this.chartInstance !== null) {\n        _this.chartInstance.hideElements();\n      }\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.onChildMouseLeave = function (e) {\n      var syntheticEvent = e.syntheticEvent;\n\n      if (_this.chartInstance && !hasParent(syntheticEvent.relatedTarget, _this.element)) {\n        _this.chartInstance.hideElements();\n      }\n\n      return false;\n    };\n\n    validatePackage(packageMetadata);\n    _this.optionsStore = createStore(optionsReducer);\n    _this.observersStore = createStore(observersReducer);\n    _this.childrenObserver = new InstanceObserver(_this, {\n      onMouseLeave: 'onChildMouseLeave'\n    });\n    _this.contextValue = {\n      optionsStore: _this.optionsStore,\n      observersStore: _this.observersStore,\n      childrenObserver: _this.childrenObserver\n    };\n    _this.themeStore = createStore(themeReducer);\n    _this.chartObserver = new InstanceObserver(_this, {\n      render: 'onRender',\n      legendItemClick: 'onLegendItemClick'\n    });\n    return _this;\n  }\n\n  Object.defineProperty(BaseChart.prototype, \"element\", {\n    /**\n     * @hidden\n     */\n    get: function get() {\n      return this._element;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\n   * @hidden\n   */\n\n  BaseChart.prototype.componentDidMount = function () {\n    loadTheme(this.themeStore, this.instantiateCoreChart.bind(this));\n    this.optionsUnsubscriber = this.optionsStore.subscribe(this.refresh.bind(this));\n    this.themeUnsubscriber = this.themeStore.subscribe(this.refresh.bind(this));\n    window.addEventListener('resize', this.onWindowResize);\n  };\n  /**\n   * @hidden\n   */\n\n\n  BaseChart.prototype.componentWillUnmount = function () {\n    this.optionsUnsubscriber();\n    this.themeUnsubscriber();\n\n    if (this.chartInstance !== null) {\n      this.chartInstance.destroy();\n      this.chartInstance = null;\n    }\n\n    window.removeEventListener('resize', this.onWindowResize);\n  };\n  /**\n   * @hidden\n   */\n\n\n  BaseChart.prototype.componentDidUpdate = function (prevProps) {\n    var _a = this.props,\n        dir = _a.dir,\n        children = _a.children,\n        spreadProps = __rest(_a, [\"dir\", \"children\"]);\n\n    if (this.chartInstance !== null) {\n      var currentIntlService = provideIntlService(this);\n      var chartService = this.chartInstance.chartService;\n      var localeChanged = currentIntlService.locale !== chartService._intlService.locale;\n      var shouldUpdate = Object.entries(prevProps).filter(function (keyValue) {\n        return keyValue[0] !== 'dir' && keyValue[0] !== 'children';\n      }).some(function (keyValue) {\n        var key = keyValue[0],\n            value = keyValue[1];\n        return !(spreadProps.hasOwnProperty(key) && spreadProps[key] === value);\n      });\n\n      if (localeChanged) {\n        this.chartInstance.chartService._intlService = currentIntlService;\n        this.chartInstance.chartService.format._intlService = currentIntlService;\n\n        if (!shouldUpdate) {\n          this.chartInstance.noTransitionsRedraw();\n        }\n      }\n\n      if (shouldUpdate) {\n        this.refresh();\n      }\n\n      if (prevProps.dir !== dir) {\n        this.chartInstance.setDirection(this.getDirection(dir));\n      }\n    }\n  };\n  /**\n   * @hidden\n   */\n\n\n  BaseChart.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        _b = _a.style,\n        style = _b === void 0 ? {} : _b,\n        wrapperClassName = _a.wrapperClassName,\n        wrapper = _a.wrapper,\n        children = _a.children;\n    var chartStyles = Object.assign({}, style, {\n      position: 'relative'\n    });\n    var content = React.createElement(wrapper, {\n      className: wrapperClassName,\n      style: chartStyles,\n      key: 'chartElement'\n    }, React.createElement(\"div\", {\n      onMouseLeave: this.onChartMouseLeave,\n      ref: function ref(el) {\n        return _this._element = el;\n      },\n      className: \"k-chart-surface\"\n    }, children));\n    return React.createElement(ChartContext.Provider, {\n      value: this.contextValue\n    }, React.createElement(SeriesTooltip, {\n      key: \"seriesTooltip\"\n    }), React.createElement(CrosshairTooltipContainer, {\n      key: \"crosshairTooltips\"\n    }), content);\n  };\n  /**\n   * @hidden\n   */\n\n\n  BaseChart.prototype.getDirection = function (dir) {\n    var _this = this;\n\n    var directionFromWindow = function directionFromWindow() {\n      return canUseDOM && window.getComputedStyle(_this.element).direction;\n    };\n\n    var direction = dir !== undefined ? dir : directionFromWindow() || 'ltr';\n    return direction === 'rtl';\n  };\n  /**\n   * @hidden\n   */\n\n\n  BaseChart.prototype.getChartOptions = function () {\n    var _a = this.props,\n        renderAs = _a.renderAs,\n        pannable = _a.pannable,\n        zoomable = _a.zoomable,\n        paneDefaults = _a.paneDefaults,\n        panes = _a.panes,\n        transitions = _a.transitions,\n        seriesColors = _a.seriesColors,\n        seriesDefaults = _a.seriesDefaults,\n        axisDefaults = _a.axisDefaults,\n        deriveOptionsFromParent = _a.deriveOptionsFromParent;\n    var chartOptions = {}; // undefined clears chart defaults which leads to several issues\n\n    if (renderAs !== undefined) {\n      chartOptions.renderAs = renderAs;\n    }\n\n    if (pannable !== undefined) {\n      chartOptions.pannable = pannable;\n    }\n\n    if (zoomable !== undefined) {\n      chartOptions.zoomable = zoomable;\n    }\n\n    if (paneDefaults !== undefined) {\n      chartOptions.paneDefaults = paneDefaults;\n    }\n\n    if (panes !== undefined) {\n      chartOptions.panes = panes;\n    }\n\n    if (transitions !== undefined) {\n      chartOptions.transitions = transitions;\n    }\n\n    if (seriesColors !== undefined) {\n      chartOptions.seriesColors = seriesColors;\n    }\n\n    if (seriesDefaults !== undefined) {\n      chartOptions.seriesDefaults = seriesDefaults;\n    }\n\n    if (axisDefaults !== undefined) {\n      chartOptions.axisDefaults = axisDefaults;\n    }\n\n    chartOptions = Object.assign(chartOptions, this.optionsStore.getState());\n\n    if (deriveOptionsFromParent) {\n      chartOptions = deriveOptionsFromParent(chartOptions);\n    }\n\n    return chartOptions;\n  };\n  /**\n   * @hidden\n   */\n\n\n  BaseChart.prototype.refresh = function () {\n    if (this.chartInstance !== null) {\n      var themeOptions = this.themeStore.getState();\n      var chartOptions = this.getChartOptions();\n      var transitions = chartOptions.transitions;\n\n      if (this.suppressTransitions) {\n        chartOptions.transitions = false;\n      }\n\n      if (this.props.onRefresh) {\n        this.props.onRefresh.call(undefined, chartOptions, themeOptions, this.chartInstance);\n      } else {\n        this.chartInstance.setOptions(chartOptions, themeOptions);\n      }\n\n      if (this.suppressTransitions) {\n        chartOptions.transitions = transitions;\n        this.suppressTransitions = false;\n      }\n    }\n  };\n  /**\n   * @hidden\n   */\n\n\n  BaseChart.prototype.instantiateCoreChart = function () {\n    var _a = this.props,\n        dir = _a.dir,\n        chartConstructor = _a.chartConstructor;\n    var chartOptions = this.getChartOptions();\n    this.chartInstance = new chartConstructor(this.element, chartOptions, this.themeStore.getState(), {\n      rtl: this.getDirection(dir),\n      intlService: provideIntlService(this),\n      observer: this.chartObserver,\n      sender: this\n    });\n  };\n  /* Triggers public dom event handlers */\n\n  /**\n   * @hidden\n   */\n\n\n  BaseChart.prototype.trigger = function (name, e) {\n    var target = this.props.getTarget();\n    var eventObject = createEvent(name, e, target);\n    var handler = 'on' + name.charAt(0).toUpperCase() + name.slice(1);\n    var observers = this.observersStore.getState();\n    var isDefaultPrevented = false;\n\n    for (var idx = 0; idx < observers.length; idx++) {\n      if (observers[idx].trigger(name, e)) {\n        isDefaultPrevented = true;\n      }\n    }\n    /* We have not prevented the event internally, now pass it to the user */\n\n\n    if (isDefaultPrevented === false && eventObject && this.props.hasOwnProperty(handler)) {\n      this.props[handler].call(undefined, eventObject);\n      return eventObject.isDefaultPrevented && eventObject.isDefaultPrevented();\n    }\n\n    return isDefaultPrevented;\n  };\n  /* Used by (event)InstanceObserver to check the wrapper for supported events */\n\n  /**\n   * @hidden\n   */\n\n\n  BaseChart.prototype.requiresHandlers = function (names) {\n    for (var idx = 0; idx < names.length; idx++) {\n      var name_1 = names[idx];\n      var handler = 'on' + name_1.charAt(0).toUpperCase() + name_1.slice(1);\n\n      if (this.props.hasOwnProperty(handler)) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n  /* Triggers private dom event handlers */\n\n  /**\n   * @hidden\n   */\n\n\n  BaseChart.prototype.triggerDomEvent = function (name, e) {\n    var observers = this.observersStore.getState();\n    var isDefaultPrevented = false;\n\n    for (var idx = 0; idx < observers.length; idx++) {\n      if (observers[idx].trigger(name, e)) {\n        isDefaultPrevented = true;\n      }\n    }\n\n    return isDefaultPrevented;\n  };\n  /**\n   * @hidden\n   */\n\n\n  BaseChart.propTypes = {\n    dir: PropTypes.string,\n    renderAs: PropTypes.oneOf(['svg', 'canvas'])\n  };\n  /**\n   * @hidden\n   */\n\n  BaseChart.defaultProps = {\n    renderAs: 'svg'\n  };\n  return BaseChart;\n}(React.Component);\n\nexport { BaseChart };\nregisterForIntl(BaseChart);\nChartDomEventsBuilder.register(DomEventsBuilder);","map":{"version":3,"sources":["../../src/BaseChart.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { registerForIntl, provideIntlService } from '@progress/kendo-react-intl';\nimport { DomEventsBuilder as ChartDomEventsBuilder, InstanceObserver } from '@progress/kendo-charts';\nimport { canUseDOM } from '@progress/kendo-react-common';\nimport { hasParent } from './utils/main';\nimport { DomEventsBuilder } from './events/dom-events-builder';\nimport { create as createEvent } from './events/chart-event-builder';\nimport { toDomEvent } from './events/dom-event';\nimport { loadTheme } from './theming/theme-service';\nimport createStore from './store/store';\nimport { optionsReducer, themeReducer, observersReducer } from './store/reducer';\nimport { toggle } from './utils/main';\nimport './defaults';\nimport { SeriesTooltip } from './tooltip/Series';\nimport { CrosshairTooltipContainer } from './tooltip/CrosshairContainer';\nimport { ChartContext } from './ChartContext';\nimport { validatePackage } from '@progress/kendo-licensing';\nimport { packageMetadata } from './package-metadata';\n/**\n * @hidden\n */\nvar BaseChart = /** @class */ (function (_super) {\n    __extends(BaseChart, _super);\n    function BaseChart(props) {\n        var _this = _super.call(this, props) || this;\n        /**\n         * @hidden\n         */\n        _this.chartInstance = null;\n        _this._element = null;\n        _this.optionsStore = {};\n        _this.optionsUnsubscriber = Function.prototype;\n        _this.themeStore = {};\n        _this.themeUnsubscriber = Function.prototype;\n        _this.observersStore = {};\n        _this.suppressTransitions = false;\n        /* Chart handlers */\n        /**\n         * @hidden\n         */\n        _this.onRender = function (e) {\n            if (_this.chartInstance !== null) {\n                _this.surface = e.sender.surface;\n                _this.trigger('render', e);\n            }\n        };\n        /**\n         * @hidden\n         */\n        _this.onLegendItemClick = function (e) {\n            if (_this.chartInstance !== null) {\n                /**\n                 * In \"controlled\" state the user should toggle the series data visibility\n                 */\n                if (_this.props.onLegendItemClick) {\n                    _this.trigger('legendItemClick', e);\n                }\n                else {\n                    var series = _this.optionsStore.getState().series;\n                    if (!series) {\n                        return;\n                    }\n                    var payload = {};\n                    var seriesIndex = e.seriesIndex, pointIndex = e.pointIndex;\n                    var seriesByIndex = series[seriesIndex];\n                    if (pointIndex === undefined) {\n                        payload = Object.assign({}, seriesByIndex, { visible: toggle(seriesByIndex.visible) });\n                    }\n                    else {\n                        var pv = seriesByIndex.pointVisibility = seriesByIndex.pointVisibility || [];\n                        pv[pointIndex] = toggle(pv[pointIndex]);\n                        payload = Object.assign({}, seriesByIndex);\n                    }\n                    _this.optionsStore.dispatch({\n                        chartCollectionIdxKey: \"series_\" + seriesIndex,\n                        payload: payload\n                    });\n                    _this.suppressTransitions = true;\n                }\n            }\n        };\n        /* Dom event handlers */\n        /**\n         * @hidden\n         */\n        _this.onWindowResize = function () {\n            if (_this.chartInstance !== null) {\n                _this.chartInstance.resize();\n            }\n        };\n        /**\n         * @hidden\n         */\n        _this.onChartMouseLeave = function (e) {\n            var domEvent = toDomEvent(_this, e);\n            var isDefaultPrevented = _this.triggerDomEvent('onMouseLeave', domEvent);\n            if (isDefaultPrevented) {\n                e.preventDefault();\n            }\n            else if (_this.chartInstance !== null) {\n                _this.chartInstance.hideElements();\n            }\n        };\n        /**\n         * @hidden\n         */\n        _this.onChildMouseLeave = function (e) {\n            var syntheticEvent = e.syntheticEvent;\n            if (_this.chartInstance && !hasParent(syntheticEvent.relatedTarget, _this.element)) {\n                _this.chartInstance.hideElements();\n            }\n            return false;\n        };\n        validatePackage(packageMetadata);\n        _this.optionsStore = createStore(optionsReducer);\n        _this.observersStore = createStore(observersReducer);\n        _this.childrenObserver = new InstanceObserver(_this, { onMouseLeave: 'onChildMouseLeave' });\n        _this.contextValue = {\n            optionsStore: _this.optionsStore,\n            observersStore: _this.observersStore,\n            childrenObserver: _this.childrenObserver\n        };\n        _this.themeStore = createStore(themeReducer);\n        _this.chartObserver = new InstanceObserver(_this, { render: 'onRender', legendItemClick: 'onLegendItemClick' });\n        return _this;\n    }\n    Object.defineProperty(BaseChart.prototype, \"element\", {\n        /**\n         * @hidden\n         */\n        get: function () {\n            return this._element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @hidden\n     */\n    BaseChart.prototype.componentDidMount = function () {\n        loadTheme(this.themeStore, this.instantiateCoreChart.bind(this));\n        this.optionsUnsubscriber = this.optionsStore.subscribe(this.refresh.bind(this));\n        this.themeUnsubscriber = this.themeStore.subscribe(this.refresh.bind(this));\n        window.addEventListener('resize', this.onWindowResize);\n    };\n    /**\n     * @hidden\n     */\n    BaseChart.prototype.componentWillUnmount = function () {\n        this.optionsUnsubscriber();\n        this.themeUnsubscriber();\n        if (this.chartInstance !== null) {\n            this.chartInstance.destroy();\n            this.chartInstance = null;\n        }\n        window.removeEventListener('resize', this.onWindowResize);\n    };\n    /**\n     * @hidden\n     */\n    BaseChart.prototype.componentDidUpdate = function (prevProps) {\n        var _a = this.props, dir = _a.dir, children = _a.children, spreadProps = __rest(_a, [\"dir\", \"children\"]);\n        if (this.chartInstance !== null) {\n            var currentIntlService = provideIntlService(this);\n            var chartService = this.chartInstance.chartService;\n            var localeChanged = currentIntlService.locale !== chartService._intlService.locale;\n            var shouldUpdate = Object.entries(prevProps)\n                .filter(function (keyValue) { return (keyValue[0] !== 'dir' && keyValue[0] !== 'children'); })\n                .some(function (keyValue) {\n                var key = keyValue[0], value = keyValue[1];\n                return !(spreadProps.hasOwnProperty(key) && spreadProps[key] === value);\n            });\n            if (localeChanged) {\n                this.chartInstance.chartService._intlService = currentIntlService;\n                this.chartInstance.chartService.format._intlService = currentIntlService;\n                if (!shouldUpdate) {\n                    this.chartInstance.noTransitionsRedraw();\n                }\n            }\n            if (shouldUpdate) {\n                this.refresh();\n            }\n            if (prevProps.dir !== dir) {\n                this.chartInstance.setDirection(this.getDirection(dir));\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    BaseChart.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, _b = _a.style, style = _b === void 0 ? {} : _b, wrapperClassName = _a.wrapperClassName, wrapper = _a.wrapper, children = _a.children;\n        var chartStyles = Object.assign({}, style, { position: 'relative' });\n        var content = React.createElement(wrapper, {\n            className: wrapperClassName,\n            style: chartStyles,\n            key: 'chartElement'\n        }, (React.createElement(\"div\", { onMouseLeave: this.onChartMouseLeave, ref: function (el) { return _this._element = el; }, className: \"k-chart-surface\" }, children)));\n        return (React.createElement(ChartContext.Provider, { value: this.contextValue },\n            React.createElement(SeriesTooltip, { key: \"seriesTooltip\" }),\n            React.createElement(CrosshairTooltipContainer, { key: \"crosshairTooltips\" }),\n            content));\n    };\n    /**\n     * @hidden\n     */\n    BaseChart.prototype.getDirection = function (dir) {\n        var _this = this;\n        var directionFromWindow = function () { return canUseDOM && window.getComputedStyle(_this.element).direction; };\n        var direction = dir !== undefined ? dir : (directionFromWindow() || 'ltr');\n        return direction === 'rtl';\n    };\n    /**\n     * @hidden\n     */\n    BaseChart.prototype.getChartOptions = function () {\n        var _a = this.props, renderAs = _a.renderAs, pannable = _a.pannable, zoomable = _a.zoomable, paneDefaults = _a.paneDefaults, panes = _a.panes, transitions = _a.transitions, seriesColors = _a.seriesColors, seriesDefaults = _a.seriesDefaults, axisDefaults = _a.axisDefaults, deriveOptionsFromParent = _a.deriveOptionsFromParent;\n        var chartOptions = {};\n        // undefined clears chart defaults which leads to several issues\n        if (renderAs !== undefined) {\n            chartOptions.renderAs = renderAs;\n        }\n        if (pannable !== undefined) {\n            chartOptions.pannable = pannable;\n        }\n        if (zoomable !== undefined) {\n            chartOptions.zoomable = zoomable;\n        }\n        if (paneDefaults !== undefined) {\n            chartOptions.paneDefaults = paneDefaults;\n        }\n        if (panes !== undefined) {\n            chartOptions.panes = panes;\n        }\n        if (transitions !== undefined) {\n            chartOptions.transitions = transitions;\n        }\n        if (seriesColors !== undefined) {\n            chartOptions.seriesColors = seriesColors;\n        }\n        if (seriesDefaults !== undefined) {\n            chartOptions.seriesDefaults = seriesDefaults;\n        }\n        if (axisDefaults !== undefined) {\n            chartOptions.axisDefaults = axisDefaults;\n        }\n        chartOptions = Object.assign(chartOptions, this.optionsStore.getState());\n        if (deriveOptionsFromParent) {\n            chartOptions = deriveOptionsFromParent(chartOptions);\n        }\n        return chartOptions;\n    };\n    /**\n     * @hidden\n     */\n    BaseChart.prototype.refresh = function () {\n        if (this.chartInstance !== null) {\n            var themeOptions = this.themeStore.getState();\n            var chartOptions = this.getChartOptions();\n            var transitions = chartOptions.transitions;\n            if (this.suppressTransitions) {\n                chartOptions.transitions = false;\n            }\n            if (this.props.onRefresh) {\n                this.props.onRefresh.call(undefined, chartOptions, themeOptions, this.chartInstance);\n            }\n            else {\n                this.chartInstance.setOptions(chartOptions, themeOptions);\n            }\n            if (this.suppressTransitions) {\n                chartOptions.transitions = transitions;\n                this.suppressTransitions = false;\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    BaseChart.prototype.instantiateCoreChart = function () {\n        var _a = this.props, dir = _a.dir, chartConstructor = _a.chartConstructor;\n        var chartOptions = this.getChartOptions();\n        this.chartInstance = new chartConstructor(this.element, chartOptions, this.themeStore.getState(), {\n            rtl: this.getDirection(dir),\n            intlService: provideIntlService(this),\n            observer: this.chartObserver,\n            sender: this\n        });\n    };\n    /* Triggers public dom event handlers */\n    /**\n     * @hidden\n     */\n    BaseChart.prototype.trigger = function (name, e) {\n        var target = this.props.getTarget();\n        var eventObject = createEvent(name, e, target);\n        var handler = 'on' + name.charAt(0).toUpperCase() + name.slice(1);\n        var observers = this.observersStore.getState();\n        var isDefaultPrevented = false;\n        for (var idx = 0; idx < observers.length; idx++) {\n            if (observers[idx].trigger(name, e)) {\n                isDefaultPrevented = true;\n            }\n        }\n        /* We have not prevented the event internally, now pass it to the user */\n        if (isDefaultPrevented === false\n            && eventObject\n            && this.props.hasOwnProperty(handler)) {\n            this.props[handler].call(undefined, eventObject);\n            return eventObject.isDefaultPrevented && eventObject.isDefaultPrevented();\n        }\n        return isDefaultPrevented;\n    };\n    /* Used by (event)InstanceObserver to check the wrapper for supported events */\n    /**\n     * @hidden\n     */\n    BaseChart.prototype.requiresHandlers = function (names) {\n        for (var idx = 0; idx < names.length; idx++) {\n            var name_1 = names[idx];\n            var handler = 'on' + name_1.charAt(0).toUpperCase() + name_1.slice(1);\n            if (this.props.hasOwnProperty(handler)) {\n                return true;\n            }\n        }\n        return false;\n    };\n    /* Triggers private dom event handlers */\n    /**\n     * @hidden\n     */\n    BaseChart.prototype.triggerDomEvent = function (name, e) {\n        var observers = this.observersStore.getState();\n        var isDefaultPrevented = false;\n        for (var idx = 0; idx < observers.length; idx++) {\n            if (observers[idx].trigger(name, e)) {\n                isDefaultPrevented = true;\n            }\n        }\n        return isDefaultPrevented;\n    };\n    /**\n     * @hidden\n     */\n    BaseChart.propTypes = {\n        dir: PropTypes.string,\n        renderAs: PropTypes.oneOf(['svg', 'canvas'])\n    };\n    /**\n     * @hidden\n     */\n    BaseChart.defaultProps = {\n        renderAs: 'svg'\n    };\n    return BaseChart;\n}(React.Component));\nexport { BaseChart };\nregisterForIntl(BaseChart);\nChartDomEventsBuilder.register(DomEventsBuilder);\n//# sourceMappingURL=BaseChart.js.map"]},"metadata":{},"sourceType":"module"}