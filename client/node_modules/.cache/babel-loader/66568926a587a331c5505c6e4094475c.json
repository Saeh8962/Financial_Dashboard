{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport * as PropTypes from 'prop-types';\nimport { dispatchEvent, classNames, getter, guid } from '@progress/kendo-react-common';\nimport { tableColumnsVirtualization, Pager, mapColumns, isRtl, tableKeyboardNavigation, TableKeyboardNavigationContext, tableKeyboardNavigationScopeAttributes, tableKeyboardNavigationTools as navigationTools, tableKeyboardNavigationBodyAttributes, getSelectionOptions, TableSelection } from '@progress/kendo-react-data-tools';\nimport { GridSelectionCell } from './cells/GridSelectionCell';\nimport { GridHierarchyCell } from './cells/GridHierarchyCell';\nimport { GridEditCell } from './cells/GridEditCell';\nimport { Header } from './header/Header';\nimport { HeaderRow } from './header/HeaderRow';\nimport { FilterRow } from './header/FilterRow';\nimport { GroupPanel } from './header/GroupPanel';\nimport { Footer } from './footer/Footer';\nimport { VirtualScroll } from './VirtualScroll';\nimport { ColumnResize } from './drag/ColumnResize';\nimport { CommonDragLogic } from './drag/CommonDragLogic';\nimport { DragClue } from './drag/DragClue';\nimport { DropClue } from './drag/DropClue';\nimport { getNestedValue, flatData, readColumns, autoGenerateColumns } from './utils/index';\nimport { GridCell } from './cells/GridCell';\nimport { GridGroupCell } from './cells/GridGroupCell';\nimport { GridRow } from './rows/GridRow';\nimport { GridHeaderSelectionCell } from './header/GridHeaderSelectionCell';\nimport { GridNoRecords } from './GridNoRecords';\nimport { operators } from './filterCommon';\nimport { FooterRow } from './footer/FooterRow';\nimport { normalize } from './paging/GridPagerSettings';\nimport { pagerMessagesMap } from './messages';\nimport { validatePackage } from '@progress/kendo-licensing';\nimport { packageMetadata } from './package-metadata';\nimport { GridDetailCell } from './cells/GridDetailCell';\nimport { GridDetailHierarchyCell } from './cells/GridDetailHierarchyCell';\n/**\n * Represents the [KendoReact Grid component]({% slug overview_grid %}).\n *\n * @example\n * ```jsx\n * class App extends React.Component {\n *    constructor(props) {\n *        super(props);\n *        this.state = {\n *            data: [\n *                { 'foo': 'A1', 'bar': 'B1' },\n *                { 'foo': 'A2', 'bar': 'B2' },\n *                { 'foo': 'A3', 'bar': 'B2' }\n *            ]\n *        };\n *    }\n *    render() {\n *        return (\n *            <Grid\n *                data={this.state.data}\n *                reorderable={true}\n *            >\n *                <GridColumn field=\"foo\" />\n *                <GridColumn field=\"bar\" />\n *            </Grid>\n *        );\n *    }\n * }\n * ReactDOM.render(<App />, document.querySelector('my-app'));\n * ```\n */\n\nvar Grid =\n/** @class */\nfunction (_super) {\n  __extends(Grid, _super);\n\n  function Grid(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this._columns = [];\n    _this._columnsMap = [[]];\n    _this.contextStateRef = {\n      current: undefined\n    };\n    _this.navigationStateRef = {\n      current: undefined\n    };\n    _this.element = null;\n    _this._header = null;\n    _this._footer = null;\n    _this.forceUpdateTimeout = undefined;\n    _this.isRtl = false;\n    _this._gridId = guid();\n    /**\n     * Method to allow the scroll to be set to a specific row index.\n     *\n     * @param options - Object, containing the rowIndex to which is going to be scrolled.\n     */\n\n    _this.scrollIntoView = function (options) {\n      if (!_this.vs.container || _this.props.scrollable === 'none') {\n        return;\n      }\n\n      var rowIndex = options.rowIndex;\n\n      if (_this.props.scrollable === 'virtual') {\n        _this.vs.askedSkip = rowIndex;\n\n        _this.vs.container.scroll(0, Math.round(_this.vs.askedSkip / _this.vs.total * _this.vs.container.scrollHeight));\n      } else if (_this.element) {\n        var selectedRow = rowIndex < 1 ? _this.element.querySelector(\"tbody > tr:nth-child(\" + 1 + \")\") : _this.element.querySelector(\"tbody > tr:nth-child(\" + rowIndex + \")\");\n\n        if (selectedRow) {\n          selectedRow.scrollIntoView(true);\n        }\n      }\n    };\n\n    _this.scrollHandler = function (event) {\n      if (event.target !== event.currentTarget) {\n        return;\n      }\n\n      clearTimeout(_this.forceUpdateTimeout);\n\n      if (_this.props.columnVirtualization && !_this.vs.scrollableVirtual) {\n        _this.forceUpdateTimeout = window.setTimeout(function () {\n          _this.forceUpdate();\n        }, 0);\n      }\n\n      if (_this._header) {\n        _this._header.setScrollLeft(event.currentTarget.scrollLeft);\n      }\n\n      if (_this._footer) {\n        _this._footer.setScrollLeft(event.currentTarget.scrollLeft);\n      }\n\n      if (_this.vs) {\n        _this.vs.scrollHandler(event);\n      }\n\n      dispatchEvent(_this.props.onScroll, event, _this, undefined);\n    };\n\n    _this.onKeyDown = function (event) {\n      tableKeyboardNavigation.onKeyDown(event, {\n        contextStateRef: _this.contextStateRef,\n        navigationStateRef: _this.navigationStateRef,\n        onNavigationAction: _this.onNavigationAction\n      });\n\n      if (_this.props.onKeyDown) {\n        var _a = getSelectionOptions(_this.props.selectable),\n            mode = _a.mode,\n            cell = _a.cell;\n\n        _this.props.onKeyDown.call(undefined, __assign({\n          dataItems: _this.getLeafDataItems(),\n          mode: mode,\n          cell: cell,\n          componentId: _this._gridId,\n          selectedField: _this.props.selectedField\n        }, _this.getArguments(event)));\n      }\n    };\n\n    _this.onFocus = function (event) {\n      tableKeyboardNavigation.onFocus(event, {\n        contextStateRef: _this.contextStateRef\n      });\n    };\n\n    _this.onNavigationAction = function (options) {\n      if (_this.props.onNavigationAction) {\n        _this.props.onNavigationAction.call(undefined, __assign({\n          focusElement: options.focusElement\n        }, _this.getArguments(options.event)));\n      }\n    };\n\n    _this.rowClick = function (e, item) {\n      if (_this.props.onRowClick && e.target.nodeName === 'TD') {\n        _this.props.onRowClick.call(undefined, __assign({\n          dataItem: item.dataItem\n        }, _this.getArguments(e)));\n      }\n    };\n\n    _this.rowDblClick = function (e, item) {\n      if (_this.props.onRowDoubleClick && e.target.nodeName === 'TD') {\n        _this.props.onRowDoubleClick.call(undefined, __assign({\n          dataItem: item.dataItem\n        }, _this.getArguments(e)));\n      }\n    };\n\n    _this.itemChange = function (event) {\n      var itemChange = _this.props.onItemChange;\n\n      if (event.field === _this.props.expandField || _this.props.group && event.field === undefined) {\n        var expandChange = _this.props.onExpandChange;\n\n        if (expandChange) {\n          expandChange.call(undefined, __assign({}, _this.getArguments(event.syntheticEvent), {\n            dataItem: event.dataItem,\n            dataIndex: event.dataIndex,\n            value: event.value\n          }));\n        }\n\n        return;\n      }\n\n      if (itemChange) {\n        itemChange.call(undefined, __assign({}, _this.getArguments(event.syntheticEvent), {\n          dataItem: event.dataItem,\n          field: event.field,\n          value: event.value\n        }));\n      }\n    };\n\n    _this.onHeaderSelectionChange = function (event) {\n      if (_this.props.onHeaderSelectionChange) {\n        _this.props.onHeaderSelectionChange.call(undefined, {\n          field: event.field,\n          nativeEvent: event.syntheticEvent && event.syntheticEvent.nativeEvent,\n          syntheticEvent: event.syntheticEvent,\n          target: _this,\n          dataItems: _this.getLeafDataItems(),\n          selectedField: _this.props.selectedField\n        });\n      }\n    };\n\n    _this.selectionRelease = function (event) {\n      if (_this.props.onSelectionChange) {\n        var selectionEvent = __assign({\n          syntheticEvent: undefined,\n          target: _this,\n          selectedField: _this.props.selectedField || '',\n          componentId: _this._gridId,\n          dataItems: _this.getLeafDataItems(),\n          dataItem: null\n        }, event);\n\n        _this.props.onSelectionChange.call(undefined, selectionEvent);\n      }\n    };\n\n    _this.pageChange = function (page, syntheticEvent) {\n      _this.raiseDataEvent(_this.props.onPageChange, {\n        page: page\n      }, {\n        skip: page.skip,\n        take: page.take\n      }, syntheticEvent);\n    };\n\n    _this.pagerPageChange = function (event) {\n      _this.pageChange({\n        skip: event.skip,\n        take: event.take\n      }, event.syntheticEvent);\n    };\n\n    _this.sortChange = function (sort, syntheticEvent) {\n      _this.raiseDataEvent(_this.props.onSortChange, {\n        sort: sort\n      }, {\n        sort: sort\n      }, syntheticEvent);\n    };\n\n    _this.filterChange = function (filter, syntheticEvent) {\n      _this.raiseDataEvent(_this.props.onFilterChange, {\n        filter: filter\n      }, {\n        filter: filter,\n        skip: 0\n      }, syntheticEvent);\n    };\n\n    _this.groupChange = function (groups, event) {\n      var syntheticEvent = event.nativeEvent ? event : {\n        nativeEvent: event.nativeEvent || event.originalEvent\n      };\n\n      _this.raiseDataEvent(_this.props.onGroupChange, {\n        group: groups\n      }, {\n        group: groups,\n        skip: 0\n      }, syntheticEvent);\n    };\n\n    _this.resolveTitle = function (field) {\n      var column = _this._columns.find(function (c) {\n        return c.field === field;\n      });\n\n      var title = column && (column.title || column.field);\n      return title === undefined ? field : title;\n    };\n\n    _this.getLeafDataItems = function () {\n      return _this._data.filter(function (item) {\n        return item.rowType === 'data';\n      }).map(function (item) {\n        return item.dataItem;\n      });\n    };\n\n    validatePackage(packageMetadata);\n    var groupable = _this.props.groupable === true || typeof _this.props.groupable === 'object' && _this.props.groupable.enabled !== false;\n    _this.vs = new VirtualScroll(groupable || props.rowHeight === undefined || props.rowHeight === 0);\n    _this.dragLogic = new CommonDragLogic(_this.columnReorder.bind(_this), _this.groupReorder.bind(_this), _this.columnToGroup.bind(_this));\n    _this.columnResize = new ColumnResize(_this.onResize.bind(_this));\n    tableKeyboardNavigation.onConstructor({\n      navigatable: Boolean(props.navigatable),\n      contextStateRef: _this.contextStateRef,\n      navigationStateRef: _this.navigationStateRef,\n      idPrefix: _this._gridId\n    });\n    return _this;\n  }\n\n  Object.defineProperty(Grid.prototype, \"columns\", {\n    /* eslint-disable max-len */\n\n    /**\n     * A getter of the current columns. Gets the current column width or current columns, or any other [`GridColumnProps`]({% slug api_grid_gridcolumnprops %}) for each defined column. Can be used on each Grid instance. To obtain the instance of the rendered Grid, use the `ref` callback. The following example demonstrates how to reorder the columns by dragging their handlers and check the properties afterwards. You can check the result in the browser console.\n     *\n     * @example\n     * ```jsx\n     * class App extends React.Component {\n     *     constructor(props) {\n     *         super(props);\n     *         this.state = {\n     *             data: [\n     *                 { 'foo': 'A1', 'bar': 'B1' },\n     *                 { 'foo': 'A2', 'bar': 'B2' },\n     *                 { 'foo': 'A3', 'bar': 'B2' }\n     *             ]\n     *         };\n     *         this.grid = null;\n     *     }\n     *     render() {\n     *         return (\n     *             <div>\n     *                 <Grid\n     *                     data={this.state.data}\n     *                     reorderable={true}\n     *                     ref={(g) => { this.grid = g; }}\n     *                 >\n     *                     <GridColumn field=\"foo\" />\n     *                     <GridColumn field=\"bar\" />\n     *                 </Grid>\n     *                 <button onClick={() => console.log(JSON.stringify(this.grid.columns))}>\n     *                     log current properties into browser console.\n     *                 </button>\n     *             </div>\n     *         );\n     *     }\n     * }\n     * ReactDOM.render(<App />, document.querySelector('my-app'));\n     * ```\n     */\n    // tslint:enable:max-line-length\n    get: function get() {\n      var shuffledColumns = this._columns.filter(function (q) {\n        return q.declarationIndex >= 0 && q.parentIndex === -1;\n      });\n\n      var sanitize = function sanitize(columns) {\n        columns.sort(function (a, b) {\n          return a.declarationIndex - b.declarationIndex;\n        });\n        return columns.map(function (column) {\n          var declarationIndex = column.declarationIndex,\n              parentIndex = column.parentIndex,\n              depth = column.depth,\n              colSpan = column.colSpan,\n              rowSpan = column.rowSpan,\n              index = column.index,\n              kFirst = column.kFirst,\n              children = column.children,\n              props = __rest(column, [\"declarationIndex\", \"parentIndex\", \"depth\", \"colSpan\", \"rowSpan\", \"index\", \"kFirst\", \"children\"]);\n\n          return children.length ? __assign({\n            children: sanitize(children)\n          }, props) : props;\n        });\n      };\n\n      return sanitize(shuffledColumns);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\n   * @hidden\n   */\n\n  Grid.prototype.componentDidMount = function () {\n    var rtl = isRtl(this.element);\n    this.isRtl = rtl;\n    tableKeyboardNavigation.onComponentDidMount({\n      scope: this.element || undefined,\n      contextStateRef: this.contextStateRef,\n      navigationStateRef: this.navigationStateRef\n    });\n\n    if (this.isRtl) {\n      this.forceUpdate();\n    }\n  };\n  /**\n   * @hidden\n   */\n\n\n  Grid.prototype.getSnapshotBeforeUpdate = function () {\n    tableKeyboardNavigation.onGetSnapshotBeforeUpdate({\n      document: document,\n      contextStateRef: this.contextStateRef,\n      navigationStateRef: this.navigationStateRef\n    });\n    return null;\n  };\n  /**\n   * @hidden\n   */\n\n\n  Grid.prototype.componentDidUpdate = function () {\n    tableKeyboardNavigation.onComponentDidUpdate({\n      scope: this.element || undefined,\n      contextStateRef: this.contextStateRef,\n      navigationStateRef: this.navigationStateRef\n    });\n  };\n  /**\n   * @hidden\n   */\n\n\n  Grid.prototype.componentWillUnmount = function () {\n    clearTimeout(this.forceUpdateTimeout);\n    this.columnResize.columns = [];\n    this.dragLogic.columns = [];\n    this._columns = [];\n  };\n  /**\n   * @hidden\n   */\n\n\n  Grid.prototype.render = function () {\n    var _this = this;\n\n    var total = this.props.total || 0;\n    var idPrefix = navigationTools.getIdPrefix(this.navigationStateRef);\n    var propsData = [];\n\n    if (Array.isArray(this.props.data)) {\n      propsData = this.props.data;\n      total = total || this.props.data.length;\n    } else if (this.props.data) {\n      propsData = this.props.data.data;\n      total = total || this.props.data.total;\n    }\n\n    var groupable = this.props.groupable === true || typeof this.props.groupable === 'object' && this.props.groupable.enabled !== false;\n    this.columnResize.resizable = this.props.resizable || false;\n    this.dragLogic.reorderable = this.props.reorderable || false;\n    this.dragLogic.groupable = groupable;\n    var tableUserSelect = this.props.selectable && this.props.selectable.drag ? 'none' : undefined;\n\n    if (total !== this.vs.total) {\n      this.vs.reset();\n      this.vs = new VirtualScroll(groupable || this.props.rowHeight === undefined || this.props.rowHeight === 0);\n    }\n\n    this.vs.fixedScroll = this.props.fixedScroll || false;\n    this.vs.PageChange = this.pageChange;\n    this.vs.realSkip = this.props.skip || 0;\n    this.vs.pageSize = (this.props.take !== undefined ? this.props.take : this.props.pageSize) || 0;\n    this.vs.scrollableVirtual = this.props.scrollable === 'virtual';\n    this.vs.total = total;\n    this.vs.propsSkip = (this.props.skip || 0) + (this.props.scrollable === 'virtual' ? this.vs.topCacheCount + (this.vs.attendedSkip - (this.props.skip || 0)) : 0);\n\n    if (this.props.rowHeight !== undefined && this.props.rowHeight > 0 && !groupable) {\n      this.vs.containerHeight = Math.min(1533915, this.props.rowHeight * (total || 0));\n    } else {\n      this.vs.containerHeight = 1533915;\n    }\n\n    var groupingFooter = typeof this.props.groupable === 'object' && this.props.groupable.footer || 'none';\n    this._data = [];\n    var resolvedGroupsCount = flatData(this._data, propsData, groupingFooter, {\n      index: this.props.skip || 0\n    }, this.props.group !== undefined, this.props.expandField);\n    var children = React.Children.toArray(this.props.children);\n    this.initColumns(children.filter(function (child) {\n      return child && child.type.displayName === 'KendoReactGridColumn';\n    }), resolvedGroupsCount);\n    var toolbar = children.filter(function (child) {\n      return child && child.type.displayName === 'KendoReactGridToolbar';\n    });\n    var noRecords = children.filter(function (child) {\n      return child && child.type.displayName === 'KendoReactGridNoRecords';\n    });\n\n    var columnsWithColGroup = this._columns.filter(function (c) {\n      return c.children.length === 0;\n    });\n\n    var groupingPanel = groupable && React.createElement(GroupPanel, {\n      group: this.props.group || [],\n      groupChange: this.groupChange,\n      pressHandler: this.dragLogic.pressHandler,\n      dragHandler: this.dragLogic.dragHandler,\n      releaseHandler: this.dragLogic.releaseHandler,\n      refCallback: this.dragLogic.refGroupPanelDiv,\n      resolveTitle: this.resolveTitle\n    });\n    var clues = (this.dragLogic.reorderable || this.dragLogic.groupable) && document && document.body && [ReactDOM.createPortal(React.createElement(DropClue, {\n      ref: this.dragLogic.refDropElementClue\n    }), document.body), ReactDOM.createPortal(React.createElement(DragClue, {\n      ref: this.dragLogic.refDragElementClue\n    }), document.body)];\n    var header = React.createElement(Header, {\n      columnResize: this.columnResize,\n      staticHeaders: this.props.scrollable !== 'none',\n      scrollableDataElement: function scrollableDataElement() {\n        return _this.vs.container;\n      },\n      draggable: this.props.reorderable || groupable,\n      ref: function ref(h) {\n        _this._header = h;\n      },\n      headerRow: React.createElement(HeaderRow, {\n        sort: this.props.sort,\n        sortable: this.props.sortable,\n        sortChange: this.sortChange,\n        filter: this.props.filter,\n        filterable: this.props.filterable,\n        filterOperators: this.props.filterOperators || operators,\n        filterChange: this.filterChange,\n        columnMenu: this.props.columnMenu,\n        selectionChange: this.onHeaderSelectionChange,\n        columns: this._columns,\n        columnResize: this.columnResize,\n        pressHandler: this.dragLogic.pressHandler,\n        dragHandler: this.dragLogic.dragHandler,\n        releaseHandler: this.dragLogic.releaseHandler,\n        columnsMap: this._columnsMap,\n        cellRender: this.props.headerCellRender,\n        isRtl: this.isRtl\n      }),\n      filterRow: this.props.filterable && React.createElement(FilterRow, {\n        columns: this._columns,\n        filter: this.props.filter,\n        filterOperators: this.props.filterOperators || operators,\n        filterChange: this.filterChange,\n        sort: this.props.sort,\n        cellRender: this.props.filterCellRender,\n        isRtl: this.isRtl,\n        ariaRowIndex: this._columnsMap.length + 1\n      }) || undefined,\n      cols: columnsWithColGroup.map(function (column, index) {\n        return React.createElement(\"col\", {\n          key: index.toString(),\n          width: column.width !== undefined ? Math.floor(parseFloat(column.width.toString())) + 'px' : undefined\n        });\n      })\n    });\n    var scrollLeft = this.vs && this.vs.container && this.vs.container.scrollLeft || 0;\n    var tableWidth = parseFloat(((this.props.style || {}).width || '').toString());\n\n    var _a = tableColumnsVirtualization({\n      enabled: this.props.columnVirtualization,\n      columns: this._columns,\n      tableViewPortWidth: tableWidth,\n      scrollLeft: scrollLeft\n    }),\n        colSpans = _a.colSpans,\n        isColHidden = _a.hiddenColumns;\n\n    var dataRow = function dataRow(item, rowId, rowDataIndex) {\n      var isInEdit = false;\n      var selectedValue = _this.props.selectedField ? getNestedValue(_this.props.selectedField, item.dataItem) : undefined;\n      return {\n        row: _this._columns.map(function (column, columnIndex) {\n          if (isColHidden[columnIndex]) {\n            return null;\n          }\n\n          var className = \"\" + (column.className ? column.className + ' ' : '') + (\"\" + (column.locked ? 'k-grid-content-sticky' : ''));\n          var style = column.left !== undefined ? !_this.isRtl ? {\n            left: column.left,\n            right: column.right\n          } : {\n            left: column.right,\n            right: column.left\n          } : {};\n          var cellProps = {\n            id: navigationTools.generateNavigatableId(rowId + \"-\" + String(columnIndex), idPrefix),\n            colSpan: colSpans[columnIndex],\n            dataItem: item.dataItem,\n            field: column.field,\n            editor: column.editor,\n            format: column.format,\n            className: className,\n            render: _this.props.cellRender,\n            onChange: _this.itemChange,\n            selectionChange: _this.props.onSelectionChange ? function (e) {\n              _this.selectionChange({\n                event: e,\n                dataItem: item.dataItem,\n                dataIndex: rowDataIndex,\n                columnIndex: columnIndex\n              });\n            } : undefined,\n            columnIndex: columnIndex,\n            columnsCount: columnsWithColGroup.length,\n            rowType: item.rowType,\n            level: item.level,\n            expanded: item.expanded,\n            dataIndex: item.dataIndex,\n            style: style,\n            ariaColumnIndex: column.ariaColumnIndex,\n            isSelected: Array.isArray(selectedValue) && selectedValue.indexOf(columnIndex) > -1\n          };\n          var currentColumnIsInEdit = false;\n\n          if (column.editable && _this.props.editField) {\n            var inEdit = getNestedValue(_this.props.editField, item.dataItem);\n\n            if (inEdit === true || inEdit === column.field) {\n              isInEdit = true;\n              currentColumnIsInEdit = true;\n            }\n          }\n\n          if (column.cell) {\n            return React.createElement(column.cell, __assign({\n              key: columnIndex\n            }, cellProps));\n          }\n\n          return currentColumnIsInEdit ? React.createElement(GridEditCell, __assign({\n            key: columnIndex\n          }, cellProps)) : React.createElement(GridCell, __assign({\n            key: columnIndex\n          }, cellProps));\n        }),\n        isInEdit: isInEdit,\n        isSelected: typeof selectedValue === 'boolean' && selectedValue\n      };\n    };\n\n    var hiddenRows = 0;\n\n    if (this.props.scrollable === 'virtual') {\n      for (var i = 0; i < this.vs.topCacheCount + this.vs.attendedSkip - (this.props.skip || 0); i++) {\n        var item = this._data.shift();\n\n        if (item) {\n          this._data.push(item);\n\n          hiddenRows++;\n\n          if (item.rowType === 'groupHeader') {\n            i--;\n          }\n        } else {\n          break;\n        }\n      }\n    }\n\n    var hidden = function hidden(index) {\n      return index >= _this._data.length - hiddenRows;\n    };\n\n    var absoluteDataIndex = this.vs.propsSkip || 0;\n    var body = [];\n    var rowIndexStart = this._columnsMap.length + (this.props.filterable ? 1 : 0) + 1;\n    var currentAriaRowIndex;\n\n    if (this._data.length) {\n      var dataIndex_1 = -1;\n      var detailRowCount_1 = 0;\n\n      this._data.forEach(function (item, rowIndex) {\n        if (item.rowType === 'data') {\n          absoluteDataIndex++;\n          dataIndex_1++;\n        }\n\n        var isAlt = absoluteDataIndex % 2 === 0;\n        var dataItemKey = _this.props.dataItemKey && getter(_this.props.dataItemKey)(item.dataItem);\n        var absoluteIndex = rowIndex + (_this.vs.propsSkip || 0);\n        var rowId = dataItemKey ? dataItemKey : 'ai' + absoluteIndex;\n        var detailRowId = rowId + '_1';\n        var gridRow = dataRow(item, rowId, dataIndex_1);\n        currentAriaRowIndex = absoluteIndex + rowIndexStart + detailRowCount_1;\n        body.push(React.createElement(GridRow, {\n          key: rowId,\n          dataItem: item.dataItem,\n          isAltRow: isAlt,\n          isInEdit: gridRow.isInEdit,\n          rowType: item.rowType,\n          isHidden: hidden(rowIndex),\n          onClick: function onClick(e) {\n            return _this.rowClick(e, item);\n          },\n          onDoubleClick: function onDoubleClick(e) {\n            return _this.rowDblClick(e, item);\n          },\n          selectedField: _this.props.selectedField,\n          rowHeight: _this.props.rowHeight,\n          render: _this.props.rowRender,\n          ariaRowIndex: currentAriaRowIndex,\n          dataIndex: dataIndex_1,\n          isSelected: gridRow.isSelected\n        }, gridRow.row));\n\n        if (_this.props.detail && item.rowType === 'data' && item.expanded) {\n          var detailColspan = columnsWithColGroup.length - (_this.props.expandField ? 1 : 0) - (_this.props.group ? _this.props.group.length : 0) || 1;\n          detailRowCount_1++;\n          currentAriaRowIndex = absoluteIndex + rowIndexStart + detailRowCount_1;\n          body.push(React.createElement(\"tr\", {\n            key: detailRowId,\n            className: isAlt ? 'k-detail-row k-alt' : 'k-detail-row',\n            style: {\n              visibility: hidden(rowIndex) ? 'hidden' : ''\n            },\n            role: \"row\",\n            \"aria-rowindex\": currentAriaRowIndex\n          }, _this.props.group && _this.props.group.map(function (group, idx) {\n            return React.createElement(GridGroupCell, {\n              id: '',\n              dataIndex: item.dataIndex,\n              field: group.field,\n              dataItem: item.dataItem,\n              key: idx,\n              style: {},\n              ariaColumnIndex: 1 + idx,\n              isSelected: false\n            });\n          }), _this.props.expandField && React.createElement(GridDetailHierarchyCell, {\n            id: navigationTools.generateNavigatableId(detailRowId + \"-dhcell\", idPrefix)\n          }), React.createElement(GridDetailCell, {\n            dataItem: item.dataItem,\n            dataIndex: item.dataIndex,\n            colSpan: detailColspan,\n            ariaColIndex: 2 + (_this.props.group ? _this.props.group.length : 0),\n            detail: _this.props.detail,\n            id: navigationTools.generateNavigatableId(detailRowId + \"-dcell\", idPrefix)\n          })));\n        }\n      });\n    } else {\n      body.push(React.createElement(\"tr\", {\n        key: \"no-records\",\n        className: \"k-grid-norecords\",\n        \"aria-rowindex\": rowIndexStart\n      }, React.createElement(\"td\", {\n        colSpan: columnsWithColGroup.length\n      }, noRecords.length ? noRecords : React.createElement(GridNoRecords, null))));\n    }\n\n    var pagerProps = __assign({\n      className: 'k-grid-pager',\n      onPageChange: this.pagerPageChange,\n      total: total,\n      skip: this.vs.propsSkip || 0,\n      take: (this.props.take !== undefined ? this.props.take : this.props.pageSize) || 10,\n      messagesMap: pagerMessagesMap\n    }, normalize(this.props.pageable || {}));\n\n    var pager = this.props.pager ? React.createElement(this.props.pager, __assign({}, pagerProps)) : React.createElement(Pager, __assign({}, pagerProps));\n\n    var sorted = function sorted(field) {\n      return _this.props.sort && _this.props.sort.filter(function (descriptor) {\n        return descriptor.field === field;\n      }).length > 0;\n    };\n\n    var footer = this._columns.some(function (c) {\n      return Boolean(c.footerCell);\n    }) ? React.createElement(Footer, {\n      columnResize: this.columnResize,\n      staticHeaders: this.props.scrollable !== 'none',\n      ref: function ref(f) {\n        return _this._footer = f;\n      },\n      row: React.createElement(FooterRow, {\n        columns: this._columns,\n        isRtl: this.isRtl,\n        ariaRowIndex: currentAriaRowIndex + 1\n      }),\n      cols: columnsWithColGroup.map(function (column, index) {\n        return React.createElement(\"col\", {\n          key: index.toString(),\n          width: column.width !== undefined ? Math.floor(parseFloat(column.width.toString())) + 'px' : undefined\n        });\n      })\n    }) : null;\n    var colGroups = React.createElement(\"colgroup\", {\n      ref: function ref(c) {\n        _this.columnResize.colGroupMain = c;\n      },\n      role: \"presentation\"\n    }, columnsWithColGroup.map(function (column, index) {\n      return React.createElement(\"col\", {\n        key: index.toString(),\n        className: sorted(column.field) ? 'k-sorted' : undefined,\n        width: column.width !== undefined ? Math.floor(parseFloat(column.width.toString())) + 'px' : undefined\n      });\n    }));\n\n    if (this.props.scrollable === 'none') {\n      return React.createElement(TableKeyboardNavigationContext.Provider, {\n        value: this.contextStateRef.current\n      }, React.createElement(\"div\", __assign({\n        style: this.props.style,\n        className: classNames('k-widget k-grid', this.props.className),\n        \"aria-colcount\": columnsWithColGroup.length,\n        \"aria-rowcount\": total,\n        ref: function ref(el) {\n          _this.element = el;\n        },\n        onKeyDown: this.onKeyDown,\n        onFocus: this.onFocus\n      }, tableKeyboardNavigationScopeAttributes), toolbar, groupingPanel, React.createElement(TableSelection, {\n        selectable: this.props.selectable,\n        onRelease: this.selectionRelease,\n        childRef: function childRef(table) {\n          _this.vs.table = table;\n\n          _this.resetTableWidth();\n        }\n      }, React.createElement(\"table\", {\n        style: {\n          userSelect: tableUserSelect\n        }\n      }, colGroups, header, React.createElement(\"tbody\", __assign({}, tableKeyboardNavigationBodyAttributes), body), footer)), this.props.pageable && pager, clues));\n    }\n\n    var wrapperStyle = this.props.style || {};\n\n    if (this.props.scrollable === 'virtual') {\n      // Set the default height for vs if not existing.\n      if (!wrapperStyle.height) {\n        wrapperStyle = Object.assign({}, wrapperStyle, {\n          height: '450px'\n        });\n      }\n    }\n\n    return React.createElement(TableKeyboardNavigationContext.Provider, {\n      value: this.contextStateRef.current\n    }, React.createElement(\"div\", __assign({\n      style: wrapperStyle,\n      className: classNames('k-widget k-grid', {\n        'k-grid-virtual': this.props.scrollable === 'virtual'\n      }, this.props.className),\n      ref: function ref(el) {\n        _this.element = el;\n\n        _this.resetTableWidth();\n      },\n      role: \"grid\",\n      \"aria-colcount\": columnsWithColGroup.length,\n      \"aria-rowcount\": total,\n      onKeyDown: this.onKeyDown,\n      onFocus: this.onFocus\n    }, tableKeyboardNavigationScopeAttributes), toolbar, groupingPanel, header, React.createElement(\"div\", {\n      className: \"k-grid-container\",\n      role: \"presentation\"\n    }, React.createElement(\"div\", {\n      ref: function ref(container) {\n        _this.vs.container = container;\n      },\n      className: \"k-grid-content k-virtual-content\",\n      onScroll: this.scrollHandler,\n      role: \"presentation\"\n    }, React.createElement(\"div\", {\n      style: {\n        'position': 'relative'\n      },\n      role: \"presentation\"\n    }, React.createElement(TableSelection, {\n      selectable: this.props.selectable,\n      onRelease: this.selectionRelease,\n      childRef: function childRef(table) {\n        _this.vs.table = table;\n      }\n    }, React.createElement(\"table\", {\n      className: 'k-grid-table',\n      role: \"presentation\",\n      style: {\n        userSelect: tableUserSelect\n      }\n    }, colGroups, React.createElement(\"tbody\", __assign({\n      ref: function ref(tableBody) {\n        _this.vs.tableBody = tableBody;\n      },\n      role: \"presentation\"\n    }, tableKeyboardNavigationBodyAttributes), body)))), React.createElement(\"div\", {\n      className: \"k-height-container\",\n      role: \"presentation\"\n    }, React.createElement(\"div\", {\n      style: this.props.scrollable === 'virtual' ? {\n        'height': this.vs.containerHeight + 'px'\n      } : {}\n    })))), footer, this.props.pageable && pager, clues));\n  };\n\n  Grid.prototype.selectionChange = function (options) {\n    if (this.props.onSelectionChange) {\n      var event_1 = options.event,\n          dataItem = options.dataItem,\n          dataIndex = options.dataIndex,\n          columnIndex = options.columnIndex;\n\n      var _a = getSelectionOptions(this.props.selectable),\n          mode = _a.mode,\n          cell = _a.cell;\n\n      var selectionEvent = __assign({}, this.getArguments(event_1.syntheticEvent), {\n        dataItem: dataItem,\n        startColIndex: columnIndex,\n        endColIndex: columnIndex,\n        startRowIndex: dataIndex,\n        endRowIndex: dataIndex,\n        dataItems: this.getLeafDataItems(),\n        altKey: false,\n        ctrlKey: false,\n        shiftKey: false,\n        metaKey: false,\n        mode: mode,\n        cell: cell,\n        isDrag: false,\n        componentId: this._gridId,\n        selectedField: this.props.selectedField || ''\n      });\n\n      this.props.onSelectionChange.call(undefined, selectionEvent);\n    }\n  };\n\n  Grid.prototype.raiseDataEvent = function (handler, data, moreData, syntheticEvent) {\n    var dataStateChange = this.props.onDataStateChange;\n\n    if (handler) {\n      handler.call(undefined, __assign({}, this.getArguments(syntheticEvent), data));\n    } else if (dataStateChange) {\n      dataStateChange.call(undefined, __assign({}, this.getArguments(syntheticEvent), {\n        dataState: __assign({}, this.getDataState(), moreData)\n      }));\n    }\n  };\n\n  Grid.prototype.columnReorder = function (prev, next, nativeEvent) {\n    var _this = this;\n\n    var _a;\n\n    var depth = this._columns[prev].depth;\n\n    var end = function end(index) {\n      do {\n        index++;\n      } while (index < _this._columns.length && _this._columns[index].depth > depth);\n\n      return index;\n    };\n\n    var spliced = this._columns.splice(prev, end(prev) - prev);\n\n    (_a = this._columns).splice.apply(_a, [prev < next ? end(next - spliced.length) : next, 0].concat(spliced));\n\n    this._columns.filter(function (q) {\n      return q.declarationIndex >= 0;\n    }).forEach(function (c, i) {\n      return c.orderIndex = i;\n    });\n\n    var eventColumnProps = this.columns;\n    this.forceUpdate();\n\n    if (this.props.onColumnReorder) {\n      this.props.onColumnReorder.call(undefined, {\n        target: this,\n        columns: eventColumnProps,\n        nativeEvent: nativeEvent\n      });\n    }\n  };\n\n  Grid.prototype.groupReorder = function (prevIndex, nextIndex, nativeEvent) {\n    if (this.props.group === undefined) {\n      return;\n    }\n\n    var group = this.props.group.slice();\n    group.splice.apply(group, [nextIndex, 0].concat(group.splice(prevIndex, 1)));\n    this.groupChange(group, nativeEvent);\n  };\n\n  Grid.prototype.columnToGroup = function (columnIndex, groupIndex, nativeEvent) {\n    var field = this._columns[columnIndex].field;\n\n    if (!field) {\n      return;\n    }\n\n    var group = (this.props.group || []).slice();\n    group.splice(groupIndex, 0, {\n      field: field\n    });\n    this.groupChange(group, nativeEvent);\n  };\n\n  Grid.prototype.resetTableWidth = function () {\n    var totalWidth = 0;\n\n    if (!this.columnResize.colGroupMain) {\n      return;\n    }\n\n    var colElements = this.columnResize.colGroupMain.children;\n\n    for (var i = 0; i < colElements.length; i++) {\n      var width = colElements[i].width;\n\n      if (!width) {\n        return;\n      }\n\n      totalWidth += parseFloat(width.toString());\n    }\n\n    totalWidth = Math.round(totalWidth);\n\n    if (this._header) {\n      this._header.setWidth(totalWidth);\n    }\n\n    if (this._footer) {\n      this._footer.setWidth(totalWidth);\n    }\n\n    if (this.vs.table) {\n      this.vs.table.style.width = totalWidth + 'px';\n    }\n  };\n\n  Grid.prototype.onResize = function (index, newWidth, oldWidth, nativeEvent, end) {\n    this.resetTableWidth();\n\n    if (this.props.onColumnResize) {\n      this.props.onColumnResize.call(undefined, {\n        columns: this.columns,\n        index: index,\n        nativeEvent: nativeEvent,\n        newWidth: newWidth,\n        oldWidth: oldWidth,\n        end: end,\n        target: this\n      });\n    }\n  };\n\n  Grid.prototype.initColumns = function (columnElements, groupCount) {\n    var _this = this;\n\n    var idPrefix = navigationTools.getIdPrefix(this.navigationStateRef);\n    this._columns = readColumns(columnElements, this.columns, {\n      prevId: 0,\n      idPrefix: idPrefix\n    });\n\n    if (this._columns.length === 0) {\n      this._columns = autoGenerateColumns(this.props.data, this.props.group, this.props.expandField, {\n        prevId: 0,\n        idPrefix: idPrefix\n      });\n    }\n\n    if (this.props.selectedField) {\n      this._columns.filter(function (c) {\n        return c.field === _this.props.selectedField;\n      }).forEach(function (c) {\n        c.width = c.width || '50px';\n        c.cell = c.cell || GridSelectionCell;\n        c.headerCell = c.headerCell || GridHeaderSelectionCell;\n      });\n    }\n\n    var defaultServiceProps = {\n      id: '',\n      resizable: true,\n      width: '32px',\n      title: ' ',\n      declarationIndex: -1,\n      orderIndex: -1,\n      children: [],\n      parentIndex: -1,\n      depth: 0,\n      colSpan: 0,\n      rowSpan: 0,\n      left: 0,\n      right: 0,\n      index: 0,\n      rightBorder: false,\n      ariaColumnIndex: 0,\n      isAccessible: true\n    };\n    var columnIndexOffset = 0;\n\n    if (this.props.expandField && this.props.onExpandChange && this.props.detail) {\n      this._columns.unshift(__assign({}, defaultServiceProps, {\n        cell: GridHierarchyCell,\n        field: this.props.expandField,\n        headerClassName: 'k-hierarchy-cell k-header',\n        id: navigationTools.generateNavigatableId(\"\" + this._columns.length, idPrefix, 'column')\n      }));\n\n      columnIndexOffset++;\n    }\n\n    for (var i = 0; i < groupCount; i++) {\n      this._columns.unshift(__assign({}, defaultServiceProps, {\n        isAccessible: false,\n        cell: GridGroupCell,\n        field: 'value'\n      }));\n\n      columnIndexOffset++;\n    }\n\n    this._columns.slice(columnIndexOffset).forEach(function (c) {\n      return c.parentIndex >= 0 && (c.parentIndex += columnIndexOffset);\n    });\n\n    this._columnsMap = mapColumns(this._columns);\n    this.columnResize.columns = this._columns;\n    this.dragLogic.columns = this._columns;\n  };\n\n  Grid.prototype.getDataState = function () {\n    return {\n      filter: this.props.filter,\n      sort: this.props.sort,\n      skip: this.props.skip,\n      take: this.props.take !== undefined ? this.props.take : this.props.pageSize,\n      group: this.props.group\n    };\n  };\n\n  Grid.prototype.getArguments = function (syntheticEvent) {\n    return {\n      nativeEvent: syntheticEvent && syntheticEvent.nativeEvent,\n      syntheticEvent: syntheticEvent,\n      target: this\n    };\n  };\n  /**\n   * @hidden\n   */\n\n\n  Grid.displayName = 'KendoReactGrid';\n  /**\n   * @hidden\n   */\n\n  Grid.defaultProps = {// never use this\n  };\n  /**\n   * @hidden\n   */\n\n  Grid.propTypes = {\n    data: PropTypes.oneOfType([PropTypes.array, PropTypes.shape({\n      data: PropTypes.array,\n      total: PropTypes.number\n    })]),\n    sortable: PropTypes.oneOfType([PropTypes.bool, PropTypes.shape({\n      mode: PropTypes.oneOf(['single', 'multiple']),\n      allowUnsort: PropTypes.bool\n    })]),\n    onSortChange: PropTypes.func,\n    sort: PropTypes.array,\n    filterable: PropTypes.bool,\n    filter: PropTypes.any,\n    onFilterChange: PropTypes.func,\n    pageable: PropTypes.oneOfType([PropTypes.bool, PropTypes.shape({\n      buttonCount: PropTypes.number,\n      info: PropTypes.bool,\n      type: PropTypes.oneOf(['numeric', 'input']),\n      pageSizes: PropTypes.oneOfType([PropTypes.bool, PropTypes.arrayOf(PropTypes.number)]),\n      previousNext: PropTypes.bool\n    })]),\n    pageSize: PropTypes.number,\n    onPageChange: PropTypes.func,\n    total: PropTypes.number,\n    skip: PropTypes.number,\n    take: PropTypes.number,\n    fixedScroll: PropTypes.bool,\n    onExpandChange: PropTypes.func,\n    expandField: PropTypes.string,\n    selectedField: PropTypes.string,\n    onSelectionChange: PropTypes.func,\n    onHeaderSelectionChange: PropTypes.func,\n    resizable: PropTypes.bool,\n    reorderable: PropTypes.bool,\n    group: PropTypes.any,\n    groupable: PropTypes.oneOfType([PropTypes.bool, PropTypes.shape({\n      enabled: PropTypes.bool,\n      footer: PropTypes.oneOf(['always', 'visible', 'none'])\n    })]),\n    onGroupChange: PropTypes.func,\n    onRowClick: PropTypes.func,\n    onRowDoubleClick: PropTypes.func,\n    onItemChange: PropTypes.func,\n    editField: PropTypes.string,\n    scrollable: PropTypes.oneOf(['none', 'scrollable', 'virtual']),\n    rowHeight: PropTypes.number,\n    detail: PropTypes.any,\n    style: PropTypes.object,\n    onDataStateChange: PropTypes.func,\n    onColumnResize: PropTypes.func,\n    onColumnReorder: PropTypes.func,\n    dataItemKey: PropTypes.string,\n    navigatable: PropTypes.bool\n  };\n  /** @hidden */\n\n  Grid.contextType = TableKeyboardNavigationContext;\n  return Grid;\n}(React.Component);\n\nexport { Grid };","map":{"version":3,"sources":["../../src/Grid.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,KAAK,KAAZ,MAAuB,OAAvB;AACA,OAAO,KAAK,QAAZ,MAA0B,WAA1B;AACA,OAAO,KAAK,SAAZ,MAA2B,YAA3B;AACA,SAAS,aAAT,EAAwB,UAAxB,EAAoC,MAApC,EAA4C,IAA5C,QAAwD,8BAAxD;AACA,SACI,0BADJ,EAEI,KAFJ,EAII,UAJJ,EAKI,KALJ,EAMI,uBANJ,EAOI,8BAPJ,EAUI,sCAVJ,EAWI,4BAA4B,IAAI,eAXpC,EAYI,qCAZJ,EAcI,mBAdJ,EAeI,cAfJ,QAgBO,kCAhBP;AAmBA,SAAS,iBAAT,QAAkC,2BAAlC;AACA,SAAS,iBAAT,QAAkC,2BAAlC;AACA,SAAS,YAAT,QAA6B,sBAA7B;AACA,SAAS,MAAT,QAAuB,iBAAvB;AACA,SAAS,SAAT,QAA0B,oBAA1B;AACA,SAAS,SAAT,QAA0B,oBAA1B;AACA,SAAS,UAAT,QAA2B,qBAA3B;AAEA,SAAS,MAAT,QAAuB,iBAAvB;AAKA,SAAS,aAAT,QAA8B,iBAA9B;AACA,SAAS,YAAT,QAA6B,qBAA7B;AACA,SAAS,eAAT,QAAgC,wBAAhC;AACA,SAAS,QAAT,QAAyB,iBAAzB;AACA,SAAS,QAAT,QAAyB,iBAAzB;AACA,SACI,cADJ,EACoB,QADpB,EAEI,WAFJ,EAGI,mBAHJ,QAIO,eAJP;AAoBA,SAAS,QAAT,QAAyB,kBAAzB;AACA,SAAS,aAAT,QAA8B,uBAA9B;AACA,SAAS,OAAT,QAAwB,gBAAxB;AAIA,SAAS,uBAAT,QAAwC,kCAAxC;AACA,SAAS,aAAT,QAA8B,iBAA9B;AACA,SAAS,SAAT,QAA0B,gBAA1B;AACA,SAAS,SAAT,QAA0B,oBAA1B;AACA,SAAS,SAAT,QAA0B,4BAA1B;AACA,SAAS,gBAAT,QAAiC,YAAjC;AAEA,SAAS,eAAT,QAAgC,2BAAhC;AACA,SAAS,eAAT,QAAgC,oBAAhC;AACA,SAAS,cAAT,QAA+B,wBAA/B;AACA,SAAS,uBAAT,QAAwC,iCAAxC;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BG;;AACH,IAAA,IAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA0B,EAAA,SAAA,CAAA,IAAA,EAAA,MAAA,CAAA;;AA2KtB,WAAA,IAAA,CAAY,KAAZ,EAA4B;AAA5B,QAAA,KAAA,GACI,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,KAAN,KAAY,IADhB;;AArFQ,IAAA,KAAA,CAAA,QAAA,GAAkC,EAAlC;AACA,IAAA,KAAA,CAAA,WAAA,GAA0B,CAAC,EAAD,CAA1B;AAEA,IAAA,KAAA,CAAA,eAAA,GAAoE;AAAE,MAAA,OAAO,EAAE;AAAX,KAApE;AACA,IAAA,KAAA,CAAA,kBAAA,GAAqE;AAAE,MAAA,OAAO,EAAE;AAAX,KAArE;AAwEA,IAAA,KAAA,CAAA,OAAA,GAAiC,IAAjC;AAGA,IAAA,KAAA,CAAA,OAAA,GAAyB,IAAzB;AACA,IAAA,KAAA,CAAA,OAAA,GAAyB,IAAzB;AACA,IAAA,KAAA,CAAA,kBAAA,GAA0B,SAA1B;AACA,IAAA,KAAA,CAAA,KAAA,GAAiB,KAAjB;AACA,IAAA,KAAA,CAAA,OAAA,GAAmB,IAAI,EAAvB;AAyBR;;;;AAIG;;AAEI,IAAA,KAAA,CAAA,cAAA,GAAiB,UAAC,OAAD,EAA8B;AAClD,UAAI,CAAC,KAAI,CAAC,EAAL,CAAQ,SAAT,IAAsB,KAAI,CAAC,KAAL,CAAW,UAAX,KAA0B,MAApD,EAA4D;AACxD;AACH;;AAEO,UAAA,QAAA,GAAA,OAAA,CAAA,QAAA;;AAER,UAAI,KAAI,CAAC,KAAL,CAAW,UAAX,KAA0B,SAA9B,EAAyC;AACrC,QAAA,KAAI,CAAC,EAAL,CAAQ,SAAR,GAAoB,QAApB;;AACA,QAAA,KAAI,CAAC,EAAL,CAAQ,SAAR,CAAkB,MAAlB,CAAyB,CAAzB,EAA4B,IAAI,CAAC,KAAL,CAAW,KAAI,CAAC,EAAL,CAAQ,SAAR,GAAoB,KAAI,CAAC,EAAL,CAAQ,KAA5B,GAAoC,KAAI,CAAC,EAAL,CAAQ,SAAR,CAAkB,YAAjE,CAA5B;AACH,OAHD,MAGO,IAAI,KAAI,CAAC,OAAT,EAAkB;AACrB,YAAM,WAAW,GAAG,QAAQ,GAAG,CAAX,GACd,KAAI,CAAC,OAAL,CAAa,aAAb,CAA2B,0BAAwB,CAAxB,GAAyB,GAApD,CADc,GAEd,KAAI,CAAC,OAAL,CAAa,aAAb,CAA2B,0BAAwB,QAAxB,GAAgC,GAA3D,CAFN;;AAGA,YAAI,WAAJ,EAAiB;AACb,UAAA,WAAW,CAAC,cAAZ,CAA2B,IAA3B;AACH;AACJ;AACJ,KAlBM;;AAujBC,IAAA,KAAA,CAAA,aAAA,GAAgB,UAAC,KAAD,EAA4C;AAChE,UAAI,KAAK,CAAC,MAAN,KAAiB,KAAK,CAAC,aAA3B,EAA0C;AACtC;AACH;;AACD,MAAA,YAAY,CAAC,KAAI,CAAC,kBAAN,CAAZ;;AACA,UAAI,KAAI,CAAC,KAAL,CAAW,oBAAX,IAAmC,CAAC,KAAI,CAAC,EAAL,CAAQ,iBAAhD,EAAmE;AAC/D,QAAA,KAAI,CAAC,kBAAL,GAA0B,MAAM,CAAC,UAAP,CAAkB,YAAA;AAAQ,UAAA,KAAI,CAAC,WAAL;AAAqB,SAA/C,EAAiD,CAAjD,CAA1B;AACH;;AACD,UAAI,KAAI,CAAC,OAAT,EAAkB;AACd,QAAA,KAAI,CAAC,OAAL,CAAa,aAAb,CAA2B,KAAK,CAAC,aAAN,CAAoB,UAA/C;AACH;;AAED,UAAI,KAAI,CAAC,OAAT,EAAkB;AACd,QAAA,KAAI,CAAC,OAAL,CAAa,aAAb,CAA2B,KAAK,CAAC,aAAN,CAAoB,UAA/C;AACH;;AAED,UAAI,KAAI,CAAC,EAAT,EAAa;AACT,QAAA,KAAI,CAAC,EAAL,CAAQ,aAAR,CAAsB,KAAtB;AACH;;AAED,MAAA,aAAa,CAAC,KAAI,CAAC,KAAL,CAAW,QAAZ,EAAsB,KAAtB,EAA6B,KAA7B,EAAmC,SAAnC,CAAb;AACH,KArBO;;AAuBA,IAAA,KAAA,CAAA,SAAA,GAAY,UAAC,KAAD,EAAwC;AACxD,MAAA,uBAAuB,CAAC,SAAxB,CAAkC,KAAlC,EAAyC;AACrC,QAAA,eAAe,EAAE,KAAI,CAAC,eADe;AAErC,QAAA,kBAAkB,EAAE,KAAI,CAAC,kBAFY;AAGrC,QAAA,kBAAkB,EAAE,KAAI,CAAC;AAHY,OAAzC;;AAMA,UAAI,KAAI,CAAC,KAAL,CAAW,SAAf,EAA0B;AAChB,YAAA,EAAA,GAAA,mBAAA,CAAA,KAAA,CAAA,KAAA,CAAA,UAAA,CAAA;AAAA,YAAC,IAAA,GAAA,EAAA,CAAA,IAAD;AAAA,YAAO,IAAA,GAAA,EAAA,CAAA,IAAP;;AAEN,QAAA,KAAI,CAAC,KAAL,CAAW,SAAX,CAAqB,IAArB,CACI,SADJ,EACa,QAAA,CAAA;AAEL,UAAA,SAAS,EAAE,KAAI,CAAC,gBAAL,EAFN;AAGL,UAAA,IAAI,EAAA,IAHC;AAIL,UAAA,IAAI,EAAA,IAJC;AAKL,UAAA,WAAW,EAAE,KAAI,CAAC,OALb;AAML,UAAA,aAAa,EAAE,KAAI,CAAC,KAAL,CAAW;AANrB,SAAA,EAOF,KAAI,CAAC,YAAL,CAAkB,KAAlB,CAPE,CADb;AAUH;AACJ,KArBO;;AAuBA,IAAA,KAAA,CAAA,OAAA,GAAU,UAAC,KAAD,EAAwC;AACtD,MAAA,uBAAuB,CAAC,OAAxB,CAAgC,KAAhC,EAAuC;AACnC,QAAA,eAAe,EAAE,KAAI,CAAC;AADa,OAAvC;AAGH,KAJO;;AAMA,IAAA,KAAA,CAAA,kBAAA,GAAqB,UAAC,OAAD,EAAsE;AAC/F,UAAI,KAAI,CAAC,KAAL,CAAW,kBAAf,EAAmC;AAC/B,QAAA,KAAI,CAAC,KAAL,CAAW,kBAAX,CAA8B,IAA9B,CACI,SADJ,EACa,QAAA,CAAA;AAEL,UAAA,YAAY,EAAE,OAAO,CAAC;AAFjB,SAAA,EAGF,KAAI,CAAC,YAAL,CAAkB,OAAO,CAAC,KAA1B,CAHE,CADb;AAMH;AACJ,KATO;;AAWA,IAAA,KAAA,CAAA,QAAA,GAAW,UAAC,CAAD,EAAI,IAAJ,EAAQ;AACvB,UAAI,KAAI,CAAC,KAAL,CAAW,UAAX,IAA0B,CAAC,CAAC,MAAF,CAAiB,QAAjB,KAA8B,IAA5D,EAAkE;AAC9D,QAAA,KAAI,CAAC,KAAL,CAAW,UAAX,CAAsB,IAAtB,CACI,SADJ,EACa,QAAA,CAAA;AAEL,UAAA,QAAQ,EAAE,IAAI,CAAC;AAFV,SAAA,EAGF,KAAI,CAAC,YAAL,CAAkB,CAAlB,CAHE,CADb;AAMH;AACJ,KATO;;AAWA,IAAA,KAAA,CAAA,WAAA,GAAc,UAAC,CAAD,EAAI,IAAJ,EAAQ;AAC1B,UAAI,KAAI,CAAC,KAAL,CAAW,gBAAX,IAAgC,CAAC,CAAC,MAAF,CAAiB,QAAjB,KAA8B,IAAlE,EAAwE;AACpE,QAAA,KAAI,CAAC,KAAL,CAAW,gBAAX,CAA4B,IAA5B,CACI,SADJ,EACa,QAAA,CAAA;AAEL,UAAA,QAAQ,EAAE,IAAI,CAAC;AAFV,SAAA,EAGF,KAAI,CAAC,YAAL,CAAkB,CAAlB,CAHE,CADb;AAMH;AACJ,KATO;;AAWA,IAAA,KAAA,CAAA,UAAA,GAAa,UAAC,KAAD,EAMpB;AAEG,UAAM,UAAU,GAAG,KAAI,CAAC,KAAL,CAAW,YAA9B;;AAEA,UAAI,KAAK,CAAC,KAAN,KAAgB,KAAI,CAAC,KAAL,CAAW,WAA3B,IAA0C,KAAI,CAAC,KAAL,CAAW,KAAX,IAAoB,KAAK,CAAC,KAAN,KAAgB,SAAlF,EAA6F;AACzF,YAAM,YAAY,GAAG,KAAI,CAAC,KAAL,CAAW,cAAhC;;AACA,YAAI,YAAJ,EAAkB;AACd,UAAA,YAAY,CAAC,IAAb,CACI,SADJ,EAEI,QAAA,CAAA,EAAA,EACO,KAAI,CAAC,YAAL,CAAkB,KAAK,CAAC,cAAxB,CADP,EAC8C;AAC1C,YAAA,QAAQ,EAAE,KAAK,CAAC,QAD0B;AAE1C,YAAA,SAAS,EAAE,KAAK,CAAC,SAFyB;AAG1C,YAAA,KAAK,EAAE,KAAK,CAAC;AAH6B,WAD9C,CAFJ;AASH;;AACD;AACH;;AAED,UAAI,UAAJ,EAAgB;AACZ,QAAA,UAAU,CAAC,IAAX,CACI,SADJ,EAEI,QAAA,CAAA,EAAA,EACO,KAAI,CAAC,YAAL,CAAkB,KAAK,CAAC,cAAxB,CADP,EAC8C;AAC1C,UAAA,QAAQ,EAAE,KAAK,CAAC,QAD0B;AAE1C,UAAA,KAAK,EAAE,KAAK,CAAC,KAF6B;AAG1C,UAAA,KAAK,EAAE,KAAK,CAAC;AAH6B,SAD9C,CAFJ;AASH;AACJ,KArCO;;AAmEA,IAAA,KAAA,CAAA,uBAAA,GAA0B,UAAC,KAAD,EAAM;AACpC,UAAI,KAAI,CAAC,KAAL,CAAW,uBAAf,EAAwC;AACpC,QAAA,KAAI,CAAC,KAAL,CAAW,uBAAX,CAAmC,IAAnC,CACI,SADJ,EAEI;AACI,UAAA,KAAK,EAAE,KAAK,CAAC,KADjB;AAEI,UAAA,WAAW,EAAE,KAAK,CAAC,cAAN,IAAwB,KAAK,CAAC,cAAN,CAAqB,WAF9D;AAGI,UAAA,cAAc,EAAE,KAAK,CAAC,cAH1B;AAII,UAAA,MAAM,EAAE,KAJZ;AAKI,UAAA,SAAS,EAAE,KAAI,CAAC,gBAAL,EALf;AAMI,UAAA,aAAa,EAAE,KAAI,CAAC,KAAL,CAAW;AAN9B,SAFJ;AAUH;AACJ,KAbO;;AAeA,IAAA,KAAA,CAAA,gBAAA,GAAmB,UAAC,KAAD,EAAqC;AAC5D,UAAI,KAAI,CAAC,KAAL,CAAW,iBAAf,EAAkC;AAC9B,YAAM,cAAc,GAAA,QAAA,CAAA;AAChB,UAAA,cAAc,EAAE,SADA;AAEhB,UAAA,MAAM,EAAE,KAFQ;AAGhB,UAAA,aAAa,EAAE,KAAI,CAAC,KAAL,CAAW,aAAX,IAA4B,EAH3B;AAIhB,UAAA,WAAW,EAAE,KAAI,CAAC,OAJF;AAKhB,UAAA,SAAS,EAAE,KAAI,CAAC,gBAAL,EALK;AAMhB,UAAA,QAAQ,EAAE;AANM,SAAA,EAOb,KAPa,CAApB;;AASA,QAAA,KAAI,CAAC,KAAL,CAAW,iBAAX,CAA6B,IAA7B,CAAkC,SAAlC,EAA6C,cAA7C;AACH;AACJ,KAbO;;AAeA,IAAA,KAAA,CAAA,UAAA,GAAa,UAAC,IAAD,EAAa,cAAb,EAAsD;AACvE,MAAA,KAAI,CAAC,cAAL,CACI,KAAI,CAAC,KAAL,CAAW,YADf,EAEI;AAAE,QAAA,IAAI,EAAA;AAAN,OAFJ,EAGI;AAAE,QAAA,IAAI,EAAE,IAAI,CAAC,IAAb;AAAmB,QAAA,IAAI,EAAE,IAAI,CAAC;AAA9B,OAHJ,EAII,cAJJ;AAMH,KAPO;;AASA,IAAA,KAAA,CAAA,eAAA,GAAkB,UAAC,KAAD,EAAuB;AAC7C,MAAA,KAAI,CAAC,UAAL,CAAgB;AAAE,QAAA,IAAI,EAAE,KAAK,CAAC,IAAd;AAAoB,QAAA,IAAI,EAAE,KAAK,CAAC;AAAhC,OAAhB,EAAwD,KAAK,CAAC,cAA9D;AACH,KAFO;;AAIA,IAAA,KAAA,CAAA,UAAA,GAAa,UAAC,IAAD,EAAyB,cAAzB,EAAkE;AACnF,MAAA,KAAI,CAAC,cAAL,CACI,KAAI,CAAC,KAAL,CAAW,YADf,EAEI;AAAE,QAAA,IAAI,EAAE;AAAR,OAFJ,EAGI;AAAE,QAAA,IAAI,EAAE;AAAR,OAHJ,EAII,cAJJ;AAMH,KAPO;;AASA,IAAA,KAAA,CAAA,YAAA,GAAe,UAAC,MAAD,EAAoC,cAApC,EAA6E;AAChG,MAAA,KAAI,CAAC,cAAL,CACI,KAAI,CAAC,KAAL,CAAW,cADf,EAEI;AAAE,QAAA,MAAM,EAAE;AAAV,OAFJ,EAGI;AAAE,QAAA,MAAM,EAAE,MAAV;AAAkB,QAAA,IAAI,EAAE;AAAxB,OAHJ,EAII,cAJJ;AAMH,KAPO;;AASA,IAAA,KAAA,CAAA,WAAA,GAAc,UAAC,MAAD,EAA4B,KAA5B,EAAkE;AACpF,UAAM,cAAc,GAAG,KAAK,CAAC,WAAN,GACnB,KADmB,GACX;AAAE,QAAA,WAAW,EAAE,KAAK,CAAC,WAAN,IAAqB,KAAK,CAAC;AAA1C,OADZ;;AAEA,MAAA,KAAI,CAAC,cAAL,CACI,KAAI,CAAC,KAAL,CAAW,aADf,EAEI;AAAE,QAAA,KAAK,EAAE;AAAT,OAFJ,EAGI;AAAE,QAAA,KAAK,EAAE,MAAT;AAAiB,QAAA,IAAI,EAAE;AAAvB,OAHJ,EAII,cAJJ;AAMH,KATO;;AA0LA,IAAA,KAAA,CAAA,YAAA,GAAe,UAAC,KAAD,EAAc;AACjC,UAAM,MAAM,GAAG,KAAI,CAAC,QAAL,CAAc,IAAd,CAAmB,UAAC,CAAD,EAAE;AAAK,eAAA,CAAC,CAAC,KAAF,KAAA,KAAA;AAAiB,OAA3C,CAAf;;AACA,UAAM,KAAK,GAAG,MAAM,KAAK,MAAM,CAAC,KAAP,IAAgB,MAAM,CAAC,KAA5B,CAApB;AACA,aAAO,KAAK,KAAK,SAAV,GAAsB,KAAtB,GAA8B,KAArC;AACH,KAJO;;AAwBA,IAAA,KAAA,CAAA,gBAAA,GAAmB,YAAA;AACvB,aAAO,KAAI,CAAC,KAAL,CAAW,MAAX,CAAkB,UAAA,IAAA,EAAI;AAAI,eAAA,IAAI,CAAC,OAAL,KAAA,MAAA;AAAuB,OAAjD,EAAmD,GAAnD,CAAuD,UAAA,IAAA,EAAI;AAAI,eAAA,IAAI,CAAJ,QAAA;AAAa,OAA5E,CAAP;AACH,KAFO;;AAz/BJ,IAAA,eAAe,CAAC,eAAD,CAAf;AAEA,QAAM,SAAS,GAAY,KAAI,CAAC,KAAL,CAAW,SAAX,KAAyB,IAAzB,IACtB,OAAO,KAAI,CAAC,KAAL,CAAW,SAAlB,KAAgC,QAAjC,IAA8C,KAAI,CAAC,KAAL,CAAW,SAAX,CAAqB,OAArB,KAAiC,KADnF;AAEA,IAAA,KAAI,CAAC,EAAL,GAAU,IAAI,aAAJ,CAAkB,SAAS,IAAI,KAAK,CAAC,SAAN,KAAoB,SAAjC,IAA8C,KAAK,CAAC,SAAN,KAAoB,CAApF,CAAV;AAEA,IAAA,KAAI,CAAC,SAAL,GAAiB,IAAI,eAAJ,CACb,KAAI,CAAC,aAAL,CAAmB,IAAnB,CAAwB,KAAxB,CADa,EAEb,KAAI,CAAC,YAAL,CAAkB,IAAlB,CAAuB,KAAvB,CAFa,EAGb,KAAI,CAAC,aAAL,CAAmB,IAAnB,CAAwB,KAAxB,CAHa,CAAjB;AAKA,IAAA,KAAI,CAAC,YAAL,GAAoB,IAAI,YAAJ,CAAiB,KAAI,CAAC,QAAL,CAAc,IAAd,CAAmB,KAAnB,CAAjB,CAApB;AAEA,IAAA,uBAAuB,CAAC,aAAxB,CAAsC;AAClC,MAAA,WAAW,EAAE,OAAO,CAAC,KAAK,CAAC,WAAP,CADc;AAElC,MAAA,eAAe,EAAE,KAAI,CAAC,eAFY;AAGlC,MAAA,kBAAkB,EAAE,KAAI,CAAC,kBAHS;AAIlC,MAAA,QAAQ,EAAE,KAAI,CAAC;AAJmB,KAAtC;;AAMH;;AA1DD,EAAA,MAAA,CAAA,cAAA,CAAW,IAAA,CAAA,SAAX,EAAW,SAAX,EAAkB;AAxClB;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCG;AACH;SACA,eAAA;AACI,UAAM,eAAe,GAAG,KAAK,QAAL,CAAc,MAAd,CAAqB,UAAC,CAAD,EAAE;AAAK,eAAA,CAAC,CAAC,gBAAF,IAAsB,CAAtB,IAA2B,CAAC,CAAC,WAAF,KAAkB,CAA7C,CAAA;AAA+C,OAA3E,CAAxB;;AACA,UAAM,QAAQ,GAAG,SAAX,QAAW,CAAC,OAAD,EAA+B;AAC5C,QAAA,OAAO,CAAC,IAAR,CAAa,UAAC,CAAD,EAAI,CAAJ,EAAK;AACd,iBAAO,CAAC,CAAC,gBAAF,GAAqB,CAAC,CAAC,gBAA9B;AACH,SAFD;AAGA,eAAO,OAAO,CAAC,GAAR,CAAY,UAAA,MAAA,EAAM;AAEjB,cAAA,gBAAA,GAAA,MAAA,CAAA,gBAAA;AAAA,cACA,WAAA,GAAA,MAAA,CAAA,WADA;AAAA,cAEA,KAAA,GAAA,MAAA,CAAA,KAFA;AAAA,cAGA,OAAA,GAAA,MAAA,CAAA,OAHA;AAAA,cAIA,OAAA,GAAA,MAAA,CAAA,OAJA;AAAA,cAKA,KAAA,GAAA,MAAA,CAAA,KALA;AAAA,cAMA,MAAA,GAAA,MAAA,CAAA,MANA;AAAA,cAOA,QAAA,GAAA,MAAA,CAAA,QAPA;AAAA,cAQA,KAAA,GAAA,MAAA,CAAA,MAAA,EAAA,CAAA,kBAAA,EAAA,aAAA,EAAA,OAAA,EAAA,SAAA,EAAA,SAAA,EAAA,OAAA,EAAA,QAAA,EAAA,UAAA,CAAA,CARA;;AAWJ,iBAAO,QAAQ,CAAC,MAAT,GAAiB,QAAA,CAAA;AACpB,YAAA,QAAQ,EAAE,QAAQ,CAAC,QAAD;AADE,WAAA,EAEjB,KAFiB,CAAjB,GAGH,KAHJ;AAKH,SAlBM,CAAP;AAmBH,OAvBD;;AAwBA,aAAO,QAAQ,CAAC,eAAD,CAAf;AACH,KA3BiB;oBAAA;;AAAA,GAAlB;AAsFA;;AAEG;;AACH,EAAA,IAAA,CAAA,SAAA,CAAA,iBAAA,GAAA,YAAA;AACI,QAAM,GAAG,GAAG,KAAK,CAAC,KAAK,OAAN,CAAjB;AACA,SAAK,KAAL,GAAa,GAAb;AAEA,IAAA,uBAAuB,CAAC,mBAAxB,CAA4C;AACxC,MAAA,KAAK,EAAE,KAAK,OAAL,IAAgB,SADiB;AAExC,MAAA,eAAe,EAAE,KAAK,eAFkB;AAGxC,MAAA,kBAAkB,EAAE,KAAK;AAHe,KAA5C;;AAMA,QAAI,KAAK,KAAT,EAAgB;AACZ,WAAK,WAAL;AACH;AACJ,GAbD;AAeA;;AAEG;;;AACH,EAAA,IAAA,CAAA,SAAA,CAAA,uBAAA,GAAA,YAAA;AACI,IAAA,uBAAuB,CAAC,yBAAxB,CAAkD;AAC9C,MAAA,QAAQ,EAAE,QADoC;AAE9C,MAAA,eAAe,EAAE,KAAK,eAFwB;AAG9C,MAAA,kBAAkB,EAAE,KAAK;AAHqB,KAAlD;AAMA,WAAO,IAAP;AACH,GARD;AAUA;;AAEG;;;AACH,EAAA,IAAA,CAAA,SAAA,CAAA,kBAAA,GAAA,YAAA;AACI,IAAA,uBAAuB,CAAC,oBAAxB,CAA6C;AACzC,MAAA,KAAK,EAAE,KAAK,OAAL,IAAgB,SADkB;AAEzC,MAAA,eAAe,EAAE,KAAK,eAFmB;AAGzC,MAAA,kBAAkB,EAAE,KAAK;AAHgB,KAA7C;AAKH,GAND;AAQA;;AAEG;;;AACH,EAAA,IAAA,CAAA,SAAA,CAAA,oBAAA,GAAA,YAAA;AACI,IAAA,YAAY,CAAC,KAAK,kBAAN,CAAZ;AACA,SAAK,YAAL,CAAkB,OAAlB,GAA4B,EAA5B;AACA,SAAK,SAAL,CAAe,OAAf,GAAyB,EAAzB;AACA,SAAK,QAAL,GAAgB,EAAhB;AACH,GALD;AAOA;;AAEG;;;AACH,EAAA,IAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACI,QAAI,KAAK,GAAG,KAAK,KAAL,CAAW,KAAX,IAAoB,CAAhC;AACA,QAAM,QAAQ,GAAG,eAAe,CAAC,WAAhB,CAA4B,KAAK,kBAAjC,CAAjB;AAEA,QAAI,SAAS,GAAU,EAAvB;;AACA,QAAI,KAAK,CAAC,OAAN,CAAc,KAAK,KAAL,CAAW,IAAzB,CAAJ,EAAoC;AAChC,MAAA,SAAS,GAAG,KAAK,KAAL,CAAW,IAAvB;AACA,MAAA,KAAK,GAAG,KAAK,IAAI,KAAK,KAAL,CAAW,IAAX,CAAgB,MAAjC;AACH,KAHD,MAGO,IAAI,KAAK,KAAL,CAAW,IAAf,EAAqB;AACxB,MAAA,SAAS,GAAG,KAAK,KAAL,CAAW,IAAX,CAAgB,IAA5B;AACA,MAAA,KAAK,GAAG,KAAK,IAAI,KAAK,KAAL,CAAW,IAAX,CAAgB,KAAjC;AACH;;AAED,QAAM,SAAS,GAAY,KAAK,KAAL,CAAW,SAAX,KAAyB,IAAzB,IACtB,OAAO,KAAK,KAAL,CAAW,SAAlB,KAAgC,QAAjC,IAA8C,KAAK,KAAL,CAAW,SAAX,CAAqB,OAArB,KAAiC,KADnF;AAGA,SAAK,YAAL,CAAkB,SAAlB,GAA8B,KAAK,KAAL,CAAW,SAAX,IAAwB,KAAtD;AACA,SAAK,SAAL,CAAe,WAAf,GAA6B,KAAK,KAAL,CAAW,WAAX,IAA0B,KAAvD;AACA,SAAK,SAAL,CAAe,SAAf,GAA2B,SAA3B;AACA,QAAM,eAAe,GAAG,KAAK,KAAL,CAAW,UAAX,IAAyB,KAAK,KAAL,CAAW,UAAX,CAAsB,IAA/C,GAAsD,MAAtD,GAA+D,SAAvF;;AAEA,QAAI,KAAK,KAAK,KAAK,EAAL,CAAQ,KAAtB,EAA6B;AACzB,WAAK,EAAL,CAAQ,KAAR;AACA,WAAK,EAAL,GAAU,IAAI,aAAJ,CAAkB,SAAS,IAAI,KAAK,KAAL,CAAW,SAAX,KAAyB,SAAtC,IAAmD,KAAK,KAAL,CAAW,SAAX,KAAyB,CAA9F,CAAV;AACH;;AAED,SAAK,EAAL,CAAQ,WAAR,GAAsB,KAAK,KAAL,CAAW,WAAX,IAA0B,KAAhD;AACA,SAAK,EAAL,CAAQ,UAAR,GAAqB,KAAK,UAA1B;AACA,SAAK,EAAL,CAAQ,QAAR,GAAmB,KAAK,KAAL,CAAW,IAAX,IAAmB,CAAtC;AACA,SAAK,EAAL,CAAQ,QAAR,GAAmB,CAAC,KAAK,KAAL,CAAW,IAAX,KAAoB,SAApB,GAAgC,KAAK,KAAL,CAAW,IAA3C,GAAkD,KAAK,KAAL,CAAW,QAA9D,KAA2E,CAA9F;AACA,SAAK,EAAL,CAAQ,iBAAR,GAA6B,KAAK,KAAL,CAAW,UAAX,KAA0B,SAAvD;AACA,SAAK,EAAL,CAAQ,KAAR,GAAgB,KAAhB;AACA,SAAK,EAAL,CAAQ,SAAR,GAAoB,CAAC,KAAK,KAAL,CAAW,IAAX,IAAmB,CAApB,KAA0B,KAAK,KAAL,CAAW,UAAX,KAA0B,SAA1B,GAC1C,KAAK,EAAL,CAAQ,aAAR,IAAyB,KAAK,EAAL,CAAQ,YAAR,IAAwB,KAAK,KAAL,CAAW,IAAX,IAAmB,CAA3C,CAAzB,CAD0C,GACgC,CAD1D,CAApB;;AAGA,QAAI,KAAK,KAAL,CAAW,SAAX,KAAyB,SAAzB,IAAsC,KAAK,KAAL,CAAW,SAAX,GAAuB,CAA7D,IAAkE,CAAC,SAAvE,EAAkF;AAC9E,WAAK,EAAL,CAAQ,eAAR,GAA0B,IAAI,CAAC,GAAL,CAAS,OAAT,EAAkB,KAAK,KAAL,CAAW,SAAX,IAAwB,KAAK,IAAI,CAAjC,CAAlB,CAA1B;AACH,KAFD,MAEO;AACH,WAAK,EAAL,CAAQ,eAAR,GAA0B,OAA1B;AACH;;AACD,QAAM,cAAc,GAAI,OAAO,KAAK,KAAL,CAAW,SAAlB,KAAgC,QAAjC,IAA8C,KAAK,KAAL,CAAW,SAAX,CAAqB,MAAnE,IAA6E,MAApG;AAEA,SAAK,KAAL,GAAa,EAAb;AACA,QAAM,mBAAmB,GAAG,QAAQ,CAChC,KAAK,KAD2B,EAEhC,SAFgC,EAGhC,cAHgC,EAIhC;AAAE,MAAA,KAAK,EAAE,KAAK,KAAL,CAAW,IAAX,IAAmB;AAA5B,KAJgC,EAKhC,KAAK,KAAL,CAAW,KAAX,KAAqB,SALW,EAMhC,KAAK,KAAL,CAAW,WANqB,CAApC;AAQA,QAAM,QAAQ,GAAG,KAAK,CAAC,QAAN,CAAe,OAAf,CAAuB,KAAK,KAAL,CAAW,QAAlC,CAAjB;AACA,SAAK,WAAL,CACI,QAAQ,CAAC,MAAT,CAAgB,UAAC,KAAD,EAA+B;AAAK,aAAA,KAAK,IACpD,KAAK,CAAC,IAAN,CAAmC,WAAnC,KAD+C,sBAAA;AAC0B,KAD9E,CADJ,EAGI,mBAHJ;AAIA,QAAM,OAAO,GAAG,QAAQ,CAAC,MAAT,CAAgB,UAAC,KAAD,EAA+B;AAAK,aAAA,KAAK,IACpE,KAAK,CAAC,IAAN,CAAmC,WAAnC,KAD+D,uBAAA;AACW,KAD/D,CAAhB;AAEA,QAAM,SAAS,GAAG,QAAQ,CAAC,MAAT,CAAgB,UAAC,KAAD,EAA+B;AAAK,aAAA,KAAK,IACtE,KAAK,CAAC,IAAN,CAAmC,WAAnC,KADiE,yBAAA;AACW,KAD/D,CAAlB;;AAEA,QAAM,mBAAmB,GAAG,KAAK,QAAL,CAAc,MAAd,CAAqB,UAAA,CAAA,EAAC;AAAI,aAAA,CAAC,CAAC,QAAF,CAAW,MAAX,KAAA,CAAA;AAAuB,KAAjD,CAA5B;;AAEA,QAAM,aAAa,GAAG,SAAS,IAC/B,KAAA,CAAA,aAAA,CAAC,UAAD,EAAW;AACT,MAAA,KAAK,EAAE,KAAK,KAAL,CAAW,KAAX,IAAoB,EADlB;AAET,MAAA,WAAW,EAAE,KAAK,WAFT;AAGT,MAAA,YAAY,EAAE,KAAK,SAAL,CAAe,YAHpB;AAIT,MAAA,WAAW,EAAE,KAAK,SAAL,CAAe,WAJnB;AAKT,MAAA,cAAc,EAAE,KAAK,SAAL,CAAe,cALtB;AAMT,MAAA,WAAW,EAAE,KAAK,SAAL,CAAe,gBANnB;AAOT,MAAA,YAAY,EAAE,KAAK;AAPV,KAAX,CADA;AAYA,QAAM,KAAK,GAAG,CAAC,KAAK,SAAL,CAAe,WAAf,IAA8B,KAAK,SAAL,CAAe,SAA9C,KAA4D,QAA5D,IAAwE,QAAQ,CAAC,IAAjF,IAAyF,CACnG,QAAQ,CAAC,YAAT,CAAsB,KAAA,CAAA,aAAA,CAAC,QAAD,EAAS;AAAC,MAAA,GAAG,EAAE,KAAK,SAAL,CAAe;AAArB,KAAT,CAAtB,EAA4E,QAAQ,CAAC,IAArF,CADmG,EAEnG,QAAQ,CAAC,YAAT,CAAsB,KAAA,CAAA,aAAA,CAAC,QAAD,EAAS;AAAC,MAAA,GAAG,EAAE,KAAK,SAAL,CAAe;AAArB,KAAT,CAAtB,EAA4E,QAAQ,CAAC,IAArF,CAFmG,CAAvG;AAKA,QAAM,MAAM,GACV,KAAA,CAAA,aAAA,CAAC,MAAD,EAAO;AACL,MAAA,YAAY,EAAE,KAAK,YADd;AAEL,MAAA,aAAa,EAAE,KAAK,KAAL,CAAW,UAAX,KAA0B,MAFpC;AAGL,MAAA,qBAAqB,EAAE,iCAAA;AAAM,eAAA,KAAI,CAAC,EAAL,CAAA,SAAA;AAAiB,OAHzC;AAIL,MAAA,SAAS,EAAE,KAAK,KAAL,CAAW,WAAX,IAA0B,SAJhC;AAKL,MAAA,GAAG,EAAE,aAAC,CAAD,EAAE;AACC,QAAA,KAAI,CAAC,OAAL,GAAe,CAAf;AACH,OAPA;AAQL,MAAA,SAAS,EAAE,KAAA,CAAA,aAAA,CAAC,SAAD,EAAU;AACnB,QAAA,IAAI,EAAE,KAAK,KAAL,CAAW,IADE;AAEnB,QAAA,QAAQ,EAAE,KAAK,KAAL,CAAW,QAFF;AAGnB,QAAA,UAAU,EAAE,KAAK,UAHE;AAInB,QAAA,MAAM,EAAE,KAAK,KAAL,CAAW,MAJA;AAKnB,QAAA,UAAU,EAAE,KAAK,KAAL,CAAW,UALJ;AAMnB,QAAA,eAAe,EAAE,KAAK,KAAL,CAAW,eAAX,IAA8B,SAN5B;AAOnB,QAAA,YAAY,EAAE,KAAK,YAPA;AAQnB,QAAA,UAAU,EAAE,KAAK,KAAL,CAAW,UARJ;AASnB,QAAA,eAAe,EAAE,KAAK,uBATH;AAUnB,QAAA,OAAO,EAAE,KAAK,QAVK;AAWnB,QAAA,YAAY,EAAE,KAAK,YAXA;AAYnB,QAAA,YAAY,EAAE,KAAK,SAAL,CAAe,YAZV;AAanB,QAAA,WAAW,EAAE,KAAK,SAAL,CAAe,WAbT;AAcnB,QAAA,cAAc,EAAE,KAAK,SAAL,CAAe,cAdZ;AAenB,QAAA,UAAU,EAAE,KAAK,WAfE;AAgBnB,QAAA,UAAU,EAAE,KAAK,KAAL,CAAW,gBAhBJ;AAiBnB,QAAA,KAAK,EAAE,KAAK;AAjBO,OAAV,CARN;AA2BL,MAAA,SAAS,EAAE,KAAK,KAAL,CAAW,UAAX,IAAyB,KAAA,CAAA,aAAA,CAAC,SAAD,EAAU;AAC5C,QAAA,OAAO,EAAE,KAAK,QAD8B;AAE5C,QAAA,MAAM,EAAE,KAAK,KAAL,CAAW,MAFyB;AAG5C,QAAA,eAAe,EAAE,KAAK,KAAL,CAAW,eAAX,IAA8B,SAHH;AAI5C,QAAA,YAAY,EAAE,KAAK,YAJyB;AAK5C,QAAA,IAAI,EAAE,KAAK,KAAL,CAAW,IAL2B;AAM5C,QAAA,UAAU,EAAE,KAAK,KAAL,CAAW,gBANqB;AAO5C,QAAA,KAAK,EAAE,KAAK,KAPgC;AAQ5C,QAAA,YAAY,EAAE,KAAK,WAAL,CAAiB,MAAjB,GAA0B;AARI,OAAV,CAAzB,IASD,SApCL;AAqCL,MAAA,IAAI,EAAE,mBAAmB,CAAC,GAApB,CAAwB,UAAC,MAAD,EAAS,KAAT,EAAc;AAAK,eAAC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAChD,UAAA,GAAG,EAAE,KAAK,CAAC,QAAN,EAD2C;AAEhD,UAAA,KAAK,EAAE,MAAM,CAAC,KAAP,KAAiB,SAAjB,GACG,IAAI,CAAC,KAAL,CAAW,UAAU,CAAC,MAAM,CAAC,KAAP,CAAa,QAAb,EAAD,CAArB,IAAkD,IADrD,GAFwC;AAAC,SAAA,CAAD;AAI1C,OAJD;AArCD,KAAP,CADF;AA+CA,QAAM,UAAU,GAAG,KAAK,EAAL,IAAW,KAAK,EAAL,CAAQ,SAAnB,IAAgC,KAAK,EAAL,CAAQ,SAAR,CAAkB,UAAlD,IAAgE,CAAnF;AACA,QAAM,UAAU,GAAG,UAAU,CAAC,CAAC,CAAC,KAAK,KAAL,CAAW,KAAX,IAAoB,EAArB,EAAyB,KAAzB,IAAkC,EAAnC,EAAuC,QAAvC,EAAD,CAA7B;;AACM,QAAA,EAAA,GAAA,0BAAA,CAAA;8CAAA;4BAAA;oCAAA;;AAAA,KAAA,CAAA;AAAA,QAAE,QAAA,GAAA,EAAA,CAAA,QAAF;AAAA,QAAY,WAAA,GAAA,EAAA,CAAA,aAAZ;;AAON,QAAM,OAAO,GAAG,SAAV,OAAU,CACZ,IADY,EAEZ,KAFY,EAGZ,YAHY,EAGQ;AAEpB,UAAI,QAAQ,GAAG,KAAf;AACA,UAAM,aAAa,GAAG,KAAI,CAAC,KAAL,CAAW,aAAX,GAA2B,cAAc,CAAC,KAAI,CAAC,KAAL,CAAW,aAAZ,EAA2B,IAAI,CAAC,QAAhC,CAAzC,GAAqF,SAA3G;AACA,aAAO;AACH,QAAA,GAAG,EAAE,KAAI,CAAC,QAAL,CAAc,GAAd,CAAkB,UAAC,MAAD,EAAS,WAAT,EAAoB;AACvC,cAAI,WAAW,CAAC,WAAD,CAAf,EAA8B;AAC1B,mBAAO,IAAP;AACH;;AACD,cAAM,SAAS,GAAG,MAAG,MAAM,CAAC,SAAP,GAAmB,MAAM,CAAC,SAAP,GAAmB,GAAtC,GAA4C,EAA/C,KACZ,MAAG,MAAM,CAAC,MAAP,GAAgB,uBAAhB,GAA0C,EAA7C,CADY,CAAlB;AAGA,cAAM,KAAK,GAAG,MAAM,CAAC,IAAP,KAAgB,SAAhB,GACR,CAAC,KAAI,CAAC,KAAN,GACI;AAAE,YAAA,IAAI,EAAE,MAAM,CAAC,IAAf;AAAqB,YAAA,KAAK,EAAE,MAAM,CAAC;AAAnC,WADJ,GAEI;AAAE,YAAA,IAAI,EAAE,MAAM,CAAC,KAAf;AAAsB,YAAA,KAAK,EAAE,MAAM,CAAC;AAApC,WAHI,GAIR,EAJN;AAKA,cAAM,SAAS,GAAkB;AAC7B,YAAA,EAAE,EAAE,eAAe,CAAC,qBAAhB,CAAyC,KAAK,GAAA,GAAL,GAAS,MAAM,CAAC,WAAD,CAAxD,EAAyE,QAAzE,CADyB;AAE7B,YAAA,OAAO,EAAE,QAAQ,CAAC,WAAD,CAFY;AAG7B,YAAA,QAAQ,EAAE,IAAI,CAAC,QAHc;AAI7B,YAAA,KAAK,EAAE,MAAM,CAAC,KAJe;AAK7B,YAAA,MAAM,EAAE,MAAM,CAAC,MALc;AAM7B,YAAA,MAAM,EAAE,MAAM,CAAC,MANc;AAO7B,YAAA,SAAS,EAAE,SAPkB;AAQ7B,YAAA,MAAM,EAAE,KAAI,CAAC,KAAL,CAAW,UARU;AAS7B,YAAA,QAAQ,EAAE,KAAI,CAAC,UATc;AAU7B,YAAA,eAAe,EAAG,KAAI,CAAC,KAAL,CAAW,iBAAZ,GACZ,UAAC,CAAD,EAAE;AAAM,cAAA,KAAI,CAAC,eAAL,CAAqB;AAAC,gBAAA,KAAK,EAAE,CAAR;AAAW,gBAAA,QAAQ,EAAE,IAAI,CAAC,QAA1B;AAAoC,gBAAA,SAAS,EAAE,YAA/C;AAA6D,gBAAA,WAAW,EAAA;AAAxE,eAArB;AAAiG,aAD7F,GAEb,SAZyB;AAa7B,YAAA,WAAW,EAAE,WAbgB;AAc7B,YAAA,YAAY,EAAE,mBAAmB,CAAC,MAdL;AAe7B,YAAA,OAAO,EAAE,IAAI,CAAC,OAfe;AAgB7B,YAAA,KAAK,EAAE,IAAI,CAAC,KAhBiB;AAiB7B,YAAA,QAAQ,EAAE,IAAI,CAAC,QAjBc;AAkB7B,YAAA,SAAS,EAAE,IAAI,CAAC,SAlBa;AAmB7B,YAAA,KAAK,EAAE,KAnBsB;AAoB7B,YAAA,eAAe,EAAE,MAAM,CAAC,eApBK;AAqB7B,YAAA,UAAU,EAAE,KAAK,CAAC,OAAN,CAAc,aAAd,KAAgC,aAAa,CAAC,OAAd,CAAsB,WAAtB,IAAqC,CAAC;AArBrD,WAAjC;AAwBA,cAAI,qBAAqB,GAAG,KAA5B;;AACA,cAAI,MAAM,CAAC,QAAP,IAAmB,KAAI,CAAC,KAAL,CAAW,SAAlC,EAA6C;AACzC,gBAAM,MAAM,GAAG,cAAc,CAAC,KAAI,CAAC,KAAL,CAAW,SAAZ,EAAuB,IAAI,CAAC,QAA5B,CAA7B;;AACA,gBAAI,MAAM,KAAK,IAAX,IAAmB,MAAM,KAAK,MAAM,CAAC,KAAzC,EAAgD;AAC5C,cAAA,QAAQ,GAAG,IAAX;AACA,cAAA,qBAAqB,GAAG,IAAxB;AACH;AACJ;;AAED,cAAI,MAAM,CAAC,IAAX,EAAiB;AACb,mBAAO,KAAA,CAAA,aAAA,CAAC,MAAM,CAAC,IAAR,EAAY,QAAA,CAAA;AAAC,cAAA,GAAG,EAAE;AAAN,aAAA,EAAuB,SAAvB,CAAZ,CAAP;AACH;;AAED,iBAAO,qBAAqB,GACtB,KAAA,CAAA,aAAA,CAAC,YAAD,EAAa,QAAA,CAAA;AAAC,YAAA,GAAG,EAAE;AAAN,WAAA,EAAuB,SAAvB,CAAb,CADsB,GAEtB,KAAA,CAAA,aAAA,CAAC,QAAD,EAAS,QAAA,CAAA;AAAC,YAAA,GAAG,EAAE;AAAN,WAAA,EAAuB,SAAvB,CAAT,CAFN;AAGH,SApDI,CADF;AAsDH,QAAA,QAAQ,EAAE,QAtDP;AAuDH,QAAA,UAAU,EAAE,OAAO,aAAP,KAAyB,SAAzB,IAAsC;AAvD/C,OAAP;AAyDH,KAhED;;AAkEA,QAAI,UAAU,GAAG,CAAjB;;AACA,QAAI,KAAK,KAAL,CAAW,UAAX,KAA0B,SAA9B,EAAyC;AACrC,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,EAAL,CAAQ,aAAR,GAAwB,KAAK,EAAL,CAAQ,YAAhC,IAAgD,KAAK,KAAL,CAAW,IAAX,IAAmB,CAAnE,CAApB,EAA2F,CAAC,EAA5F,EAAgG;AAC5F,YAAM,IAAI,GAAG,KAAK,KAAL,CAAW,KAAX,EAAb;;AACA,YAAI,IAAJ,EAAU;AACN,eAAK,KAAL,CAAW,IAAX,CAAgB,IAAhB;;AACA,UAAA,UAAU;;AACV,cAAI,IAAI,CAAC,OAAL,KAAiB,aAArB,EAAoC;AAChC,YAAA,CAAC;AACJ;AACJ,SAND,MAMO;AACH;AACH;AACJ;AACJ;;AAED,QAAM,MAAM,GAAG,SAAT,MAAS,CAAC,KAAD,EAAM;AACjB,aAAQ,KAAK,IAAI,KAAI,CAAC,KAAL,CAAW,MAAX,GAAoB,UAArC;AACH,KAFD;;AAIA,QAAI,iBAAiB,GAAG,KAAK,EAAL,CAAQ,SAAR,IAAqB,CAA7C;AACA,QAAM,IAAI,GAAU,EAApB;AAEA,QAAM,aAAa,GAAG,KAAK,WAAL,CAAiB,MAAjB,IAA2B,KAAK,KAAL,CAAW,UAAX,GAAwB,CAAxB,GAA4B,CAAvD,IAA4D,CAAlF;AACA,QAAI,mBAAJ;;AACA,QAAI,KAAK,KAAL,CAAW,MAAf,EAAuB;AACnB,UAAI,WAAS,GAAG,CAAC,CAAjB;AACA,UAAI,gBAAc,GAAG,CAArB;;AACA,WAAK,KAAL,CAAW,OAAX,CAAmB,UAAC,IAAD,EAAO,QAAP,EAAe;AAC9B,YAAI,IAAI,CAAC,OAAL,KAAiB,MAArB,EAA6B;AACzB,UAAA,iBAAiB;AACjB,UAAA,WAAS;AACZ;;AACD,YAAM,KAAK,GAAG,iBAAiB,GAAG,CAApB,KAA0B,CAAxC;AACA,YAAM,WAAW,GAAG,KAAI,CAAC,KAAL,CAAW,WAAX,IAA0B,MAAM,CAAC,KAAI,CAAC,KAAL,CAAW,WAAZ,CAAN,CAA+B,IAAI,CAAC,QAApC,CAA9C;AACA,YAAM,aAAa,GAAG,QAAQ,IAAI,KAAI,CAAC,EAAL,CAAQ,SAAR,IAAqB,CAAzB,CAA9B;AACA,YAAM,KAAK,GAAG,WAAW,GAAG,WAAH,GAAiB,OAAO,aAAjD;AACA,YAAM,WAAW,GAAG,KAAK,GAAG,IAA5B;AACA,YAAM,OAAO,GAAG,OAAO,CAAC,IAAD,EAAO,KAAP,EAAc,WAAd,CAAvB;AACA,QAAA,mBAAmB,GAAG,aAAa,GAAG,aAAhB,GAAgC,gBAAtD;AAEA,QAAA,IAAI,CAAC,IAAL,CACE,KAAA,CAAA,aAAA,CAAC,OAAD,EAAQ;AACN,UAAA,GAAG,EAAE,KADC;AAEN,UAAA,QAAQ,EAAE,IAAI,CAAC,QAFT;AAGN,UAAA,QAAQ,EAAE,KAHJ;AAIN,UAAA,QAAQ,EAAE,OAAO,CAAC,QAJZ;AAKN,UAAA,OAAO,EAAE,IAAI,CAAC,OALR;AAMN,UAAA,QAAQ,EAAE,MAAM,CAAC,QAAD,CANV;AAON,UAAA,OAAO,EAAE,iBAAC,CAAD,EAAE;AAAK,mBAAA,KAAI,CAAC,QAAL,CAAc,CAAd,EAAA,IAAA,CAAA;AAAsB,WAPhC;AAQN,UAAA,aAAa,EAAE,uBAAC,CAAD,EAAE;AAAK,mBAAA,KAAI,CAAC,WAAL,CAAiB,CAAjB,EAAA,IAAA,CAAA;AAAyB,WARzC;AASN,UAAA,aAAa,EAAE,KAAI,CAAC,KAAL,CAAW,aATpB;AAUN,UAAA,SAAS,EAAE,KAAI,CAAC,KAAL,CAAW,SAVhB;AAWN,UAAA,MAAM,EAAE,KAAI,CAAC,KAAL,CAAW,SAXb;AAYN,UAAA,YAAY,EAAE,mBAZR;AAaN,UAAA,SAAS,EAAE,WAbL;AAcN,UAAA,UAAU,EAAE,OAAO,CAAC;AAdd,SAAR,EAgBG,OAAO,CAAC,GAhBX,CADF;;AAqBA,YAAI,KAAI,CAAC,KAAL,CAAW,MAAX,IAAqB,IAAI,CAAC,OAAL,KAAiB,MAAtC,IAAgD,IAAI,CAAC,QAAzD,EAAmE;AAC/D,cAAM,aAAa,GAAI,mBAAmB,CAAC,MAApB,IAChB,KAAI,CAAC,KAAL,CAAW,WAAX,GAAyB,CAAzB,GAA6B,CADb,KAEhB,KAAI,CAAC,KAAL,CAAW,KAAX,GAAmB,KAAI,CAAC,KAAL,CAAW,KAAX,CAAiB,MAApC,GAA6C,CAF7B,CAAD,IAEqC,CAF3D;AAGA,UAAA,gBAAc;AACd,UAAA,mBAAmB,GAAG,aAAa,GAAG,aAAhB,GAAgC,gBAAtD;AACA,UAAA,IAAI,CAAC,IAAL,CACE,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AACE,YAAA,GAAG,EAAE,WADP;AAEE,YAAA,SAAS,EAAE,KAAK,GAAG,oBAAH,GAA0B,cAF5C;AAGE,YAAA,KAAK,EAAE;AAAE,cAAA,UAAU,EAAE,MAAM,CAAC,QAAD,CAAN,GAAmB,QAAnB,GAA8B;AAA5C,aAHT;AAIE,YAAA,IAAI,EAAC,KAJP;AAIY,6BACK;AALjB,WAAA,EAOG,KAAI,CAAC,KAAL,CAAW,KAAX,IAAoB,KAAI,CAAC,KAAL,CAAW,KAAX,CAAiB,GAAjB,CAAqB,UAAC,KAAD,EAAQ,GAAR,EAAW;AAC7C,mBACE,KAAA,CAAA,aAAA,CAAC,aAAD,EAAc;AACZ,cAAA,EAAE,EAAE,EADQ;AAEZ,cAAA,SAAS,EAAE,IAAI,CAAC,SAFJ;AAGZ,cAAA,KAAK,EAAE,KAAK,CAAC,KAHD;AAIZ,cAAA,QAAQ,EAAE,IAAI,CAAC,QAJH;AAKZ,cAAA,GAAG,EAAE,GALO;AAMZ,cAAA,KAAK,EAAE,EANK;AAOZ,cAAA,eAAe,EAAE,IAAI,GAPT;AAQZ,cAAA,UAAU,EAAE;AARA,aAAd,CADF;AAYH,WAbgB,CAPvB,EAsBM,KAAI,CAAC,KAAL,CAAW,WAAX,IACA,KAAA,CAAA,aAAA,CAAC,uBAAD,EAAwB;AACtB,YAAA,EAAE,EAAE,eAAe,CAAC,qBAAhB,CAAyC,WAAW,GAAA,SAApD,EAA+D,QAA/D;AADkB,WAAxB,CAvBN,EA2BE,KAAA,CAAA,aAAA,CAAC,cAAD,EAAe;AACb,YAAA,QAAQ,EAAE,IAAI,CAAC,QADF;AAEb,YAAA,SAAS,EAAE,IAAI,CAAC,SAFH;AAGb,YAAA,OAAO,EAAE,aAHI;AAIb,YAAA,YAAY,EAAE,KAAK,KAAI,CAAC,KAAL,CAAW,KAAX,GAAmB,KAAI,CAAC,KAAL,CAAW,KAAX,CAAiB,MAApC,GAA6C,CAAlD,CAJD;AAKb,YAAA,MAAM,EAAE,KAAI,CAAC,KAAL,CAAW,MALN;AAMb,YAAA,EAAE,EAAE,eAAe,CAAC,qBAAhB,CAAyC,WAAW,GAAA,QAApD,EAA8D,QAA9D;AANS,WAAf,CA3BF,CADF;AAsCH;AACJ,OA/ED;AAgFH,KAnFD,MAmFO;AACH,MAAA,IAAI,CAAC,IAAL,CACE,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AAAI,QAAA,GAAG,EAAC,YAAR;AAAqB,QAAA,SAAS,EAAC,kBAA/B;AAAiD,yBAAgB;AAAjE,OAAA,EACE,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AAAI,QAAA,OAAO,EAAE,mBAAmB,CAAC;AAAjC,OAAA,EACG,SAAS,CAAC,MAAV,GAAmB,SAAnB,GAA+B,KAAA,CAAA,aAAA,CAAC,aAAD,EAAc,IAAd,CADlC,CADF,CADF;AAOH;;AAED,QAAM,UAAU,GAAA,QAAA,CAAA;AACZ,MAAA,SAAS,EAAE,cADC;AAEZ,MAAA,YAAY,EAAE,KAAK,eAFP;AAGZ,MAAA,KAAK,EAAE,KAHK;AAIZ,MAAA,IAAI,EAAE,KAAK,EAAL,CAAQ,SAAR,IAAqB,CAJf;AAKZ,MAAA,IAAI,EAAE,CAAC,KAAK,KAAL,CAAW,IAAX,KAAoB,SAApB,GAAgC,KAAK,KAAL,CAAW,IAA3C,GAAkD,KAAK,KAAL,CAAW,QAA9D,KAA2E,EALrE;AAMZ,MAAA,WAAW,EAAE;AAND,KAAA,EAOR,SAAS,CAAC,KAAK,KAAL,CAAW,QAAX,IAAuB,EAAxB,CAPD,CAAhB;;AASA,QAAM,KAAK,GAAG,KAAK,KAAL,CAAW,KAAX,GAAmB,KAAA,CAAA,aAAA,CAAC,KAAK,KAAL,CAAW,KAAZ,EAAiB,QAAA,CAAA,EAAA,EAAK,UAAL,CAAjB,CAAnB,GAA0D,KAAA,CAAA,aAAA,CAAC,KAAD,EAAM,QAAA,CAAA,EAAA,EAAK,UAAL,CAAN,CAAxE;;AAEA,QAAM,MAAM,GAAG,SAAT,MAAS,CAAC,KAAD,EAA0B;AACrC,aAAO,KAAI,CAAC,KAAL,CAAW,IAAX,IAAmB,KAAI,CAAC,KAAL,CAAW,IAAX,CAAgB,MAAhB,CAAuB,UAAA,UAAA,EAAU;AAAI,eAAA,UAAU,CAAC,KAAX,KAAA,KAAA;AAA0B,OAA/D,EAAiE,MAAjE,GAA0E,CAApG;AACH,KAFD;;AAIA,QAAM,MAAM,GAAG,KAAK,QAAL,CAAc,IAAd,CAAmB,UAAA,CAAA,EAAC;AAAI,aAAA,OAAO,CAAC,CAAC,CAAT,UAAO,CAAP;AAAqB,KAA7C,IACb,KAAA,CAAA,aAAA,CAAC,MAAD,EAAO;AACL,MAAA,YAAY,EAAE,KAAK,YADd;AAEL,MAAA,aAAa,EAAE,KAAK,KAAL,CAAW,UAAX,KAA0B,MAFpC;AAGL,MAAA,GAAG,EAAE,aAAA,CAAA,EAAC;AAAI,eAAA,KAAI,CAAC,OAAL,GAAA,CAAA;AAAgB,OAHrB;AAIL,MAAA,GAAG,EAAE,KAAA,CAAA,aAAA,CAAC,SAAD,EAAU;AAAC,QAAA,OAAO,EAAE,KAAK,QAAf;AAAyB,QAAA,KAAK,EAAE,KAAK,KAArC;AAA4C,QAAA,YAAY,EAAE,mBAAmB,GAAG;AAAhF,OAAV,CAJA;AAKL,MAAA,IAAI,EAAE,mBAAmB,CAAC,GAApB,CAAwB,UAAC,MAAD,EAAS,KAAT,EAAc;AAAK,eAAC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAChD,UAAA,GAAG,EAAE,KAAK,CAAC,QAAN,EAD2C;AAEhD,UAAA,KAAK,EAAE,MAAM,CAAC,KAAP,KAAiB,SAAjB,GACK,IAAI,CAAC,KAAL,CAAW,UAAU,CAAC,MAAM,CAAC,KAAP,CAAa,QAAb,EAAD,CAArB,IAAkD,IADvD,GAFwC;AAAC,SAAA,CAAD;AAIxC,OAJH;AALD,KAAP,CADa,GAaX,IAbJ;AAeA,QAAM,SAAS,GACb,KAAA,CAAA,aAAA,CAAA,UAAA,EAAA;AACE,MAAA,GAAG,EAAE,aAAC,CAAD,EAAE;AACC,QAAA,KAAI,CAAC,YAAL,CAAkB,YAAlB,GAAiC,CAAjC;AACH,OAHP;AAIE,MAAA,IAAI,EAAC;AAJP,KAAA,EAMG,mBAAmB,CAAC,GAApB,CAAwB,UAAC,MAAD,EAAS,KAAT,EAAc;AAAK,aAC1C,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,QAAA,GAAG,EAAE,KAAK,CAAC,QAAN,EADP;AAEE,QAAA,SAAS,EAAE,MAAM,CAAC,MAAM,CAAC,KAAR,CAAN,GAAuB,UAAvB,GAAoC,SAFjD;AAGE,QAAA,KAAK,EAAE,MAAM,CAAC,KAAP,KAAiB,SAAjB,GACK,IAAI,CAAC,KAAL,CAAW,UAAU,CAAC,MAAM,CAAC,KAAP,CAAa,QAAb,EAAD,CAArB,IAAkD,IADvD,GAJiC;AAC1C,OAAA,CAD0C;AAMjC,KANV,CANH,CADF;;AAkBA,QAAI,KAAK,KAAL,CAAW,UAAX,KAA0B,MAA9B,EAAsC;AAClC,aACE,KAAA,CAAA,aAAA,CAAC,8BAA8B,CAAC,QAAhC,EAAwC;AAAC,QAAA,KAAK,EAAE,KAAK,eAAL,CAAqB;AAA7B,OAAxC,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA,QAAA,CAAA;AACE,QAAA,KAAK,EAAE,KAAK,KAAL,CAAW,KADpB;AAEE,QAAA,SAAS,EAAE,UAAU,CACX,iBADW,EAEX,KAAK,KAAL,CAAW,SAFA,CAFvB;AAKS,yBACQ,mBAAmB,CAAC,MANrC;AAM2C,yBAC1B,KAPjB;AAQE,QAAA,GAAG,EAAE,aAAC,EAAD,EAAG;AAAO,UAAA,KAAI,CAAC,OAAL,GAAe,EAAf;AAAoB,SARrC;AASE,QAAA,SAAS,EAAE,KAAK,SATlB;AAUE,QAAA,OAAO,EAAE,KAAK;AAVhB,OAAA,EAWM,sCAXN,CAAA,EAaG,OAbH,EAcG,aAdH,EAeE,KAAA,CAAA,aAAA,CAAC,cAAD,EAAe;AACb,QAAA,UAAU,EAAE,KAAK,KAAL,CAAW,UADV;AAEb,QAAA,SAAS,EAAE,KAAK,gBAFH;AAGb,QAAA,QAAQ,EAAE,kBAAC,KAAD,EAAM;AACZ,UAAA,KAAI,CAAC,EAAL,CAAQ,KAAR,GAAgB,KAAhB;;AACA,UAAA,KAAI,CAAC,eAAL;AACH;AANY,OAAf,EAQE,KAAA,CAAA,aAAA,CAAA,OAAA,EAAA;AAAO,QAAA,KAAK,EAAE;AAAC,UAAA,UAAU,EAAE;AAAb;AAAd,OAAA,EAEG,SAFH,EAGG,MAHH,EAIE,KAAA,CAAA,aAAA,CAAA,OAAA,EAAA,QAAA,CAAA,EAAA,EAAW,qCAAX,CAAA,EACG,IADH,CAJF,EAOG,MAPH,CARF,CAfF,EAiCG,KAAK,KAAL,CAAW,QAAX,IAAuB,KAjC1B,EAkCG,KAlCH,CADF,CADF;AAwCH;;AAED,QAAI,YAAY,GAAG,KAAK,KAAL,CAAW,KAAX,IAAoB,EAAvC;;AACA,QAAI,KAAK,KAAL,CAAW,UAAX,KAA0B,SAA9B,EAAyC;AACrC;AACA,UAAI,CAAC,YAAY,CAAC,MAAlB,EAA0B;AACtB,QAAA,YAAY,GAAG,MAAM,CAAC,MAAP,CAAc,EAAd,EAAkB,YAAlB,EAAgC;AAAE,UAAA,MAAM,EAAE;AAAV,SAAhC,CAAf;AACH;AACJ;;AAED,WACE,KAAA,CAAA,aAAA,CAAC,8BAA8B,CAAC,QAAhC,EAAwC;AAAC,MAAA,KAAK,EAAE,KAAK,eAAL,CAAqB;AAA7B,KAAxC,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA,QAAA,CAAA;AACE,MAAA,KAAK,EAAE,YADT;AAEE,MAAA,SAAS,EAAE,UAAU,CACX,iBADW,EAEX;AACI,0BAAkB,KAAK,KAAL,CAAW,UAAX,KAA0B;AADhD,OAFW,EAKX,KAAK,KAAL,CAAW,SALA,CAFvB;AASE,MAAA,GAAG,EAAE,aAAC,EAAD,EAAG;AACE,QAAA,KAAI,CAAC,OAAL,GAAe,EAAf;;AACA,QAAA,KAAI,CAAC,eAAL;AACH,OAZT;AAaE,MAAA,IAAI,EAAC,MAbP;AAaa,uBACI,mBAAmB,CAAC,MAdrC;AAc2C,uBAC1B,KAfjB;AAgBE,MAAA,SAAS,EAAE,KAAK,SAhBlB;AAiBE,MAAA,OAAO,EAAE,KAAK;AAjBhB,KAAA,EAkBM,sCAlBN,CAAA,EAoBG,OApBH,EAqBG,aArBH,EAsBG,MAtBH,EAuBE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAkC,MAAA,IAAI,EAAC;AAAvC,KAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,MAAA,GAAG,EAAE,aAAC,SAAD,EAAU;AACD,QAAA,KAAI,CAAC,EAAL,CAAQ,SAAR,GAAoB,SAApB;AACH,OAHb;AAIE,MAAA,SAAS,EAAC,kCAJZ;AAKE,MAAA,QAAQ,EAAE,KAAK,aALjB;AAME,MAAA,IAAI,EAAC;AANP,KAAA,EAQE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,MAAA,KAAK,EAAE;AAAE,oBAAY;AAAd,OAAZ;AAAwC,MAAA,IAAI,EAAC;AAA7C,KAAA,EACE,KAAA,CAAA,aAAA,CAAC,cAAD,EAAe;AACb,MAAA,UAAU,EAAE,KAAK,KAAL,CAAW,UADV;AAEb,MAAA,SAAS,EAAE,KAAK,gBAFH;AAGb,MAAA,QAAQ,EAAE,kBAAA,KAAA,EAAK;AAAK,QAAA,KAAI,CAAC,EAAL,CAAQ,KAAR,GAAgB,KAAhB;AAA2C;AAHlD,KAAf,EAKE,KAAA,CAAA,aAAA,CAAA,OAAA,EAAA;AACE,MAAA,SAAS,EAAE,cADb;AAEE,MAAA,IAAI,EAAC,cAFP;AAGE,MAAA,KAAK,EAAE;AAAC,QAAA,UAAU,EAAE;AAAb;AAHT,KAAA,EAKG,SALH,EAME,KAAA,CAAA,aAAA,CAAA,OAAA,EAAA,QAAA,CAAA;AACE,MAAA,GAAG,EAAE,aAAC,SAAD,EAAU;AACG,QAAA,KAAI,CAAC,EAAL,CAAQ,SAAR,GAAoB,SAApB;AACH,OAHjB;AAIE,MAAA,IAAI,EAAC;AAJP,KAAA,EAKM,qCALN,CAAA,EAOG,IAPH,CANF,CALF,CADF,CARF,EAgCE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAoC,MAAA,IAAI,EAAC;AAAzC,KAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,MAAA,KAAK,EAAE,KAAK,KAAL,CAAW,UAAX,KAA0B,SAA1B,GACW;AAAE,kBAAW,KAAK,EAAL,CAAQ,eAAT,GAA4B;AAAxC,OADX,GAC4D;AAFrE,KAAA,CADF,CAhCF,CADF,CAvBF,EAgEG,MAhEH,EAiEG,KAAK,KAAL,CAAW,QAAX,IAAuB,KAjE1B,EAkEG,KAlEH,CADF,CADF;AAwEH,GA1eD;;AAwmBQ,EAAA,IAAA,CAAA,SAAA,CAAA,eAAA,GAAR,UAAwB,OAAxB,EAA8I;AAC1I,QAAI,KAAK,KAAL,CAAW,iBAAf,EAAkC;AACvB,UAAA,OAAA,GAAA,OAAA,CAAA,KAAA;AAAA,UAAO,QAAA,GAAA,OAAA,CAAA,QAAP;AAAA,UAAiB,SAAA,GAAA,OAAA,CAAA,SAAjB;AAAA,UAA4B,WAAA,GAAA,OAAA,CAAA,WAA5B;;AACD,UAAA,EAAA,GAAA,mBAAA,CAAA,KAAA,KAAA,CAAA,UAAA,CAAA;AAAA,UAAC,IAAA,GAAA,EAAA,CAAA,IAAD;AAAA,UAAO,IAAA,GAAA,EAAA,CAAA,IAAP;;AAEN,UAAM,cAAc,GAAA,QAAA,CAAA,EAAA,EACb,KAAK,YAAL,CAAkB,OAAK,CAAC,cAAxB,CADa,EAC0B;AAC1C,QAAA,QAAQ,EAAE,QADgC;AAE1C,QAAA,aAAa,EAAE,WAF2B;AAG1C,QAAA,WAAW,EAAE,WAH6B;AAI1C,QAAA,aAAa,EAAE,SAJ2B;AAK1C,QAAA,WAAW,EAAE,SAL6B;AAM1C,QAAA,SAAS,EAAE,KAAK,gBAAL,EAN+B;AAO1C,QAAA,MAAM,EAAE,KAPkC;AAQ1C,QAAA,OAAO,EAAE,KARiC;AAS1C,QAAA,QAAQ,EAAE,KATgC;AAU1C,QAAA,OAAO,EAAE,KAViC;AAW1C,QAAA,IAAI,EAAA,IAXsC;AAY1C,QAAA,IAAI,EAAA,IAZsC;AAa1C,QAAA,MAAM,EAAE,KAbkC;AAc1C,QAAA,WAAW,EAAE,KAAK,OAdwB;AAe1C,QAAA,aAAa,EAAE,KAAK,KAAL,CAAW,aAAX,IAA4B;AAfD,OAD1B,CAApB;;AAmBA,WAAK,KAAL,CAAW,iBAAX,CAA6B,IAA7B,CAAkC,SAAlC,EAA6C,cAA7C;AACH;AACJ,GA1BO;;AAoGA,EAAA,IAAA,CAAA,SAAA,CAAA,cAAA,GAAR,UACI,OADJ,EAEI,IAFJ,EAGI,QAHJ,EAII,cAJJ,EAI6C;AAEzC,QAAM,eAAe,GAAG,KAAK,KAAL,CAAW,iBAAnC;;AACA,QAAI,OAAJ,EAAa;AACT,MAAA,OAAO,CAAC,IAAR,CAAa,SAAb,EAAsB,QAAA,CAAA,EAAA,EAAO,KAAK,YAAL,CAAkB,cAAlB,CAAP,EAA6C,IAA7C,CAAtB;AACH,KAFD,MAEO,IAAI,eAAJ,EAAqB;AACxB,MAAA,eAAe,CAAC,IAAhB,CACI,SADJ,EACa,QAAA,CAAA,EAAA,EAEF,KAAK,YAAL,CAAkB,cAAlB,CAFE,EAE+B;AACpC,QAAA,SAAS,EAAE,QAAA,CAAA,EAAA,EACJ,KAAK,YAAL,EADI,EAEJ,QAFI;AADyB,OAF/B,CADb;AASH;AACJ,GApBO;;AAsBA,EAAA,IAAA,CAAA,SAAA,CAAA,aAAA,GAAR,UAAsB,IAAtB,EAAoC,IAApC,EAAkD,WAAlD,EAAkE;AAAlE,QAAA,KAAA,GAAA,IAAA;;;;AACI,QAAM,KAAK,GAAG,KAAK,QAAL,CAAc,IAAd,EAAoB,KAAlC;;AACA,QAAM,GAAG,GAAG,SAAN,GAAM,CAAC,KAAD,EAAc;AACtB,SAAG;AACC,QAAA,KAAK;AACR,OAFD,QAES,KAAK,GAAG,KAAI,CAAC,QAAL,CAAc,MAAtB,IAAgC,KAAI,CAAC,QAAL,CAAc,KAAd,EAAqB,KAArB,GAA6B,KAFtE;;AAGA,aAAO,KAAP;AACH,KALD;;AAOA,QAAM,OAAO,GAAG,KAAK,QAAL,CAAc,MAAd,CAAqB,IAArB,EAA2B,GAAG,CAAC,IAAD,CAAH,GAAY,IAAvC,CAAhB;;AACA,KAAA,EAAA,GAAA,KAAK,QAAL,EAAc,MAAd,CAAoB,KAApB,CAAoB,EAApB,EAAoB,CAAC,IAAI,GAAG,IAAP,GAAc,GAAG,CAAC,IAAI,GAAG,OAAO,CAAC,MAAhB,CAAjB,GAA2C,IAA5C,EAAkD,CAAlD,EAAmD,MAAnD,CAAwD,OAAxD,CAApB;;AACA,SAAK,QAAL,CAAc,MAAd,CAAqB,UAAC,CAAD,EAAE;AAAK,aAAA,CAAC,CAAC,gBAAF,IAAA,CAAA;AAAuB,KAAnD,EAAqD,OAArD,CAA6D,UAAC,CAAD,EAAI,CAAJ,EAAK;AAAK,aAAA,CAAC,CAAC,UAAF,GAAA,CAAA;AAAgB,KAAvF;;AAEA,QAAM,gBAAgB,GAAG,KAAK,OAA9B;AACA,SAAK,WAAL;;AACA,QAAI,KAAK,KAAL,CAAW,eAAf,EAAgC;AAC5B,WAAK,KAAL,CAAW,eAAX,CAA2B,IAA3B,CACI,SADJ,EAEI;AACI,QAAA,MAAM,EAAE,IADZ;AAEI,QAAA,OAAO,EAAE,gBAFb;AAGI,QAAA,WAAW,EAAE;AAHjB,OAFJ;AAOH;AACJ,GAxBO;;AA0BA,EAAA,IAAA,CAAA,SAAA,CAAA,YAAA,GAAR,UAAqB,SAArB,EAAwC,SAAxC,EAA2D,WAA3D,EAA2E;AACvE,QAAI,KAAK,KAAL,CAAW,KAAX,KAAqB,SAAzB,EAAoC;AAChC;AACH;;AACD,QAAM,KAAK,GAAG,KAAK,KAAL,CAAW,KAAX,CAAiB,KAAjB,EAAd;AACA,IAAA,KAAK,CAAC,MAAN,CAAY,KAAZ,CAAA,KAAA,EAAK,CAAQ,SAAR,EAAmB,CAAnB,EAAoB,MAApB,CAAyB,KAAK,CAAC,MAAN,CAAa,SAAb,EAAwB,CAAxB,CAAzB,CAAL;AACA,SAAK,WAAL,CAAiB,KAAjB,EAAwB,WAAxB;AACH,GAPO;;AASA,EAAA,IAAA,CAAA,SAAA,CAAA,aAAA,GAAR,UAAsB,WAAtB,EAA2C,UAA3C,EAA+D,WAA/D,EAA+E;AAC3E,QAAM,KAAK,GAAG,KAAK,QAAL,CAAc,WAAd,EAA2B,KAAzC;;AACA,QAAI,CAAC,KAAL,EAAY;AACR;AACH;;AACD,QAAM,KAAK,GAAG,CAAC,KAAK,KAAL,CAAW,KAAX,IAAoB,EAArB,EAAyB,KAAzB,EAAd;AACA,IAAA,KAAK,CAAC,MAAN,CAAa,UAAb,EAAyB,CAAzB,EAA4B;AAAE,MAAA,KAAK,EAAE;AAAT,KAA5B;AACA,SAAK,WAAL,CAAiB,KAAjB,EAAwB,WAAxB;AACH,GARO;;AAUA,EAAA,IAAA,CAAA,SAAA,CAAA,eAAA,GAAR,YAAA;AACI,QAAI,UAAU,GAAW,CAAzB;;AACA,QAAI,CAAC,KAAK,YAAL,CAAkB,YAAvB,EAAqC;AACjC;AACH;;AACD,QAAM,WAAW,GAAG,KAAK,YAAL,CAAkB,YAAlB,CAA+B,QAAnD;;AACA,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,WAAW,CAAC,MAAhC,EAAwC,CAAC,EAAzC,EAA6C;AACzC,UAAM,KAAK,GAAG,WAAW,CAAC,CAAD,CAAX,CAAe,KAA7B;;AACA,UAAI,CAAC,KAAL,EAAY;AACR;AACH;;AACD,MAAA,UAAU,IAAI,UAAU,CAAC,KAAK,CAAC,QAAN,EAAD,CAAxB;AACH;;AACD,IAAA,UAAU,GAAG,IAAI,CAAC,KAAL,CAAW,UAAX,CAAb;;AACA,QAAI,KAAK,OAAT,EAAkB;AACd,WAAK,OAAL,CAAa,QAAb,CAAsB,UAAtB;AACH;;AACD,QAAI,KAAK,OAAT,EAAkB;AACd,WAAK,OAAL,CAAa,QAAb,CAAsB,UAAtB;AACH;;AACD,QAAI,KAAK,EAAL,CAAQ,KAAZ,EAAmB;AACf,WAAK,EAAL,CAAQ,KAAR,CAAc,KAAd,CAAoB,KAApB,GAA4B,UAAU,GAAG,IAAzC;AACH;AACJ,GAvBO;;AAyBA,EAAA,IAAA,CAAA,SAAA,CAAA,QAAA,GAAR,UAAiB,KAAjB,EAAgC,QAAhC,EAAkD,QAAlD,EAAoE,WAApE,EAAsF,GAAtF,EAAkG;AAC9F,SAAK,eAAL;;AACA,QAAI,KAAK,KAAL,CAAW,cAAf,EAA+B;AAC3B,WAAK,KAAL,CAAW,cAAX,CAA0B,IAA1B,CACI,SADJ,EAEI;AACI,QAAA,OAAO,EAAE,KAAK,OADlB;AAEI,QAAA,KAAK,EAAE,KAFX;AAGI,QAAA,WAAW,EAAE,WAHjB;AAII,QAAA,QAAQ,EAAE,QAJd;AAKI,QAAA,QAAQ,EAAE,QALd;AAMI,QAAA,GAAG,EAAE,GANT;AAOI,QAAA,MAAM,EAAE;AAPZ,OAFJ;AAYH;AACJ,GAhBO;;AAkBA,EAAA,IAAA,CAAA,SAAA,CAAA,WAAA,GAAR,UAAoB,cAApB,EAAuD,UAAvD,EAAyE;AAAzE,QAAA,KAAA,GAAA,IAAA;;AACI,QAAM,QAAQ,GAAG,eAAe,CAAC,WAAhB,CAA4B,KAAK,kBAAjC,CAAjB;AACA,SAAK,QAAL,GAAgB,WAAW,CAAC,cAAD,EAAiB,KAAK,OAAtB,EAA+B;AAAE,MAAA,MAAM,EAAE,CAAV;AAAa,MAAA,QAAQ,EAAA;AAArB,KAA/B,CAA3B;;AAEA,QAAI,KAAK,QAAL,CAAc,MAAd,KAAyB,CAA7B,EAAgC;AAC5B,WAAK,QAAL,GAAgB,mBAAmB,CAAC,KAAK,KAAL,CAAW,IAAZ,EAAkB,KAAK,KAAL,CAAW,KAA7B,EAAoC,KAAK,KAAL,CAAW,WAA/C,EAA4D;AAAE,QAAA,MAAM,EAAE,CAAV;AAAa,QAAA,QAAQ,EAAA;AAArB,OAA5D,CAAnC;AACH;;AAED,QAAI,KAAK,KAAL,CAAW,aAAf,EAA8B;AAC1B,WAAK,QAAL,CAAc,MAAd,CAAqB,UAAA,CAAA,EAAC;AAAI,eAAA,CAAC,CAAC,KAAF,KAAY,KAAI,CAAC,KAAL,CAAZ,aAAA;AAAoC,OAA9D,EAAgE,OAAhE,CAAwE,UAAC,CAAD,EAAE;AACtE,QAAA,CAAC,CAAC,KAAF,GAAU,CAAC,CAAC,KAAF,IAAW,MAArB;AACA,QAAA,CAAC,CAAC,IAAF,GAAS,CAAC,CAAC,IAAF,IAAU,iBAAnB;AACA,QAAA,CAAC,CAAC,UAAF,GAAe,CAAC,CAAC,UAAF,IAAgB,uBAA/B;AACH,OAJD;AAKH;;AAED,QAAM,mBAAmB,GAAwB;AAC7C,MAAA,EAAE,EAAE,EADyC;AAE7C,MAAA,SAAS,EAAE,IAFkC;AAG7C,MAAA,KAAK,EAAE,MAHsC;AAI7C,MAAA,KAAK,EAAE,GAJsC;AAK7C,MAAA,gBAAgB,EAAE,CAAC,CAL0B;AAM7C,MAAA,UAAU,EAAE,CAAC,CANgC;AAO7C,MAAA,QAAQ,EAAE,EAPmC;AAQ7C,MAAA,WAAW,EAAE,CAAC,CAR+B;AAS7C,MAAA,KAAK,EAAE,CATsC;AAU7C,MAAA,OAAO,EAAE,CAVoC;AAW7C,MAAA,OAAO,EAAE,CAXoC;AAY7C,MAAA,IAAI,EAAE,CAZuC;AAa7C,MAAA,KAAK,EAAE,CAbsC;AAc7C,MAAA,KAAK,EAAE,CAdsC;AAe7C,MAAA,WAAW,EAAE,KAfgC;AAgB7C,MAAA,eAAe,EAAE,CAhB4B;AAiB7C,MAAA,YAAY,EAAE;AAjB+B,KAAjD;AAmBA,QAAI,iBAAiB,GAAG,CAAxB;;AACA,QAAI,KAAK,KAAL,CAAW,WAAX,IAA2B,KAAK,KAAL,CAAW,cAAtC,IAAyD,KAAK,KAAL,CAAW,MAAxE,EAAgF;AAC5E,WAAK,QAAL,CAAc,OAAd,CAAqB,QAAA,CAAA,EAAA,EACd,mBADc,EACK;AACtB,QAAA,IAAI,EAAE,iBADgB;AAEtB,QAAA,KAAK,EAAE,KAAK,KAAL,CAAW,WAFI;AAGtB,QAAA,eAAe,EAAE,2BAHK;AAItB,QAAA,EAAE,EAAE,eAAe,CAAC,qBAAhB,CAAsC,KAAG,KAAK,QAAL,CAAc,MAAvD,EAAiE,QAAjE,EAA2E,QAA3E;AAJkB,OADL,CAArB;;AAOA,MAAA,iBAAiB;AACpB;;AAED,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,UAApB,EAAgC,CAAC,EAAjC,EAAqC;AACjC,WAAK,QAAL,CAAc,OAAd,CAAqB,QAAA,CAAA,EAAA,EACd,mBADc,EACK;AACtB,QAAA,YAAY,EAAE,KADQ;AAEtB,QAAA,IAAI,EAAE,aAFgB;AAGtB,QAAA,KAAK,EAAE;AAHe,OADL,CAArB;;AAMA,MAAA,iBAAiB;AACpB;;AAED,SAAK,QAAL,CAAc,KAAd,CAAoB,iBAApB,EAAuC,OAAvC,CAA+C,UAAA,CAAA,EAAC;AAAI,aAAA,CAAC,CAAC,WAAF,IAAiB,CAAjB,KAAuB,CAAC,CAAC,WAAF,IAAvB,iBAAA,CAAA;AAA0D,KAA9G;;AAEA,SAAK,WAAL,GAAmB,UAAU,CAAC,KAAK,QAAN,CAA7B;AAEA,SAAK,YAAL,CAAkB,OAAlB,GAA4B,KAAK,QAAjC;AACA,SAAK,SAAL,CAAe,OAAf,GAAyB,KAAK,QAA9B;AACH,GA/DO;;AAuEA,EAAA,IAAA,CAAA,SAAA,CAAA,YAAA,GAAR,YAAA;AACI,WAAO;AACH,MAAA,MAAM,EAAE,KAAK,KAAL,CAAW,MADhB;AAEH,MAAA,IAAI,EAAE,KAAK,KAAL,CAAW,IAFd;AAGH,MAAA,IAAI,EAAE,KAAK,KAAL,CAAW,IAHd;AAIH,MAAA,IAAI,EAAG,KAAK,KAAL,CAAW,IAAX,KAAoB,SAApB,GAAgC,KAAK,KAAL,CAAW,IAA3C,GAAkD,KAAK,KAAL,CAAW,QAJjE;AAKH,MAAA,KAAK,EAAE,KAAK,KAAL,CAAW;AALf,KAAP;AAOH,GARO;;AAUA,EAAA,IAAA,CAAA,SAAA,CAAA,YAAA,GAAR,UAAqB,cAArB,EAA8D;AAC1D,WAAO;AACH,MAAA,WAAW,EAAE,cAAc,IAAI,cAAc,CAAC,WAD3C;AAEH,MAAA,cAAc,EAAE,cAFb;AAGH,MAAA,MAAM,EAAE;AAHL,KAAP;AAKH,GANO;AA7pCR;;AAEG;;;AACI,EAAA,IAAA,CAAA,WAAA,GAAc,gBAAd;AACP;;AAEG;;AACI,EAAA,IAAA,CAAA,YAAA,GAAe,CAClB;AADkB,GAAf;AAIP;;AAEG;;AACI,EAAA,IAAA,CAAA,SAAA,GAAY;AACf,IAAA,IAAI,EAAE,SAAS,CAAC,SAAV,CAAoB,CACtB,SAAS,CAAC,KADY,EAEtB,SAAS,CAAC,KAAV,CAAgB;AACZ,MAAA,IAAI,EAAE,SAAS,CAAC,KADJ;AAEZ,MAAA,KAAK,EAAE,SAAS,CAAC;AAFL,KAAhB,CAFsB,CAApB,CADS;AAQf,IAAA,QAAQ,EAAE,SAAS,CAAC,SAAV,CAAoB,CAC1B,SAAS,CAAC,IADgB,EAE1B,SAAS,CAAC,KAAV,CAAgB;AACZ,MAAA,IAAI,EAAE,SAAS,CAAC,KAAV,CAAgB,CAAC,QAAD,EAAW,UAAX,CAAhB,CADM;AAEZ,MAAA,WAAW,EAAE,SAAS,CAAC;AAFX,KAAhB,CAF0B,CAApB,CARK;AAef,IAAA,YAAY,EAAE,SAAS,CAAC,IAfT;AAgBf,IAAA,IAAI,EAAE,SAAS,CAAC,KAhBD;AAiBf,IAAA,UAAU,EAAE,SAAS,CAAC,IAjBP;AAkBf,IAAA,MAAM,EAAE,SAAS,CAAC,GAlBH;AAmBf,IAAA,cAAc,EAAE,SAAS,CAAC,IAnBX;AAoBf,IAAA,QAAQ,EAAE,SAAS,CAAC,SAAV,CAAoB,CAC1B,SAAS,CAAC,IADgB,EAE1B,SAAS,CAAC,KAAV,CAAgB;AACZ,MAAA,WAAW,EAAE,SAAS,CAAC,MADX;AAEZ,MAAA,IAAI,EAAE,SAAS,CAAC,IAFJ;AAGZ,MAAA,IAAI,EAAE,SAAS,CAAC,KAAV,CAAgB,CAAC,SAAD,EAAY,OAAZ,CAAhB,CAHM;AAIZ,MAAA,SAAS,EAAE,SAAS,CAAC,SAAV,CAAoB,CAAC,SAAS,CAAC,IAAX,EAAiB,SAAS,CAAC,OAAV,CAAkB,SAAS,CAAC,MAA5B,CAAjB,CAApB,CAJC;AAKZ,MAAA,YAAY,EAAE,SAAS,CAAC;AALZ,KAAhB,CAF0B,CAApB,CApBK;AA8Bf,IAAA,QAAQ,EAAE,SAAS,CAAC,MA9BL;AA+Bf,IAAA,YAAY,EAAE,SAAS,CAAC,IA/BT;AAgCf,IAAA,KAAK,EAAE,SAAS,CAAC,MAhCF;AAiCf,IAAA,IAAI,EAAE,SAAS,CAAC,MAjCD;AAkCf,IAAA,IAAI,EAAE,SAAS,CAAC,MAlCD;AAmCf,IAAA,WAAW,EAAE,SAAS,CAAC,IAnCR;AAoCf,IAAA,cAAc,EAAE,SAAS,CAAC,IApCX;AAqCf,IAAA,WAAW,EAAE,SAAS,CAAC,MArCR;AAsCf,IAAA,aAAa,EAAE,SAAS,CAAC,MAtCV;AAuCf,IAAA,iBAAiB,EAAE,SAAS,CAAC,IAvCd;AAwCf,IAAA,uBAAuB,EAAE,SAAS,CAAC,IAxCpB;AAyCf,IAAA,SAAS,EAAE,SAAS,CAAC,IAzCN;AA0Cf,IAAA,WAAW,EAAE,SAAS,CAAC,IA1CR;AA2Cf,IAAA,KAAK,EAAE,SAAS,CAAC,GA3CF;AA4Cf,IAAA,SAAS,EAAE,SAAS,CAAC,SAAV,CAAoB,CAC3B,SAAS,CAAC,IADiB,EAE3B,SAAS,CAAC,KAAV,CAAgB;AACZ,MAAA,OAAO,EAAE,SAAS,CAAC,IADP;AAEZ,MAAA,MAAM,EAAE,SAAS,CAAC,KAAV,CAAgB,CAAC,QAAD,EAAW,SAAX,EAAsB,MAAtB,CAAhB;AAFI,KAAhB,CAF2B,CAApB,CA5CI;AAmDf,IAAA,aAAa,EAAE,SAAS,CAAC,IAnDV;AAoDf,IAAA,UAAU,EAAE,SAAS,CAAC,IApDP;AAqDf,IAAA,gBAAgB,EAAE,SAAS,CAAC,IArDb;AAsDf,IAAA,YAAY,EAAE,SAAS,CAAC,IAtDT;AAuDf,IAAA,SAAS,EAAE,SAAS,CAAC,MAvDN;AAwDf,IAAA,UAAU,EAAE,SAAS,CAAC,KAAV,CAAgB,CAAC,MAAD,EAAS,YAAT,EAAuB,SAAvB,CAAhB,CAxDG;AAyDf,IAAA,SAAS,EAAE,SAAS,CAAC,MAzDN;AA0Df,IAAA,MAAM,EAAE,SAAS,CAAC,GA1DH;AA2Df,IAAA,KAAK,EAAE,SAAS,CAAC,MA3DF;AA4Df,IAAA,iBAAiB,EAAE,SAAS,CAAC,IA5Dd;AA6Df,IAAA,cAAc,EAAE,SAAS,CAAC,IA7DX;AA8Df,IAAA,eAAe,EAAE,SAAS,CAAC,IA9DZ;AA+Df,IAAA,WAAW,EAAE,SAAS,CAAC,MA/DR;AAgEf,IAAA,WAAW,EAAE,SAAS,CAAC;AAhER,GAAZ;AAmEP;;AACO,EAAA,IAAA,CAAA,WAAA,GAAc,8BAAd;AAslCX,SAAA,IAAA;AAAC,CAzqCD,CAA0B,KAAK,CAAC,SAAhC,CAAA;;SAAa,I","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport * as PropTypes from 'prop-types';\nimport { dispatchEvent, classNames, getter, guid } from '@progress/kendo-react-common';\nimport { tableColumnsVirtualization, Pager, mapColumns, isRtl, tableKeyboardNavigation, TableKeyboardNavigationContext, tableKeyboardNavigationScopeAttributes, tableKeyboardNavigationTools as navigationTools, tableKeyboardNavigationBodyAttributes, getSelectionOptions, TableSelection } from '@progress/kendo-react-data-tools';\nimport { GridSelectionCell } from './cells/GridSelectionCell';\nimport { GridHierarchyCell } from './cells/GridHierarchyCell';\nimport { GridEditCell } from './cells/GridEditCell';\nimport { Header } from './header/Header';\nimport { HeaderRow } from './header/HeaderRow';\nimport { FilterRow } from './header/FilterRow';\nimport { GroupPanel } from './header/GroupPanel';\nimport { Footer } from './footer/Footer';\nimport { VirtualScroll } from './VirtualScroll';\nimport { ColumnResize } from './drag/ColumnResize';\nimport { CommonDragLogic } from './drag/CommonDragLogic';\nimport { DragClue } from './drag/DragClue';\nimport { DropClue } from './drag/DropClue';\nimport { getNestedValue, flatData, readColumns, autoGenerateColumns } from './utils/index';\nimport { GridCell } from './cells/GridCell';\nimport { GridGroupCell } from './cells/GridGroupCell';\nimport { GridRow } from './rows/GridRow';\nimport { GridHeaderSelectionCell } from './header/GridHeaderSelectionCell';\nimport { GridNoRecords } from './GridNoRecords';\nimport { operators } from './filterCommon';\nimport { FooterRow } from './footer/FooterRow';\nimport { normalize } from './paging/GridPagerSettings';\nimport { pagerMessagesMap } from './messages';\nimport { validatePackage } from '@progress/kendo-licensing';\nimport { packageMetadata } from './package-metadata';\nimport { GridDetailCell } from './cells/GridDetailCell';\nimport { GridDetailHierarchyCell } from './cells/GridDetailHierarchyCell';\n/**\n * Represents the [KendoReact Grid component]({% slug overview_grid %}).\n *\n * @example\n * ```jsx\n * class App extends React.Component {\n *    constructor(props) {\n *        super(props);\n *        this.state = {\n *            data: [\n *                { 'foo': 'A1', 'bar': 'B1' },\n *                { 'foo': 'A2', 'bar': 'B2' },\n *                { 'foo': 'A3', 'bar': 'B2' }\n *            ]\n *        };\n *    }\n *    render() {\n *        return (\n *            <Grid\n *                data={this.state.data}\n *                reorderable={true}\n *            >\n *                <GridColumn field=\"foo\" />\n *                <GridColumn field=\"bar\" />\n *            </Grid>\n *        );\n *    }\n * }\n * ReactDOM.render(<App />, document.querySelector('my-app'));\n * ```\n */\nvar Grid = /** @class */ (function (_super) {\n    __extends(Grid, _super);\n    function Grid(props) {\n        var _this = _super.call(this, props) || this;\n        _this._columns = [];\n        _this._columnsMap = [[]];\n        _this.contextStateRef = { current: undefined };\n        _this.navigationStateRef = { current: undefined };\n        _this.element = null;\n        _this._header = null;\n        _this._footer = null;\n        _this.forceUpdateTimeout = undefined;\n        _this.isRtl = false;\n        _this._gridId = guid();\n        /**\n         * Method to allow the scroll to be set to a specific row index.\n         *\n         * @param options - Object, containing the rowIndex to which is going to be scrolled.\n         */\n        _this.scrollIntoView = function (options) {\n            if (!_this.vs.container || _this.props.scrollable === 'none') {\n                return;\n            }\n            var rowIndex = options.rowIndex;\n            if (_this.props.scrollable === 'virtual') {\n                _this.vs.askedSkip = rowIndex;\n                _this.vs.container.scroll(0, Math.round(_this.vs.askedSkip / _this.vs.total * _this.vs.container.scrollHeight));\n            }\n            else if (_this.element) {\n                var selectedRow = rowIndex < 1\n                    ? _this.element.querySelector(\"tbody > tr:nth-child(\" + 1 + \")\")\n                    : _this.element.querySelector(\"tbody > tr:nth-child(\" + rowIndex + \")\");\n                if (selectedRow) {\n                    selectedRow.scrollIntoView(true);\n                }\n            }\n        };\n        _this.scrollHandler = function (event) {\n            if (event.target !== event.currentTarget) {\n                return;\n            }\n            clearTimeout(_this.forceUpdateTimeout);\n            if (_this.props.columnVirtualization && !_this.vs.scrollableVirtual) {\n                _this.forceUpdateTimeout = window.setTimeout(function () { _this.forceUpdate(); }, 0);\n            }\n            if (_this._header) {\n                _this._header.setScrollLeft(event.currentTarget.scrollLeft);\n            }\n            if (_this._footer) {\n                _this._footer.setScrollLeft(event.currentTarget.scrollLeft);\n            }\n            if (_this.vs) {\n                _this.vs.scrollHandler(event);\n            }\n            dispatchEvent(_this.props.onScroll, event, _this, undefined);\n        };\n        _this.onKeyDown = function (event) {\n            tableKeyboardNavigation.onKeyDown(event, {\n                contextStateRef: _this.contextStateRef,\n                navigationStateRef: _this.navigationStateRef,\n                onNavigationAction: _this.onNavigationAction\n            });\n            if (_this.props.onKeyDown) {\n                var _a = getSelectionOptions(_this.props.selectable), mode = _a.mode, cell = _a.cell;\n                _this.props.onKeyDown.call(undefined, __assign({ dataItems: _this.getLeafDataItems(), mode: mode,\n                    cell: cell, componentId: _this._gridId, selectedField: _this.props.selectedField }, _this.getArguments(event)));\n            }\n        };\n        _this.onFocus = function (event) {\n            tableKeyboardNavigation.onFocus(event, {\n                contextStateRef: _this.contextStateRef\n            });\n        };\n        _this.onNavigationAction = function (options) {\n            if (_this.props.onNavigationAction) {\n                _this.props.onNavigationAction.call(undefined, __assign({ focusElement: options.focusElement }, _this.getArguments(options.event)));\n            }\n        };\n        _this.rowClick = function (e, item) {\n            if (_this.props.onRowClick && e.target.nodeName === 'TD') {\n                _this.props.onRowClick.call(undefined, __assign({ dataItem: item.dataItem }, _this.getArguments(e)));\n            }\n        };\n        _this.rowDblClick = function (e, item) {\n            if (_this.props.onRowDoubleClick && e.target.nodeName === 'TD') {\n                _this.props.onRowDoubleClick.call(undefined, __assign({ dataItem: item.dataItem }, _this.getArguments(e)));\n            }\n        };\n        _this.itemChange = function (event) {\n            var itemChange = _this.props.onItemChange;\n            if (event.field === _this.props.expandField || _this.props.group && event.field === undefined) {\n                var expandChange = _this.props.onExpandChange;\n                if (expandChange) {\n                    expandChange.call(undefined, __assign({}, _this.getArguments(event.syntheticEvent), { dataItem: event.dataItem, dataIndex: event.dataIndex, value: event.value }));\n                }\n                return;\n            }\n            if (itemChange) {\n                itemChange.call(undefined, __assign({}, _this.getArguments(event.syntheticEvent), { dataItem: event.dataItem, field: event.field, value: event.value }));\n            }\n        };\n        _this.onHeaderSelectionChange = function (event) {\n            if (_this.props.onHeaderSelectionChange) {\n                _this.props.onHeaderSelectionChange.call(undefined, {\n                    field: event.field,\n                    nativeEvent: event.syntheticEvent && event.syntheticEvent.nativeEvent,\n                    syntheticEvent: event.syntheticEvent,\n                    target: _this,\n                    dataItems: _this.getLeafDataItems(),\n                    selectedField: _this.props.selectedField\n                });\n            }\n        };\n        _this.selectionRelease = function (event) {\n            if (_this.props.onSelectionChange) {\n                var selectionEvent = __assign({ syntheticEvent: undefined, target: _this, selectedField: _this.props.selectedField || '', componentId: _this._gridId, dataItems: _this.getLeafDataItems(), dataItem: null }, event);\n                _this.props.onSelectionChange.call(undefined, selectionEvent);\n            }\n        };\n        _this.pageChange = function (page, syntheticEvent) {\n            _this.raiseDataEvent(_this.props.onPageChange, { page: page }, { skip: page.skip, take: page.take }, syntheticEvent);\n        };\n        _this.pagerPageChange = function (event) {\n            _this.pageChange({ skip: event.skip, take: event.take }, event.syntheticEvent);\n        };\n        _this.sortChange = function (sort, syntheticEvent) {\n            _this.raiseDataEvent(_this.props.onSortChange, { sort: sort }, { sort: sort }, syntheticEvent);\n        };\n        _this.filterChange = function (filter, syntheticEvent) {\n            _this.raiseDataEvent(_this.props.onFilterChange, { filter: filter }, { filter: filter, skip: 0 }, syntheticEvent);\n        };\n        _this.groupChange = function (groups, event) {\n            var syntheticEvent = event.nativeEvent ?\n                event : { nativeEvent: event.nativeEvent || event.originalEvent };\n            _this.raiseDataEvent(_this.props.onGroupChange, { group: groups }, { group: groups, skip: 0 }, syntheticEvent);\n        };\n        _this.resolveTitle = function (field) {\n            var column = _this._columns.find(function (c) { return c.field === field; });\n            var title = column && (column.title || column.field);\n            return title === undefined ? field : title;\n        };\n        _this.getLeafDataItems = function () {\n            return _this._data.filter(function (item) { return item.rowType === 'data'; }).map(function (item) { return item.dataItem; });\n        };\n        validatePackage(packageMetadata);\n        var groupable = _this.props.groupable === true ||\n            (typeof _this.props.groupable === 'object') && _this.props.groupable.enabled !== false;\n        _this.vs = new VirtualScroll(groupable || props.rowHeight === undefined || props.rowHeight === 0);\n        _this.dragLogic = new CommonDragLogic(_this.columnReorder.bind(_this), _this.groupReorder.bind(_this), _this.columnToGroup.bind(_this));\n        _this.columnResize = new ColumnResize(_this.onResize.bind(_this));\n        tableKeyboardNavigation.onConstructor({\n            navigatable: Boolean(props.navigatable),\n            contextStateRef: _this.contextStateRef,\n            navigationStateRef: _this.navigationStateRef,\n            idPrefix: _this._gridId\n        });\n        return _this;\n    }\n    Object.defineProperty(Grid.prototype, \"columns\", {\n        /* eslint-disable max-len */\n        /**\n         * A getter of the current columns. Gets the current column width or current columns, or any other [`GridColumnProps`]({% slug api_grid_gridcolumnprops %}) for each defined column. Can be used on each Grid instance. To obtain the instance of the rendered Grid, use the `ref` callback. The following example demonstrates how to reorder the columns by dragging their handlers and check the properties afterwards. You can check the result in the browser console.\n         *\n         * @example\n         * ```jsx\n         * class App extends React.Component {\n         *     constructor(props) {\n         *         super(props);\n         *         this.state = {\n         *             data: [\n         *                 { 'foo': 'A1', 'bar': 'B1' },\n         *                 { 'foo': 'A2', 'bar': 'B2' },\n         *                 { 'foo': 'A3', 'bar': 'B2' }\n         *             ]\n         *         };\n         *         this.grid = null;\n         *     }\n         *     render() {\n         *         return (\n         *             <div>\n         *                 <Grid\n         *                     data={this.state.data}\n         *                     reorderable={true}\n         *                     ref={(g) => { this.grid = g; }}\n         *                 >\n         *                     <GridColumn field=\"foo\" />\n         *                     <GridColumn field=\"bar\" />\n         *                 </Grid>\n         *                 <button onClick={() => console.log(JSON.stringify(this.grid.columns))}>\n         *                     log current properties into browser console.\n         *                 </button>\n         *             </div>\n         *         );\n         *     }\n         * }\n         * ReactDOM.render(<App />, document.querySelector('my-app'));\n         * ```\n         */\n        // tslint:enable:max-line-length\n        get: function () {\n            var shuffledColumns = this._columns.filter(function (q) { return q.declarationIndex >= 0 && q.parentIndex === -1; });\n            var sanitize = function (columns) {\n                columns.sort(function (a, b) {\n                    return a.declarationIndex - b.declarationIndex;\n                });\n                return columns.map(function (column) {\n                    var declarationIndex = column.declarationIndex, parentIndex = column.parentIndex, depth = column.depth, colSpan = column.colSpan, rowSpan = column.rowSpan, index = column.index, kFirst = column.kFirst, children = column.children, props = __rest(column, [\"declarationIndex\", \"parentIndex\", \"depth\", \"colSpan\", \"rowSpan\", \"index\", \"kFirst\", \"children\"]);\n                    return children.length ? __assign({ children: sanitize(children) }, props) : props;\n                });\n            };\n            return sanitize(shuffledColumns);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @hidden\n     */\n    Grid.prototype.componentDidMount = function () {\n        var rtl = isRtl(this.element);\n        this.isRtl = rtl;\n        tableKeyboardNavigation.onComponentDidMount({\n            scope: this.element || undefined,\n            contextStateRef: this.contextStateRef,\n            navigationStateRef: this.navigationStateRef\n        });\n        if (this.isRtl) {\n            this.forceUpdate();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getSnapshotBeforeUpdate = function () {\n        tableKeyboardNavigation.onGetSnapshotBeforeUpdate({\n            document: document,\n            contextStateRef: this.contextStateRef,\n            navigationStateRef: this.navigationStateRef\n        });\n        return null;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.componentDidUpdate = function () {\n        tableKeyboardNavigation.onComponentDidUpdate({\n            scope: this.element || undefined,\n            contextStateRef: this.contextStateRef,\n            navigationStateRef: this.navigationStateRef\n        });\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.componentWillUnmount = function () {\n        clearTimeout(this.forceUpdateTimeout);\n        this.columnResize.columns = [];\n        this.dragLogic.columns = [];\n        this._columns = [];\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.render = function () {\n        var _this = this;\n        var total = this.props.total || 0;\n        var idPrefix = navigationTools.getIdPrefix(this.navigationStateRef);\n        var propsData = [];\n        if (Array.isArray(this.props.data)) {\n            propsData = this.props.data;\n            total = total || this.props.data.length;\n        }\n        else if (this.props.data) {\n            propsData = this.props.data.data;\n            total = total || this.props.data.total;\n        }\n        var groupable = this.props.groupable === true ||\n            (typeof this.props.groupable === 'object') && this.props.groupable.enabled !== false;\n        this.columnResize.resizable = this.props.resizable || false;\n        this.dragLogic.reorderable = this.props.reorderable || false;\n        this.dragLogic.groupable = groupable;\n        var tableUserSelect = this.props.selectable && this.props.selectable.drag ? 'none' : undefined;\n        if (total !== this.vs.total) {\n            this.vs.reset();\n            this.vs = new VirtualScroll(groupable || this.props.rowHeight === undefined || this.props.rowHeight === 0);\n        }\n        this.vs.fixedScroll = this.props.fixedScroll || false;\n        this.vs.PageChange = this.pageChange;\n        this.vs.realSkip = this.props.skip || 0;\n        this.vs.pageSize = (this.props.take !== undefined ? this.props.take : this.props.pageSize) || 0;\n        this.vs.scrollableVirtual = (this.props.scrollable === 'virtual');\n        this.vs.total = total;\n        this.vs.propsSkip = (this.props.skip || 0) + (this.props.scrollable === 'virtual' ?\n            this.vs.topCacheCount + (this.vs.attendedSkip - (this.props.skip || 0)) : 0);\n        if (this.props.rowHeight !== undefined && this.props.rowHeight > 0 && !groupable) {\n            this.vs.containerHeight = Math.min(1533915, this.props.rowHeight * (total || 0));\n        }\n        else {\n            this.vs.containerHeight = 1533915;\n        }\n        var groupingFooter = (typeof this.props.groupable === 'object') && this.props.groupable.footer || 'none';\n        this._data = [];\n        var resolvedGroupsCount = flatData(this._data, propsData, groupingFooter, { index: this.props.skip || 0 }, this.props.group !== undefined, this.props.expandField);\n        var children = React.Children.toArray(this.props.children);\n        this.initColumns(children.filter(function (child) { return child &&\n            child.type.displayName === 'KendoReactGridColumn'; }), resolvedGroupsCount);\n        var toolbar = children.filter(function (child) { return child &&\n            child.type.displayName === 'KendoReactGridToolbar'; });\n        var noRecords = children.filter(function (child) { return child &&\n            child.type.displayName === 'KendoReactGridNoRecords'; });\n        var columnsWithColGroup = this._columns.filter(function (c) { return c.children.length === 0; });\n        var groupingPanel = groupable && (React.createElement(GroupPanel, { group: this.props.group || [], groupChange: this.groupChange, pressHandler: this.dragLogic.pressHandler, dragHandler: this.dragLogic.dragHandler, releaseHandler: this.dragLogic.releaseHandler, refCallback: this.dragLogic.refGroupPanelDiv, resolveTitle: this.resolveTitle }));\n        var clues = (this.dragLogic.reorderable || this.dragLogic.groupable) && document && document.body && [\n            ReactDOM.createPortal(React.createElement(DropClue, { ref: this.dragLogic.refDropElementClue }), document.body),\n            ReactDOM.createPortal(React.createElement(DragClue, { ref: this.dragLogic.refDragElementClue }), document.body)\n        ];\n        var header = (React.createElement(Header, { columnResize: this.columnResize, staticHeaders: this.props.scrollable !== 'none', scrollableDataElement: function () { return _this.vs.container; }, draggable: this.props.reorderable || groupable, ref: function (h) {\n                _this._header = h;\n            }, headerRow: React.createElement(HeaderRow, { sort: this.props.sort, sortable: this.props.sortable, sortChange: this.sortChange, filter: this.props.filter, filterable: this.props.filterable, filterOperators: this.props.filterOperators || operators, filterChange: this.filterChange, columnMenu: this.props.columnMenu, selectionChange: this.onHeaderSelectionChange, columns: this._columns, columnResize: this.columnResize, pressHandler: this.dragLogic.pressHandler, dragHandler: this.dragLogic.dragHandler, releaseHandler: this.dragLogic.releaseHandler, columnsMap: this._columnsMap, cellRender: this.props.headerCellRender, isRtl: this.isRtl }), filterRow: this.props.filterable && React.createElement(FilterRow, { columns: this._columns, filter: this.props.filter, filterOperators: this.props.filterOperators || operators, filterChange: this.filterChange, sort: this.props.sort, cellRender: this.props.filterCellRender, isRtl: this.isRtl, ariaRowIndex: this._columnsMap.length + 1 }) || undefined, cols: columnsWithColGroup.map(function (column, index) { return (React.createElement(\"col\", { key: index.toString(), width: column.width !== undefined ?\n                    Math.floor(parseFloat(column.width.toString())) + 'px' : undefined })); }) }));\n        var scrollLeft = this.vs && this.vs.container && this.vs.container.scrollLeft || 0;\n        var tableWidth = parseFloat(((this.props.style || {}).width || '').toString());\n        var _a = tableColumnsVirtualization({\n            enabled: this.props.columnVirtualization,\n            columns: this._columns,\n            tableViewPortWidth: tableWidth,\n            scrollLeft: scrollLeft\n        }), colSpans = _a.colSpans, isColHidden = _a.hiddenColumns;\n        var dataRow = function (item, rowId, rowDataIndex) {\n            var isInEdit = false;\n            var selectedValue = _this.props.selectedField ? getNestedValue(_this.props.selectedField, item.dataItem) : undefined;\n            return {\n                row: _this._columns.map(function (column, columnIndex) {\n                    if (isColHidden[columnIndex]) {\n                        return null;\n                    }\n                    var className = \"\" + (column.className ? column.className + ' ' : '')\n                        + (\"\" + (column.locked ? 'k-grid-content-sticky' : ''));\n                    var style = column.left !== undefined\n                        ? !_this.isRtl\n                            ? { left: column.left, right: column.right }\n                            : { left: column.right, right: column.left }\n                        : {};\n                    var cellProps = {\n                        id: navigationTools.generateNavigatableId(rowId + \"-\" + String(columnIndex), idPrefix),\n                        colSpan: colSpans[columnIndex],\n                        dataItem: item.dataItem,\n                        field: column.field,\n                        editor: column.editor,\n                        format: column.format,\n                        className: className,\n                        render: _this.props.cellRender,\n                        onChange: _this.itemChange,\n                        selectionChange: (_this.props.onSelectionChange) ?\n                            (function (e) { _this.selectionChange({ event: e, dataItem: item.dataItem, dataIndex: rowDataIndex, columnIndex: columnIndex }); }) :\n                            undefined,\n                        columnIndex: columnIndex,\n                        columnsCount: columnsWithColGroup.length,\n                        rowType: item.rowType,\n                        level: item.level,\n                        expanded: item.expanded,\n                        dataIndex: item.dataIndex,\n                        style: style,\n                        ariaColumnIndex: column.ariaColumnIndex,\n                        isSelected: Array.isArray(selectedValue) && selectedValue.indexOf(columnIndex) > -1\n                    };\n                    var currentColumnIsInEdit = false;\n                    if (column.editable && _this.props.editField) {\n                        var inEdit = getNestedValue(_this.props.editField, item.dataItem);\n                        if (inEdit === true || inEdit === column.field) {\n                            isInEdit = true;\n                            currentColumnIsInEdit = true;\n                        }\n                    }\n                    if (column.cell) {\n                        return React.createElement(column.cell, __assign({ key: columnIndex }, cellProps));\n                    }\n                    return currentColumnIsInEdit\n                        ? React.createElement(GridEditCell, __assign({ key: columnIndex }, cellProps))\n                        : React.createElement(GridCell, __assign({ key: columnIndex }, cellProps));\n                }),\n                isInEdit: isInEdit,\n                isSelected: typeof selectedValue === 'boolean' && selectedValue\n            };\n        };\n        var hiddenRows = 0;\n        if (this.props.scrollable === 'virtual') {\n            for (var i = 0; i < this.vs.topCacheCount + this.vs.attendedSkip - (this.props.skip || 0); i++) {\n                var item = this._data.shift();\n                if (item) {\n                    this._data.push(item);\n                    hiddenRows++;\n                    if (item.rowType === 'groupHeader') {\n                        i--;\n                    }\n                }\n                else {\n                    break;\n                }\n            }\n        }\n        var hidden = function (index) {\n            return (index >= _this._data.length - hiddenRows);\n        };\n        var absoluteDataIndex = this.vs.propsSkip || 0;\n        var body = [];\n        var rowIndexStart = this._columnsMap.length + (this.props.filterable ? 1 : 0) + 1;\n        var currentAriaRowIndex;\n        if (this._data.length) {\n            var dataIndex_1 = -1;\n            var detailRowCount_1 = 0;\n            this._data.forEach(function (item, rowIndex) {\n                if (item.rowType === 'data') {\n                    absoluteDataIndex++;\n                    dataIndex_1++;\n                }\n                var isAlt = absoluteDataIndex % 2 === 0;\n                var dataItemKey = _this.props.dataItemKey && getter(_this.props.dataItemKey)(item.dataItem);\n                var absoluteIndex = rowIndex + (_this.vs.propsSkip || 0);\n                var rowId = dataItemKey ? dataItemKey : 'ai' + absoluteIndex;\n                var detailRowId = rowId + '_1';\n                var gridRow = dataRow(item, rowId, dataIndex_1);\n                currentAriaRowIndex = absoluteIndex + rowIndexStart + detailRowCount_1;\n                body.push((React.createElement(GridRow, { key: rowId, dataItem: item.dataItem, isAltRow: isAlt, isInEdit: gridRow.isInEdit, rowType: item.rowType, isHidden: hidden(rowIndex), onClick: function (e) { return _this.rowClick(e, item); }, onDoubleClick: function (e) { return _this.rowDblClick(e, item); }, selectedField: _this.props.selectedField, rowHeight: _this.props.rowHeight, render: _this.props.rowRender, ariaRowIndex: currentAriaRowIndex, dataIndex: dataIndex_1, isSelected: gridRow.isSelected }, gridRow.row)));\n                if (_this.props.detail && item.rowType === 'data' && item.expanded) {\n                    var detailColspan = (columnsWithColGroup.length\n                        - (_this.props.expandField ? 1 : 0)\n                        - (_this.props.group ? _this.props.group.length : 0)) || 1;\n                    detailRowCount_1++;\n                    currentAriaRowIndex = absoluteIndex + rowIndexStart + detailRowCount_1;\n                    body.push((React.createElement(\"tr\", { key: detailRowId, className: isAlt ? 'k-detail-row k-alt' : 'k-detail-row', style: { visibility: hidden(rowIndex) ? 'hidden' : '' }, role: \"row\", \"aria-rowindex\": currentAriaRowIndex },\n                        _this.props.group && _this.props.group.map(function (group, idx) {\n                            return (React.createElement(GridGroupCell, { id: '', dataIndex: item.dataIndex, field: group.field, dataItem: item.dataItem, key: idx, style: {}, ariaColumnIndex: 1 + idx, isSelected: false }));\n                        }),\n                        _this.props.expandField &&\n                            React.createElement(GridDetailHierarchyCell, { id: navigationTools.generateNavigatableId(detailRowId + \"-dhcell\", idPrefix) }),\n                        React.createElement(GridDetailCell, { dataItem: item.dataItem, dataIndex: item.dataIndex, colSpan: detailColspan, ariaColIndex: 2 + (_this.props.group ? _this.props.group.length : 0), detail: _this.props.detail, id: navigationTools.generateNavigatableId(detailRowId + \"-dcell\", idPrefix) }))));\n                }\n            });\n        }\n        else {\n            body.push((React.createElement(\"tr\", { key: \"no-records\", className: \"k-grid-norecords\", \"aria-rowindex\": rowIndexStart },\n                React.createElement(\"td\", { colSpan: columnsWithColGroup.length }, noRecords.length ? noRecords : React.createElement(GridNoRecords, null)))));\n        }\n        var pagerProps = __assign({ className: 'k-grid-pager', onPageChange: this.pagerPageChange, total: total, skip: this.vs.propsSkip || 0, take: (this.props.take !== undefined ? this.props.take : this.props.pageSize) || 10, messagesMap: pagerMessagesMap }, (normalize(this.props.pageable || {})));\n        var pager = this.props.pager ? React.createElement(this.props.pager, __assign({}, pagerProps)) : React.createElement(Pager, __assign({}, pagerProps));\n        var sorted = function (field) {\n            return _this.props.sort && _this.props.sort.filter(function (descriptor) { return descriptor.field === field; }).length > 0;\n        };\n        var footer = this._columns.some(function (c) { return Boolean(c.footerCell); }) ? (React.createElement(Footer, { columnResize: this.columnResize, staticHeaders: this.props.scrollable !== 'none', ref: function (f) { return _this._footer = f; }, row: React.createElement(FooterRow, { columns: this._columns, isRtl: this.isRtl, ariaRowIndex: currentAriaRowIndex + 1 }), cols: columnsWithColGroup.map(function (column, index) { return (React.createElement(\"col\", { key: index.toString(), width: column.width !== undefined ?\n                    Math.floor(parseFloat(column.width.toString())) + 'px' : undefined })); }) })) : null;\n        var colGroups = (React.createElement(\"colgroup\", { ref: function (c) {\n                _this.columnResize.colGroupMain = c;\n            }, role: \"presentation\" }, columnsWithColGroup.map(function (column, index) { return (React.createElement(\"col\", { key: index.toString(), className: sorted(column.field) ? 'k-sorted' : undefined, width: column.width !== undefined ?\n                Math.floor(parseFloat(column.width.toString())) + 'px' : undefined })); })));\n        if (this.props.scrollable === 'none') {\n            return (React.createElement(TableKeyboardNavigationContext.Provider, { value: this.contextStateRef.current },\n                React.createElement(\"div\", __assign({ style: this.props.style, className: classNames('k-widget k-grid', this.props.className), \"aria-colcount\": columnsWithColGroup.length, \"aria-rowcount\": total, ref: function (el) { _this.element = el; }, onKeyDown: this.onKeyDown, onFocus: this.onFocus }, tableKeyboardNavigationScopeAttributes),\n                    toolbar,\n                    groupingPanel,\n                    React.createElement(TableSelection, { selectable: this.props.selectable, onRelease: this.selectionRelease, childRef: function (table) {\n                            _this.vs.table = table;\n                            _this.resetTableWidth();\n                        } },\n                        React.createElement(\"table\", { style: { userSelect: tableUserSelect } },\n                            colGroups,\n                            header,\n                            React.createElement(\"tbody\", __assign({}, tableKeyboardNavigationBodyAttributes), body),\n                            footer)),\n                    this.props.pageable && pager,\n                    clues)));\n        }\n        var wrapperStyle = this.props.style || {};\n        if (this.props.scrollable === 'virtual') {\n            // Set the default height for vs if not existing.\n            if (!wrapperStyle.height) {\n                wrapperStyle = Object.assign({}, wrapperStyle, { height: '450px' });\n            }\n        }\n        return (React.createElement(TableKeyboardNavigationContext.Provider, { value: this.contextStateRef.current },\n            React.createElement(\"div\", __assign({ style: wrapperStyle, className: classNames('k-widget k-grid', {\n                    'k-grid-virtual': this.props.scrollable === 'virtual'\n                }, this.props.className), ref: function (el) {\n                    _this.element = el;\n                    _this.resetTableWidth();\n                }, role: \"grid\", \"aria-colcount\": columnsWithColGroup.length, \"aria-rowcount\": total, onKeyDown: this.onKeyDown, onFocus: this.onFocus }, tableKeyboardNavigationScopeAttributes),\n                toolbar,\n                groupingPanel,\n                header,\n                React.createElement(\"div\", { className: \"k-grid-container\", role: \"presentation\" },\n                    React.createElement(\"div\", { ref: function (container) {\n                            _this.vs.container = container;\n                        }, className: \"k-grid-content k-virtual-content\", onScroll: this.scrollHandler, role: \"presentation\" },\n                        React.createElement(\"div\", { style: { 'position': 'relative' }, role: \"presentation\" },\n                            React.createElement(TableSelection, { selectable: this.props.selectable, onRelease: this.selectionRelease, childRef: function (table) { _this.vs.table = table; } },\n                                React.createElement(\"table\", { className: 'k-grid-table', role: \"presentation\", style: { userSelect: tableUserSelect } },\n                                    colGroups,\n                                    React.createElement(\"tbody\", __assign({ ref: function (tableBody) {\n                                            _this.vs.tableBody = tableBody;\n                                        }, role: \"presentation\" }, tableKeyboardNavigationBodyAttributes), body)))),\n                        React.createElement(\"div\", { className: \"k-height-container\", role: \"presentation\" },\n                            React.createElement(\"div\", { style: this.props.scrollable === 'virtual' ?\n                                    { 'height': (this.vs.containerHeight) + 'px' } : {} })))),\n                footer,\n                this.props.pageable && pager,\n                clues)));\n    };\n    Grid.prototype.selectionChange = function (options) {\n        if (this.props.onSelectionChange) {\n            var event_1 = options.event, dataItem = options.dataItem, dataIndex = options.dataIndex, columnIndex = options.columnIndex;\n            var _a = getSelectionOptions(this.props.selectable), mode = _a.mode, cell = _a.cell;\n            var selectionEvent = __assign({}, this.getArguments(event_1.syntheticEvent), { dataItem: dataItem, startColIndex: columnIndex, endColIndex: columnIndex, startRowIndex: dataIndex, endRowIndex: dataIndex, dataItems: this.getLeafDataItems(), altKey: false, ctrlKey: false, shiftKey: false, metaKey: false, mode: mode,\n                cell: cell, isDrag: false, componentId: this._gridId, selectedField: this.props.selectedField || '' });\n            this.props.onSelectionChange.call(undefined, selectionEvent);\n        }\n    };\n    Grid.prototype.raiseDataEvent = function (handler, data, moreData, syntheticEvent) {\n        var dataStateChange = this.props.onDataStateChange;\n        if (handler) {\n            handler.call(undefined, __assign({}, this.getArguments(syntheticEvent), data));\n        }\n        else if (dataStateChange) {\n            dataStateChange.call(undefined, __assign({}, this.getArguments(syntheticEvent), { dataState: __assign({}, this.getDataState(), moreData) }));\n        }\n    };\n    Grid.prototype.columnReorder = function (prev, next, nativeEvent) {\n        var _this = this;\n        var _a;\n        var depth = this._columns[prev].depth;\n        var end = function (index) {\n            do {\n                index++;\n            } while (index < _this._columns.length && _this._columns[index].depth > depth);\n            return index;\n        };\n        var spliced = this._columns.splice(prev, end(prev) - prev);\n        (_a = this._columns).splice.apply(_a, [prev < next ? end(next - spliced.length) : next, 0].concat(spliced));\n        this._columns.filter(function (q) { return q.declarationIndex >= 0; }).forEach(function (c, i) { return c.orderIndex = i; });\n        var eventColumnProps = this.columns;\n        this.forceUpdate();\n        if (this.props.onColumnReorder) {\n            this.props.onColumnReorder.call(undefined, {\n                target: this,\n                columns: eventColumnProps,\n                nativeEvent: nativeEvent\n            });\n        }\n    };\n    Grid.prototype.groupReorder = function (prevIndex, nextIndex, nativeEvent) {\n        if (this.props.group === undefined) {\n            return;\n        }\n        var group = this.props.group.slice();\n        group.splice.apply(group, [nextIndex, 0].concat(group.splice(prevIndex, 1)));\n        this.groupChange(group, nativeEvent);\n    };\n    Grid.prototype.columnToGroup = function (columnIndex, groupIndex, nativeEvent) {\n        var field = this._columns[columnIndex].field;\n        if (!field) {\n            return;\n        }\n        var group = (this.props.group || []).slice();\n        group.splice(groupIndex, 0, { field: field });\n        this.groupChange(group, nativeEvent);\n    };\n    Grid.prototype.resetTableWidth = function () {\n        var totalWidth = 0;\n        if (!this.columnResize.colGroupMain) {\n            return;\n        }\n        var colElements = this.columnResize.colGroupMain.children;\n        for (var i = 0; i < colElements.length; i++) {\n            var width = colElements[i].width;\n            if (!width) {\n                return;\n            }\n            totalWidth += parseFloat(width.toString());\n        }\n        totalWidth = Math.round(totalWidth);\n        if (this._header) {\n            this._header.setWidth(totalWidth);\n        }\n        if (this._footer) {\n            this._footer.setWidth(totalWidth);\n        }\n        if (this.vs.table) {\n            this.vs.table.style.width = totalWidth + 'px';\n        }\n    };\n    Grid.prototype.onResize = function (index, newWidth, oldWidth, nativeEvent, end) {\n        this.resetTableWidth();\n        if (this.props.onColumnResize) {\n            this.props.onColumnResize.call(undefined, {\n                columns: this.columns,\n                index: index,\n                nativeEvent: nativeEvent,\n                newWidth: newWidth,\n                oldWidth: oldWidth,\n                end: end,\n                target: this\n            });\n        }\n    };\n    Grid.prototype.initColumns = function (columnElements, groupCount) {\n        var _this = this;\n        var idPrefix = navigationTools.getIdPrefix(this.navigationStateRef);\n        this._columns = readColumns(columnElements, this.columns, { prevId: 0, idPrefix: idPrefix });\n        if (this._columns.length === 0) {\n            this._columns = autoGenerateColumns(this.props.data, this.props.group, this.props.expandField, { prevId: 0, idPrefix: idPrefix });\n        }\n        if (this.props.selectedField) {\n            this._columns.filter(function (c) { return c.field === _this.props.selectedField; }).forEach(function (c) {\n                c.width = c.width || '50px';\n                c.cell = c.cell || GridSelectionCell;\n                c.headerCell = c.headerCell || GridHeaderSelectionCell;\n            });\n        }\n        var defaultServiceProps = {\n            id: '',\n            resizable: true,\n            width: '32px',\n            title: ' ',\n            declarationIndex: -1,\n            orderIndex: -1,\n            children: [],\n            parentIndex: -1,\n            depth: 0,\n            colSpan: 0,\n            rowSpan: 0,\n            left: 0,\n            right: 0,\n            index: 0,\n            rightBorder: false,\n            ariaColumnIndex: 0,\n            isAccessible: true\n        };\n        var columnIndexOffset = 0;\n        if (this.props.expandField && (this.props.onExpandChange) && this.props.detail) {\n            this._columns.unshift(__assign({}, defaultServiceProps, { cell: GridHierarchyCell, field: this.props.expandField, headerClassName: 'k-hierarchy-cell k-header', id: navigationTools.generateNavigatableId(\"\" + this._columns.length, idPrefix, 'column') }));\n            columnIndexOffset++;\n        }\n        for (var i = 0; i < groupCount; i++) {\n            this._columns.unshift(__assign({}, defaultServiceProps, { isAccessible: false, cell: GridGroupCell, field: 'value' }));\n            columnIndexOffset++;\n        }\n        this._columns.slice(columnIndexOffset).forEach(function (c) { return c.parentIndex >= 0 && (c.parentIndex += columnIndexOffset); });\n        this._columnsMap = mapColumns(this._columns);\n        this.columnResize.columns = this._columns;\n        this.dragLogic.columns = this._columns;\n    };\n    Grid.prototype.getDataState = function () {\n        return {\n            filter: this.props.filter,\n            sort: this.props.sort,\n            skip: this.props.skip,\n            take: (this.props.take !== undefined ? this.props.take : this.props.pageSize),\n            group: this.props.group\n        };\n    };\n    Grid.prototype.getArguments = function (syntheticEvent) {\n        return {\n            nativeEvent: syntheticEvent && syntheticEvent.nativeEvent,\n            syntheticEvent: syntheticEvent,\n            target: this\n        };\n    };\n    /**\n     * @hidden\n     */\n    Grid.displayName = 'KendoReactGrid';\n    /**\n     * @hidden\n     */\n    Grid.defaultProps = {\n    // never use this\n    };\n    /**\n     * @hidden\n     */\n    Grid.propTypes = {\n        data: PropTypes.oneOfType([\n            PropTypes.array,\n            PropTypes.shape({\n                data: PropTypes.array,\n                total: PropTypes.number\n            })\n        ]),\n        sortable: PropTypes.oneOfType([\n            PropTypes.bool,\n            PropTypes.shape({\n                mode: PropTypes.oneOf(['single', 'multiple']),\n                allowUnsort: PropTypes.bool\n            })\n        ]),\n        onSortChange: PropTypes.func,\n        sort: PropTypes.array,\n        filterable: PropTypes.bool,\n        filter: PropTypes.any,\n        onFilterChange: PropTypes.func,\n        pageable: PropTypes.oneOfType([\n            PropTypes.bool,\n            PropTypes.shape({\n                buttonCount: PropTypes.number,\n                info: PropTypes.bool,\n                type: PropTypes.oneOf(['numeric', 'input']),\n                pageSizes: PropTypes.oneOfType([PropTypes.bool, PropTypes.arrayOf(PropTypes.number)]),\n                previousNext: PropTypes.bool\n            })\n        ]),\n        pageSize: PropTypes.number,\n        onPageChange: PropTypes.func,\n        total: PropTypes.number,\n        skip: PropTypes.number,\n        take: PropTypes.number,\n        fixedScroll: PropTypes.bool,\n        onExpandChange: PropTypes.func,\n        expandField: PropTypes.string,\n        selectedField: PropTypes.string,\n        onSelectionChange: PropTypes.func,\n        onHeaderSelectionChange: PropTypes.func,\n        resizable: PropTypes.bool,\n        reorderable: PropTypes.bool,\n        group: PropTypes.any,\n        groupable: PropTypes.oneOfType([\n            PropTypes.bool,\n            PropTypes.shape({\n                enabled: PropTypes.bool,\n                footer: PropTypes.oneOf(['always', 'visible', 'none'])\n            })\n        ]),\n        onGroupChange: PropTypes.func,\n        onRowClick: PropTypes.func,\n        onRowDoubleClick: PropTypes.func,\n        onItemChange: PropTypes.func,\n        editField: PropTypes.string,\n        scrollable: PropTypes.oneOf(['none', 'scrollable', 'virtual']),\n        rowHeight: PropTypes.number,\n        detail: PropTypes.any,\n        style: PropTypes.object,\n        onDataStateChange: PropTypes.func,\n        onColumnResize: PropTypes.func,\n        onColumnReorder: PropTypes.func,\n        dataItemKey: PropTypes.string,\n        navigatable: PropTypes.bool\n    };\n    /** @hidden */\n    Grid.contextType = TableKeyboardNavigationContext;\n    return Grid;\n}(React.Component));\nexport { Grid };\n//# sourceMappingURL=Grid.js.map"]},"metadata":{},"sourceType":"module"}