{"ast":null,"code":"import * as tslib_1 from \"tslib\";\nimport { isCompositeFilterDescriptor } from './filtering/filter-descriptor.interface';\nimport { compose, ifElse } from './funcs';\nimport { normalizeField, quote, toLower, isDateValue, isStringValue, serializeFilters, encodeValue, toUTC } from './filter-serialization.common';\nimport { normalizeFilters } from './filtering/filter.operators';\n\nvar formatDate = function formatDate(_a) {\n  var utcDates = _a.utcDates;\n  return function (_a) {\n    var field = _a.field,\n        value = _a.value,\n        ignoreCase = _a.ignoreCase,\n        operator = _a.operator;\n    return {\n      value: JSON.stringify(!utcDates ? toUTC(value) : value).replace(/\"/g, \"\"),\n      field: field,\n      ignoreCase: ignoreCase,\n      operator: operator\n    };\n  };\n};\n\nvar fnFormatter = function fnFormatter(_a) {\n  var operator = _a.operator;\n  return function (_a) {\n    var field = _a.field,\n        value = _a.value;\n    return operator + \"(\" + field + \",\" + value + \")\";\n  };\n};\n\nvar singleOperatorFormatter = function singleOperatorFormatter(_a) {\n  var operator = _a.operator;\n  return function (_a) {\n    var field = _a.field,\n        value = _a.value;\n    return field + \" \" + operator + \" \" + value;\n  };\n};\n\nvar stringFormat = function stringFormat(formatter) {\n  return compose(formatter, encodeValue, quote, toLower, normalizeField);\n};\n\nvar stringFnOperator = function stringFnOperator(settings) {\n  return stringFormat(fnFormatter(settings));\n};\n\nvar stringOperator = function stringOperator(settings) {\n  return stringFormat(singleOperatorFormatter(settings));\n};\n\nvar numericOperator = function numericOperator(settings) {\n  return compose(singleOperatorFormatter(settings), normalizeField);\n};\n\nvar dateOperator = function dateOperator(settings) {\n  return compose(singleOperatorFormatter(settings), normalizeField, formatDate(settings));\n};\n\nvar ifDate = function ifDate(settings) {\n  return ifElse(isDateValue, dateOperator(settings), numericOperator(settings));\n};\n\nvar typedOperator = function typedOperator(settings) {\n  return ifElse(isStringValue, stringOperator(settings), ifDate(settings));\n};\n\nvar appendEqual = function appendEqual(str) {\n  return str + \" eq -1\";\n};\n\nvar nonValueExpression = function nonValueExpression(formatter) {\n  return compose(formatter, normalizeField);\n};\n\nvar filterOperators = function filterOperators(operator, settings) {\n  return {\n    contains: stringFnOperator(tslib_1.__assign({}, settings, {\n      operator: \"contains\"\n    })),\n    doesnotcontain: compose(appendEqual, stringFnOperator(tslib_1.__assign({}, settings, {\n      operator: \"indexof\"\n    }))),\n    endswith: stringFnOperator(tslib_1.__assign({}, settings, {\n      operator: \"endswith\"\n    })),\n    eq: typedOperator(tslib_1.__assign({}, settings, {\n      operator: \"eq\"\n    })),\n    gt: typedOperator(tslib_1.__assign({}, settings, {\n      operator: \"gt\"\n    })),\n    gte: typedOperator(tslib_1.__assign({}, settings, {\n      operator: \"ge\"\n    })),\n    isempty: nonValueExpression(function (_a) {\n      var field = _a.field;\n      return field + \" eq ''\";\n    }),\n    isnotempty: nonValueExpression(function (_a) {\n      var field = _a.field;\n      return field + \" ne ''\";\n    }),\n    isnotnull: nonValueExpression(function (_a) {\n      var field = _a.field;\n      return field + \" ne null\";\n    }),\n    isnull: nonValueExpression(function (_a) {\n      var field = _a.field;\n      return field + \" eq null\";\n    }),\n    lt: typedOperator(tslib_1.__assign({}, settings, {\n      operator: \"lt\"\n    })),\n    lte: typedOperator(tslib_1.__assign({}, settings, {\n      operator: \"le\"\n    })),\n    neq: typedOperator(tslib_1.__assign({}, settings, {\n      operator: \"ne\"\n    })),\n    startswith: stringFnOperator(tslib_1.__assign({}, settings, {\n      operator: \"startswith\"\n    }))\n  }[operator];\n};\n\nvar join = function join(x) {\n  return \" \" + x.logic + \" \";\n};\n\nvar serialize = function serialize(settings) {\n  return function (x) {\n    return filterOperators(x.operator, settings)(x);\n  };\n};\n\nvar serializeAll = function serializeAll(settings) {\n  return serializeFilters(function (filter) {\n    return ifElse(isCompositeFilterDescriptor, serializeAll(settings), serialize(settings))(filter);\n  }, join);\n};\n/**\n * @hidden\n */\n\n\nexport var serializeFilter = function serializeFilter(filter, settings) {\n  if (settings === void 0) {\n    settings = {};\n  }\n\n  if (filter.filters && filter.filters.length) {\n    return \"$filter=\" + serializeAll(settings)(normalizeFilters(filter));\n  }\n\n  return \"\";\n};","map":{"version":3,"sources":["/Users/samehrlich/Desktop/final-app/node_modules/@progress/kendo-data-query/dist/es/odata-filtering.operators.js"],"names":["tslib_1","isCompositeFilterDescriptor","compose","ifElse","normalizeField","quote","toLower","isDateValue","isStringValue","serializeFilters","encodeValue","toUTC","normalizeFilters","formatDate","_a","utcDates","field","value","ignoreCase","operator","JSON","stringify","replace","fnFormatter","singleOperatorFormatter","stringFormat","formatter","stringFnOperator","settings","stringOperator","numericOperator","dateOperator","ifDate","typedOperator","appendEqual","str","nonValueExpression","filterOperators","contains","__assign","doesnotcontain","endswith","eq","gt","gte","isempty","isnotempty","isnotnull","isnull","lt","lte","neq","startswith","join","x","logic","serialize","serializeAll","filter","serializeFilter","filters","length"],"mappings":"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","sourcesContent":["import * as tslib_1 from \"tslib\";\nimport { isCompositeFilterDescriptor } from './filtering/filter-descriptor.interface';\nimport { compose, ifElse } from './funcs';\nimport { normalizeField, quote, toLower, isDateValue, isStringValue, serializeFilters, encodeValue, toUTC } from './filter-serialization.common';\nimport { normalizeFilters } from './filtering/filter.operators';\nvar formatDate = function (_a) {\n    var utcDates = _a.utcDates;\n    return function (_a) {\n        var field = _a.field, value = _a.value, ignoreCase = _a.ignoreCase, operator = _a.operator;\n        return ({\n            value: JSON.stringify(!utcDates ? toUTC(value) : value).replace(/\"/g, \"\"),\n            field: field,\n            ignoreCase: ignoreCase,\n            operator: operator\n        });\n    };\n};\nvar fnFormatter = function (_a) {\n    var operator = _a.operator;\n    return function (_a) {\n        var field = _a.field, value = _a.value;\n        return operator + \"(\" + field + \",\" + value + \")\";\n    };\n};\nvar singleOperatorFormatter = function (_a) {\n    var operator = _a.operator;\n    return function (_a) {\n        var field = _a.field, value = _a.value;\n        return field + \" \" + operator + \" \" + value;\n    };\n};\nvar stringFormat = function (formatter) { return compose(formatter, encodeValue, quote, toLower, normalizeField); };\nvar stringFnOperator = function (settings) { return stringFormat(fnFormatter(settings)); };\nvar stringOperator = function (settings) { return stringFormat(singleOperatorFormatter(settings)); };\nvar numericOperator = function (settings) { return compose(singleOperatorFormatter(settings), normalizeField); };\nvar dateOperator = function (settings) { return compose(singleOperatorFormatter(settings), normalizeField, formatDate(settings)); };\nvar ifDate = function (settings) { return ifElse(isDateValue, dateOperator(settings), numericOperator(settings)); };\nvar typedOperator = function (settings) { return ifElse(isStringValue, stringOperator(settings), ifDate(settings)); };\nvar appendEqual = function (str) { return str + \" eq -1\"; };\nvar nonValueExpression = function (formatter) { return compose(formatter, normalizeField); };\nvar filterOperators = function (operator, settings) { return ({\n    contains: stringFnOperator(tslib_1.__assign({}, settings, { operator: \"contains\" })),\n    doesnotcontain: compose(appendEqual, stringFnOperator(tslib_1.__assign({}, settings, { operator: \"indexof\" }))),\n    endswith: stringFnOperator(tslib_1.__assign({}, settings, { operator: \"endswith\" })),\n    eq: typedOperator(tslib_1.__assign({}, settings, { operator: \"eq\" })),\n    gt: typedOperator(tslib_1.__assign({}, settings, { operator: \"gt\" })),\n    gte: typedOperator(tslib_1.__assign({}, settings, { operator: \"ge\" })),\n    isempty: nonValueExpression(function (_a) {\n        var field = _a.field;\n        return field + \" eq ''\";\n    }),\n    isnotempty: nonValueExpression(function (_a) {\n        var field = _a.field;\n        return field + \" ne ''\";\n    }),\n    isnotnull: nonValueExpression(function (_a) {\n        var field = _a.field;\n        return field + \" ne null\";\n    }),\n    isnull: nonValueExpression(function (_a) {\n        var field = _a.field;\n        return field + \" eq null\";\n    }),\n    lt: typedOperator(tslib_1.__assign({}, settings, { operator: \"lt\" })),\n    lte: typedOperator(tslib_1.__assign({}, settings, { operator: \"le\" })),\n    neq: typedOperator(tslib_1.__assign({}, settings, { operator: \"ne\" })),\n    startswith: stringFnOperator(tslib_1.__assign({}, settings, { operator: \"startswith\" }))\n}[operator]); };\nvar join = function (x) { return \" \" + x.logic + \" \"; };\nvar serialize = function (settings) { return function (x) { return filterOperators(x.operator, settings)(x); }; };\nvar serializeAll = function (settings) { return serializeFilters(function (filter) { return ifElse(isCompositeFilterDescriptor, serializeAll(settings), serialize(settings))(filter); }, join); };\n/**\n * @hidden\n */\nexport var serializeFilter = function (filter, settings) {\n    if (settings === void 0) { settings = {}; }\n    if (filter.filters && filter.filters.length) {\n        return \"$filter=\" + serializeAll(settings)(normalizeFilters(filter));\n    }\n    return \"\";\n};\n"]},"metadata":{},"sourceType":"module"}