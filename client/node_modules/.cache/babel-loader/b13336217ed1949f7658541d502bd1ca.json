{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport * as React from 'react';\nimport { bezierCommand, controlPoint, line, svgPath } from './utils/svg-calc';\nimport { getColorFromHSV, getRGBA, getContrastFromTwoRGBAs } from './utils/color-parser';\nvar AA_CONTRAST = 4.5;\nvar AAA_CONTRAST = 7;\nvar STEP_COUNT = 16;\n;\n/**\n * @hidden\n */\n\nvar ColorContrastSvg =\n/** @class */\nfunction (_super) {\n  __extends(ColorContrastSvg, _super);\n\n  function ColorContrastSvg() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ColorContrastSvg.prototype.renderSvgCurveLine = function () {\n    var _this = this;\n\n    var gradientRectMetrics = this.props.metrics;\n\n    var findValue = function findValue(contrast, saturation, low, high, comparer) {\n      var mid = (low + high) / 2;\n      var hsva = Object.assign({}, _this.props.hsva, {\n        s: saturation / gradientRectMetrics.width,\n        v: 1 - mid / gradientRectMetrics.height\n      });\n      var currentContrast = getContrastFromTwoRGBAs(getRGBA(getColorFromHSV(hsva)), getRGBA(_this.props.backgroundColor || ''));\n\n      if (low + 0.5 > high) {\n        if (currentContrast < contrast + 1 && currentContrast > contrast - 1) {\n          return mid;\n        } else {\n          return null;\n        }\n      }\n\n      if (comparer(currentContrast, contrast)) {\n        return findValue(contrast, saturation, low, high - (high - low) / 2, comparer);\n      }\n\n      return findValue(contrast, saturation, low + (high - low) / 2, high, comparer);\n    };\n\n    var getPaths = function getPaths(contrast, stepCount, reversed) {\n      if (reversed === void 0) {\n        reversed = false;\n      }\n\n      var points = [];\n\n      for (var i = 0; i <= gradientRectMetrics.width; i += gradientRectMetrics.width / stepCount) {\n        var value = findValue(contrast, i, 0, gradientRectMetrics.height, reversed ? function (a, b) {\n          return a < b;\n        } : function (a, b) {\n          return a > b;\n        });\n\n        if (value !== null) {\n          points.push([i, value]);\n        }\n      }\n\n      return points;\n    };\n\n    var bezierCommandCalc = bezierCommand(controlPoint(line));\n    return svgPath(getPaths(AA_CONTRAST, STEP_COUNT), bezierCommandCalc) + svgPath(getPaths(AA_CONTRAST, STEP_COUNT, true), bezierCommandCalc) + svgPath(getPaths(AAA_CONTRAST, STEP_COUNT), bezierCommandCalc) + svgPath(getPaths(AAA_CONTRAST, STEP_COUNT, true), bezierCommandCalc);\n  };\n\n  ColorContrastSvg.prototype.shouldComponentUpdate = function (nextProps) {\n    if (nextProps.hsva.h === this.props.hsva.h && nextProps.hsva.a === this.props.hsva.a && this.props.backgroundColor === nextProps.backgroundColor) {\n      return false;\n    }\n\n    return true;\n  };\n\n  ColorContrastSvg.prototype.render = function () {\n    return React.createElement(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      className: 'k-color-contrast-svg',\n      dangerouslySetInnerHTML: {\n        __html: this.renderSvgCurveLine()\n      },\n      style: {\n        position: 'absolute',\n        overflow: 'visible',\n        pointerEvents: 'none',\n        left: 0,\n        top: 0,\n        zIndex: 3\n      }\n    });\n  };\n\n  return ColorContrastSvg;\n}(React.Component);\n\nexport { ColorContrastSvg };","map":{"version":3,"sources":["../../../src/colors/ColorContrastSvg.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport * as React from 'react';\nimport { bezierCommand, controlPoint, line, svgPath } from './utils/svg-calc';\nimport { getColorFromHSV, getRGBA, getContrastFromTwoRGBAs } from './utils/color-parser';\nvar AA_CONTRAST = 4.5;\nvar AAA_CONTRAST = 7;\nvar STEP_COUNT = 16;\n;\n/**\n * @hidden\n */\nvar ColorContrastSvg = /** @class */ (function (_super) {\n    __extends(ColorContrastSvg, _super);\n    function ColorContrastSvg() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ColorContrastSvg.prototype.renderSvgCurveLine = function () {\n        var _this = this;\n        var gradientRectMetrics = this.props.metrics;\n        var findValue = function (contrast, saturation, low, high, comparer) {\n            var mid = (low + high) / 2;\n            var hsva = Object.assign({}, _this.props.hsva, { s: saturation / gradientRectMetrics.width, v: 1 - mid / gradientRectMetrics.height });\n            var currentContrast = getContrastFromTwoRGBAs(getRGBA(getColorFromHSV(hsva)), getRGBA(_this.props.backgroundColor || ''));\n            if (low + 0.5 > high) {\n                if (currentContrast < contrast + 1 && currentContrast > contrast - 1) {\n                    return mid;\n                }\n                else {\n                    return null;\n                }\n            }\n            if (comparer(currentContrast, contrast)) {\n                return findValue(contrast, saturation, low, high - (high - low) / 2, comparer);\n            }\n            return findValue(contrast, saturation, low + (high - low) / 2, high, comparer);\n        };\n        var getPaths = function (contrast, stepCount, reversed) {\n            if (reversed === void 0) { reversed = false; }\n            var points = [];\n            for (var i = 0; i <= gradientRectMetrics.width; i += gradientRectMetrics.width / stepCount) {\n                var value = findValue(contrast, i, 0, gradientRectMetrics.height, reversed ? (function (a, b) { return a < b; }) : (function (a, b) { return a > b; }));\n                if (value !== null) {\n                    points.push([i, value]);\n                }\n            }\n            return points;\n        };\n        var bezierCommandCalc = bezierCommand(controlPoint(line));\n        return svgPath(getPaths(AA_CONTRAST, STEP_COUNT), bezierCommandCalc) +\n            svgPath(getPaths(AA_CONTRAST, STEP_COUNT, true), bezierCommandCalc) +\n            svgPath(getPaths(AAA_CONTRAST, STEP_COUNT), bezierCommandCalc) +\n            svgPath(getPaths(AAA_CONTRAST, STEP_COUNT, true), bezierCommandCalc);\n    };\n    ColorContrastSvg.prototype.shouldComponentUpdate = function (nextProps) {\n        if (nextProps.hsva.h === this.props.hsva.h &&\n            nextProps.hsva.a === this.props.hsva.a &&\n            this.props.backgroundColor === nextProps.backgroundColor) {\n            return false;\n        }\n        return true;\n    };\n    ColorContrastSvg.prototype.render = function () {\n        return (React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", className: 'k-color-contrast-svg', dangerouslySetInnerHTML: { __html: this.renderSvgCurveLine() }, style: {\n                position: 'absolute',\n                overflow: 'visible',\n                pointerEvents: 'none',\n                left: 0,\n                top: 0,\n                zIndex: 3\n            } }));\n    };\n    return ColorContrastSvg;\n}(React.Component));\nexport { ColorContrastSvg };\n//# sourceMappingURL=ColorContrastSvg.js.map"]},"metadata":{},"sourceType":"module"}