{"ast":null,"code":"import { FOCUSABLE_ELEMENTS, KEYBOARD_NAV_DATA_BODY, KEYBOARD_NAV_DATA_HEADER, KEYBOARD_NAV_DATA_ID, KEYBOARD_NAV_DATA_LEVEL, KEYBOARD_NAV_DATA_SCOPE, KEYBOARD_NAV_FILTER_COL_SUFFIX, TABBABLE_ELEMENTS } from './constants';\n/**\n * @hidden\n */\n\nexport var generateNavigatableId = function generateNavigatableId(navigationId, idPrefix, type) {\n  if (type === void 0) {\n    type = 'cell';\n  }\n\n  return idPrefix + \"_\" + navigationId + \"_\" + type;\n};\n/**\n * @hidden\n */\n\nexport var getNavigatableLevel = function getNavigatableLevel(element) {\n  if (!element) {\n    return;\n  }\n\n  return parseInt(element.getAttribute(KEYBOARD_NAV_DATA_LEVEL) || '', 10);\n};\n/**\n * @hidden\n */\n\nexport var getNavigatableId = function getNavigatableId(element) {\n  if (!element) {\n    return;\n  }\n\n  var dataId = element.getAttribute(KEYBOARD_NAV_DATA_ID);\n  return dataId ? dataId : undefined;\n};\n/**\n * @hidden\n */\n\nexport var isNavigatable = function isNavigatable(element) {\n  if (!element) {\n    return false;\n  }\n\n  var dataId = element.getAttribute(KEYBOARD_NAV_DATA_ID);\n  return Boolean(dataId);\n};\n/**\n * @hidden\n */\n\nexport var getNavigatableElement = function getNavigatableElement(scope, options) {\n  if (options === void 0) {\n    options = {\n      level: 0\n    };\n  }\n\n  return scope.querySelector(\"[\" + KEYBOARD_NAV_DATA_LEVEL + \"='\" + options.level + \"']\");\n};\n/**\n * @hidden\n */\n\nexport var getClosestNavigatableElement = function getClosestNavigatableElement(target) {\n  return target.parentElement && target.parentElement.closest(\"[\" + KEYBOARD_NAV_DATA_LEVEL + \"]\");\n};\n/**\n * @hidden\n */\n\nexport var getActiveElement = function getActiveElement(scope, activeId) {\n  return scope.querySelector(\"[\" + KEYBOARD_NAV_DATA_ID + \"='\" + activeId + \"']\");\n};\n/**\n * @hidden\n */\n\nexport var getClosestScope = function getClosestScope(target) {\n  return target.parentElement && target.parentElement.closest(\"[\" + KEYBOARD_NAV_DATA_SCOPE + \"]\");\n};\n/**\n * @hidden\n */\n\nexport var getHeaderElement = function getHeaderElement(scope) {\n  return scope.querySelector(\"[\" + KEYBOARD_NAV_DATA_HEADER + \"]\");\n};\n/**\n * @hidden\n */\n\nexport var getBodyElement = function getBodyElement(scope) {\n  return scope.querySelector(\"[\" + KEYBOARD_NAV_DATA_BODY + \"]\");\n};\n/**\n * @hidden\n */\n\nexport var getFocusableElements = function getFocusableElements(scope, options) {\n  if (options === void 0) {\n    options = {\n      focusable: false\n    };\n  }\n\n  var selectors = options.focusable ? FOCUSABLE_ELEMENTS : TABBABLE_ELEMENTS;\n  return Array.from(scope.querySelectorAll(selectors.join(',')));\n};\n/**\n * @hidden\n */\n\nexport var getNavigatableElements = function getNavigatableElements(scope, options) {\n  if (options === void 0) {\n    options = {\n      level: 0\n    };\n  }\n\n  if (!scope) {\n    return [];\n  }\n\n  var selector = FOCUSABLE_ELEMENTS.map(function (el) {\n    return el + (\"[\" + KEYBOARD_NAV_DATA_LEVEL + \"='\" + options.level + \"']\");\n  }).join(',');\n  return Array.from(scope.querySelectorAll(selector));\n};\n/**\n * @hidden\n */\n\nexport var filterNavigatableElements = function filterNavigatableElements(options) {\n  if (options === void 0) {\n    options = {\n      level: 0\n    };\n  }\n\n  var selector = FOCUSABLE_ELEMENTS.map(function (sel) {\n    return sel + (\"[\" + KEYBOARD_NAV_DATA_LEVEL + \"='\" + options.level + \"']\");\n  }).join(',');\n  return function (element) {\n    return element.matches(selector);\n  };\n};\n/**\n * @hidden\n */\n\nexport var focusElement = function focusElement(options) {\n  var elementForFocus = options.elementForFocus,\n      event = options.event,\n      contextStateRef = options.contextStateRef,\n      prevElement = options.prevElement;\n\n  if (contextStateRef.current && elementForFocus && elementForFocus.focus) {\n    event.preventDefault();\n    elementForFocus.focus();\n\n    if (isNavigatable(elementForFocus)) {\n      elementForFocus.setAttribute('tabIndex', '0');\n      contextStateRef.current.activeId = getNavigatableId(elementForFocus);\n    }\n\n    if (prevElement && isNavigatable(prevElement)) {\n      prevElement.setAttribute('tabIndex', '-1');\n    }\n  }\n};\n/**\n * @hidden\n */\n\nexport var getIdPrefix = function getIdPrefix(navigationStateRef) {\n  return navigationStateRef.current ? navigationStateRef.current.idPrefix : '';\n};\n/**\n * @hidden\n */\n\nexport var findNextIdByRowIndex = function findNextIdByRowIndex(initialRowIndex, cellIndex, elementId, matrix, isReverse) {\n  if (!elementId) {\n    return [];\n  }\n\n  var currentRowIndex = initialRowIndex + (isReverse ? -1 : 1);\n\n  while (currentRowIndex >= 0 && currentRowIndex < matrix.length) {\n    var currentId = matrix[currentRowIndex][cellIndex];\n\n    if (currentId !== elementId) {\n      return [currentId, [currentRowIndex, cellIndex]];\n    }\n\n    currentRowIndex = currentRowIndex + (isReverse ? -1 : 1);\n  }\n\n  return [];\n};\n/**\n * @hidden\n */\n\nexport var findNextIdByCellIndex = function findNextIdByCellIndex(rowIndex, initialCellIndex, elementId, matrix, isReverse) {\n  if (!elementId) {\n    return [];\n  }\n\n  var currentCellIndex = initialCellIndex + (isReverse ? -1 : 1);\n\n  while (currentCellIndex >= 0 && currentCellIndex < matrix[rowIndex].length) {\n    var currentId = matrix[rowIndex][currentCellIndex];\n\n    if (currentId !== elementId) {\n      return [currentId, [rowIndex, currentCellIndex]];\n    }\n\n    currentCellIndex = currentCellIndex + (isReverse ? -1 : 1);\n  }\n\n  return [];\n};\n/**\n * @hidden\n */\n\nexport var findId = function findId(navigationMatrix, cellId) {\n  if (!cellId) {\n    return;\n  }\n\n  for (var rowIndex = 0; rowIndex < navigationMatrix.length; rowIndex++) {\n    for (var cellIndex = 0; cellIndex < navigationMatrix[rowIndex].length; cellIndex++) {\n      if (navigationMatrix[rowIndex][cellIndex] === cellId) {\n        return [rowIndex, cellIndex];\n      }\n    }\n  }\n};\n/**\n * @hidden\n */\n\nexport var getNextNavigationIndex = function getNextNavigationIndex(navigationStateRef) {\n  return navigationStateRef.current ? navigationStateRef.current.navigationMatrix.length : 0;\n};\n/**\n * @hidden\n */\n\nexport var getFilterColumnId = function getFilterColumnId(columnId) {\n  return columnId ? \"\" + columnId + KEYBOARD_NAV_FILTER_COL_SUFFIX : '';\n};\n/**\n * @hidden\n */\n\nexport var tableKeyboardNavigationTools = {\n  generateNavigatableId: generateNavigatableId,\n  getNavigatableId: getNavigatableId,\n  getNavigatableLevel: getNavigatableLevel,\n  getNavigatableElement: getNavigatableElement,\n  getClosestNavigatableElement: getClosestNavigatableElement,\n  getActiveElement: getActiveElement,\n  getClosestScope: getClosestScope,\n  getHeaderElement: getHeaderElement,\n  getBodyElement: getBodyElement,\n  getFocusableElements: getFocusableElements,\n  getNavigatableElements: getNavigatableElements,\n  filterNavigatableElements: filterNavigatableElements,\n  focusElement: focusElement,\n  getIdPrefix: getIdPrefix,\n  isNavigatable: isNavigatable,\n  findNextIdByRowIndex: findNextIdByRowIndex,\n  findNextIdByCellIndex: findNextIdByCellIndex,\n  findId: findId,\n  getNextNavigationIndex: getNextNavigationIndex,\n  getFilterColumnId: getFilterColumnId\n};","map":{"version":3,"sources":["../../../src/navigation/utils.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { FOCUSABLE_ELEMENTS, KEYBOARD_NAV_DATA_BODY, KEYBOARD_NAV_DATA_HEADER, KEYBOARD_NAV_DATA_ID, KEYBOARD_NAV_DATA_LEVEL, KEYBOARD_NAV_DATA_SCOPE, KEYBOARD_NAV_FILTER_COL_SUFFIX, TABBABLE_ELEMENTS } from './constants';\n/**\n * @hidden\n */\nexport var generateNavigatableId = function (navigationId, idPrefix, type) {\n    if (type === void 0) { type = 'cell'; }\n    return idPrefix + \"_\" + navigationId + \"_\" + type;\n};\n/**\n * @hidden\n */\nexport var getNavigatableLevel = function (element) {\n    if (!element) {\n        return;\n    }\n    return parseInt(element.getAttribute(KEYBOARD_NAV_DATA_LEVEL) || '', 10);\n};\n/**\n * @hidden\n */\nexport var getNavigatableId = function (element) {\n    if (!element) {\n        return;\n    }\n    var dataId = element.getAttribute(KEYBOARD_NAV_DATA_ID);\n    return dataId ? dataId : undefined;\n};\n/**\n * @hidden\n */\nexport var isNavigatable = function (element) {\n    if (!element) {\n        return false;\n    }\n    var dataId = element.getAttribute(KEYBOARD_NAV_DATA_ID);\n    return Boolean(dataId);\n};\n/**\n * @hidden\n */\nexport var getNavigatableElement = function (scope, options) {\n    if (options === void 0) { options = { level: 0 }; }\n    return scope.querySelector(\"[\" + KEYBOARD_NAV_DATA_LEVEL + \"='\" + options.level + \"']\");\n};\n/**\n * @hidden\n */\nexport var getClosestNavigatableElement = function (target) {\n    return (target.parentElement &&\n        target.parentElement.closest(\"[\" + KEYBOARD_NAV_DATA_LEVEL + \"]\"));\n};\n/**\n * @hidden\n */\nexport var getActiveElement = function (scope, activeId) {\n    return scope.querySelector(\"[\" + KEYBOARD_NAV_DATA_ID + \"='\" + activeId + \"']\");\n};\n/**\n * @hidden\n */\nexport var getClosestScope = function (target) {\n    return (target.parentElement &&\n        target.parentElement.closest(\"[\" + KEYBOARD_NAV_DATA_SCOPE + \"]\"));\n};\n/**\n * @hidden\n */\nexport var getHeaderElement = function (scope) {\n    return scope.querySelector(\"[\" + KEYBOARD_NAV_DATA_HEADER + \"]\");\n};\n/**\n * @hidden\n */\nexport var getBodyElement = function (scope) {\n    return scope.querySelector(\"[\" + KEYBOARD_NAV_DATA_BODY + \"]\");\n};\n/**\n * @hidden\n */\nexport var getFocusableElements = function (scope, options) {\n    if (options === void 0) { options = { focusable: false }; }\n    var selectors = options.focusable ? FOCUSABLE_ELEMENTS : TABBABLE_ELEMENTS;\n    return Array.from(scope.querySelectorAll(selectors.join(',')));\n};\n/**\n * @hidden\n */\nexport var getNavigatableElements = function (scope, options) {\n    if (options === void 0) { options = { level: 0 }; }\n    if (!scope) {\n        return [];\n    }\n    var selector = FOCUSABLE_ELEMENTS.map(function (el) { return el + (\"[\" + KEYBOARD_NAV_DATA_LEVEL + \"='\" + options.level + \"']\"); }).join(',');\n    return Array.from(scope.querySelectorAll(selector));\n};\n/**\n * @hidden\n */\nexport var filterNavigatableElements = function (options) {\n    if (options === void 0) { options = { level: 0 }; }\n    var selector = FOCUSABLE_ELEMENTS.map(function (sel) { return sel + (\"[\" + KEYBOARD_NAV_DATA_LEVEL + \"='\" + options.level + \"']\"); }).join(',');\n    return function (element) { return element.matches(selector); };\n};\n/**\n * @hidden\n */\nexport var focusElement = function (options) {\n    var elementForFocus = options.elementForFocus, event = options.event, contextStateRef = options.contextStateRef, prevElement = options.prevElement;\n    if (contextStateRef.current && elementForFocus && elementForFocus.focus) {\n        event.preventDefault();\n        elementForFocus.focus();\n        if (isNavigatable(elementForFocus)) {\n            elementForFocus.setAttribute('tabIndex', '0');\n            contextStateRef.current.activeId = getNavigatableId(elementForFocus);\n        }\n        if (prevElement && isNavigatable(prevElement)) {\n            prevElement.setAttribute('tabIndex', '-1');\n        }\n    }\n};\n/**\n * @hidden\n */\nexport var getIdPrefix = function (navigationStateRef) {\n    return navigationStateRef.current ? navigationStateRef.current.idPrefix : '';\n};\n/**\n * @hidden\n */\nexport var findNextIdByRowIndex = function (initialRowIndex, cellIndex, elementId, matrix, isReverse) {\n    if (!elementId) {\n        return [];\n    }\n    var currentRowIndex = initialRowIndex + (isReverse ? -1 : 1);\n    while (currentRowIndex >= 0 && currentRowIndex < matrix.length) {\n        var currentId = matrix[currentRowIndex][cellIndex];\n        if (currentId !== elementId) {\n            return [currentId, [currentRowIndex, cellIndex]];\n        }\n        currentRowIndex = currentRowIndex + (isReverse ? -1 : 1);\n    }\n    return [];\n};\n/**\n * @hidden\n */\nexport var findNextIdByCellIndex = function (rowIndex, initialCellIndex, elementId, matrix, isReverse) {\n    if (!elementId) {\n        return [];\n    }\n    var currentCellIndex = initialCellIndex + (isReverse ? -1 : 1);\n    while (currentCellIndex >= 0 && currentCellIndex < matrix[rowIndex].length) {\n        var currentId = matrix[rowIndex][currentCellIndex];\n        if (currentId !== elementId) {\n            return [currentId, [rowIndex, currentCellIndex]];\n        }\n        currentCellIndex = currentCellIndex + (isReverse ? -1 : 1);\n    }\n    return [];\n};\n/**\n * @hidden\n */\nexport var findId = function (navigationMatrix, cellId) {\n    if (!cellId) {\n        return;\n    }\n    for (var rowIndex = 0; rowIndex < navigationMatrix.length; rowIndex++) {\n        for (var cellIndex = 0; cellIndex < navigationMatrix[rowIndex].length; cellIndex++) {\n            if (navigationMatrix[rowIndex][cellIndex] === cellId) {\n                return [rowIndex, cellIndex];\n            }\n        }\n    }\n};\n/**\n * @hidden\n */\nexport var getNextNavigationIndex = function (navigationStateRef) {\n    return navigationStateRef.current ? navigationStateRef.current.navigationMatrix.length : 0;\n};\n/**\n * @hidden\n */\nexport var getFilterColumnId = function (columnId) {\n    return columnId ? \"\" + columnId + KEYBOARD_NAV_FILTER_COL_SUFFIX : '';\n};\n/**\n * @hidden\n */\nexport var tableKeyboardNavigationTools = {\n    generateNavigatableId: generateNavigatableId,\n    getNavigatableId: getNavigatableId,\n    getNavigatableLevel: getNavigatableLevel,\n    getNavigatableElement: getNavigatableElement,\n    getClosestNavigatableElement: getClosestNavigatableElement,\n    getActiveElement: getActiveElement,\n    getClosestScope: getClosestScope,\n    getHeaderElement: getHeaderElement,\n    getBodyElement: getBodyElement,\n    getFocusableElements: getFocusableElements,\n    getNavigatableElements: getNavigatableElements,\n    filterNavigatableElements: filterNavigatableElements,\n    focusElement: focusElement,\n    getIdPrefix: getIdPrefix,\n    isNavigatable: isNavigatable,\n    findNextIdByRowIndex: findNextIdByRowIndex,\n    findNextIdByCellIndex: findNextIdByCellIndex,\n    findId: findId,\n    getNextNavigationIndex: getNextNavigationIndex,\n    getFilterColumnId: getFilterColumnId\n};\n//# sourceMappingURL=utils.js.map"]},"metadata":{},"sourceType":"module"}